(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,99587,e=>{"use strict";function t(e){return[...e.elements.nodes.map(e=>{let t=e.data.device_name||"",a=t.length>25?t.substring(0,24)+"â€¦":t;return{data:{...e.data,label:e.data.id,sublabel:a}}}),...e.elements.edges.map(e=>({data:e.data}))]}function a(e,t){let a=e.getElementById(t),n=e.collection(),s=a.outgoers("node");for(;s.nonempty();)n=n.union(s),s=s.outgoers("node");return n}function n(e,t){let a=e.getElementById(t),n=e.collection().union(a),s=a;for(;s.nonempty();){let e=s.incomers();if(e.nonempty())n=n.union(e),s=e.nodes();else break}return n}function s(e){switch(e){case"3":case"III":return"#ef4444";case"2":case"II":return"#f59e0b";case"1":case"I":return"#22c55e";default:return"#6b7280"}}function o(e){switch(e){case"3":return"Class III (High Risk)";case"2":return"Class II (Moderate Risk)";case"1":return"Class I (Low Risk)";default:return`Class ${e}`}}function l(e,t,a=5,n=5,s=500){let o=new Map,r=new Map,d=new Map;for(let t of e.elements.nodes)o.set(t.data.id,t),r.set(t.data.id,[]),d.set(t.data.id,[]);for(let t of e.elements.edges){let e=r.get(t.data.target);e&&e.push(t.data.source);let a=d.get(t.data.source);a&&a.push(t.data.target)}let i=new Set;if(!o.has(t))return{metadata:{...e.metadata,total_nodes:0,total_edges:0},elements:{nodes:[],edges:[]}};i.add(t);let u=[t];for(let e=0;e<a&&u.length>0&&i.size<s;e++){let e=[];for(let t of u)for(let a of r.get(t)||[])!i.has(a)&&i.size<s&&(i.add(a),e.push(a));u=e}u=[t];for(let e=0;e<n&&u.length>0&&i.size<s;e++){let e=[];for(let t of u)for(let a of d.get(t)||[])!i.has(a)&&i.size<s&&(i.add(a),e.push(a));u=e}let c=[];for(let e of i){let t=o.get(e);t&&c.push(t)}let f=[];for(let t of e.elements.edges)i.has(t.data.source)&&i.has(t.data.target)&&f.push(t);return{metadata:{...e.metadata,total_nodes:c.length,total_edges:f.length},elements:{nodes:c,edges:f}}}function r(e){let t=new Map,a=e.nodes().filter(e=>0===e.incomers("edge").length);a.forEach(e=>{t.set(e.id(),0)});let n=a,s=0;for(;n.nonempty();){s++;let a=e.collection();n.forEach(e=>{e.outgoers("node").forEach(e=>{t.has(e.id())||(t.set(e.id(),s),a.merge(e))})}),n=a}return t}function d(e){if(!e)return null;let t=new Date(e);if(!isNaN(t.getTime()))return t.getTime();let a=e.split("/");if(3===a.length){let[e,t,n]=a.map(Number),s=new Date(n,e-1,t);if(!isNaN(s.getTime()))return s.getTime()}return null}function i(e,t,a=20){if(!t||t.trim().length<2)return[];let n=t.toLowerCase().trim(),s=[];for(let t of e.elements.nodes){let e=t.data.id.toLowerCase(),a=(t.data.device_name||"").toLowerCase(),o=(t.data.applicant||"").toLowerCase(),l=0;e===n?l=100:e.startsWith(n)?l=80:e.includes(n)?l=60:a.startsWith(n)?l=50:a.includes(n)?l=40:o.includes(n)&&(l=20),l>0&&s.push({node:t,score:l})}return s.sort((e,t)=>t.score!==e.score?t.score-e.score:e.node.data.id.localeCompare(t.node.data.id)),s.slice(0,a).map(e=>e.node)}function u(e,t,a=5){if(!t||t.trim().length<2)return[];let n=t.toLowerCase().trim(),s=new Map;for(let t of e.elements.nodes){let e=t.data.applicant||"";e.toLowerCase().includes(n)&&s.set(e,(s.get(e)||0)+1)}return Array.from(s.entries()).map(([e,t])=>({name:e,deviceCount:t})).sort((e,t)=>t.deviceCount-e.deviceCount).slice(0,a)}function c(e,t,a=50,n=1){let s=new Map,o=new Map,l=new Map;for(let t of e.elements.nodes)s.set(t.data.id,t),o.set(t.data.id,[]),l.set(t.data.id,[]);for(let t of e.elements.edges){let e=o.get(t.data.target);e&&e.push(t.data.source);let a=l.get(t.data.source);a&&a.push(t.data.target)}let r=e.elements.nodes.filter(e=>e.data.applicant===t).sort((e,t)=>{let a=d(e.data.decision_date)||0;return(d(t.data.decision_date)||0)-a}).slice(0,a),i=new Set;for(let e of r)i.add(e.data.id);let u=r.map(e=>e.data.id);for(let e=0;e<n&&u.length>0;e++){let e=[];for(let t of u)for(let a of o.get(t)||[])i.has(a)||(i.add(a),e.push(a));u=e}u=r.map(e=>e.data.id);for(let e=0;e<n&&u.length>0;e++){let e=[];for(let t of u)for(let a of l.get(t)||[])i.has(a)||(i.add(a),e.push(a));u=e}let f=[];for(let e of i){let t=s.get(e);t&&f.push(t)}let g=[];for(let t of e.elements.edges)i.has(t.data.source)&&i.has(t.data.target)&&g.push(t);return{metadata:{...e.metadata,total_nodes:f.length,total_edges:g.length},elements:{nodes:f,edges:g}}}function f(e,t){return e.elements.nodes.filter(e=>e.data.applicant===t).length}e.s(["calculateNodeDepths",()=>r,"convertToElements",()=>t,"extractCompanySubgraph",()=>c,"extractSubgraph",()=>l,"findDescendants",()=>a,"findPathToRoot",()=>n,"getCompanyDeviceCount",()=>f,"getDeviceClassColor",()=>s,"getDeviceClassLabel",()=>o,"parseDateToTimestamp",()=>d,"searchCompanies",()=>u,"searchDevices",()=>i])},40233,e=>{e.v(t=>Promise.all(["static/chunks/9e0b2161c0015a9d.js"].map(t=>e.l(t))).then(()=>t(39098)))}]);