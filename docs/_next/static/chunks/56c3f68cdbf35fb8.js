(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,65742,(e,t,r)=>{t.exports=function(){this.__data__=[],this.size=0}},25172,(e,t,r)=>{t.exports=function(e,t){return e===t||e!=e&&t!=t}},34314,(e,t,r)=>{var n=e.r(25172);t.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return -1}},19206,(e,t,r)=>{var n=e.r(34314),i=Array.prototype.splice;t.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},67763,(e,t,r)=>{var n=e.r(34314);t.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},23407,(e,t,r)=>{var n=e.r(34314);t.exports=function(e){return n(this.__data__,e)>-1}},53833,(e,t,r)=>{var n=e.r(34314);t.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},29039,(e,t,r)=>{var n=e.r(65742),i=e.r(19206),a=e.r(67763),o=e.r(23407),s=e.r(53833);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},5400,(e,t,r)=>{var n=e.r(29039);t.exports=function(){this.__data__=new n,this.size=0}},86238,(e,t,r)=>{t.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},57831,(e,t,r)=>{t.exports=function(e){return this.__data__.get(e)}},77802,(e,t,r)=>{t.exports=function(e){return this.__data__.has(e)}},236,(e,t,r)=>{t.exports=e.g&&e.g.Object===Object&&e.g},39088,(e,t,r)=>{var n=e.r(236),i="object"==typeof self&&self&&self.Object===Object&&self;t.exports=n||i||Function("return this")()},30353,(e,t,r)=>{t.exports=e.r(39088).Symbol},43436,(e,t,r)=>{var n=e.r(30353),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=n?n.toStringTag:void 0;t.exports=function(e){var t=a.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=o.call(e);return n&&(t?e[s]=r:delete e[s]),i}},23243,(e,t,r)=>{var n=Object.prototype.toString;t.exports=function(e){return n.call(e)}},77684,(e,t,r)=>{var n=e.r(30353),i=e.r(43436),a=e.r(23243),o=n?n.toStringTag:void 0;t.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},12447,(e,t,r)=>{t.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},71223,(e,t,r)=>{var n=e.r(77684),i=e.r(12447);t.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},53789,(e,t,r)=>{t.exports=e.r(39088)["__core-js_shared__"]},69553,(e,t,r)=>{var n,i=e.r(53789),a=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(e){return!!a&&a in e}},76366,(e,t,r)=>{var n=Function.prototype.toString;t.exports=function(e){if(null!=e){try{return n.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},54368,(e,t,r)=>{var n=e.r(71223),i=e.r(69553),a=e.r(12447),o=e.r(76366),s=/^\[object .+?Constructor\]$/,l=Object.prototype,u=Function.prototype.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(e){return!(!a(e)||i(e))&&(n(e)?d:s).test(o(e))}},63958,(e,t,r)=>{t.exports=function(e,t){return null==e?void 0:e[t]}},41920,(e,t,r)=>{var n=e.r(54368),i=e.r(63958);t.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},87362,(e,t,r)=>{t.exports=e.r(41920)(e.r(39088),"Map")},32760,(e,t,r)=>{t.exports=e.r(41920)(Object,"create")},50514,(e,t,r)=>{var n=e.r(32760);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},97617,(e,t,r)=>{t.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}},57412,(e,t,r)=>{var n=e.r(32760),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},23592,(e,t,r)=>{var n=e.r(32760),i=Object.prototype.hasOwnProperty;t.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},39004,(e,t,r)=>{var n=e.r(32760);t.exports=function(e,t){var r=this.__data__;return this.size+=+!this.has(e),r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},34421,(e,t,r)=>{var n=e.r(50514),i=e.r(97617),a=e.r(57412),o=e.r(23592),s=e.r(39004);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},48994,(e,t,r)=>{var n=e.r(34421),i=e.r(29039),a=e.r(87362);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(a||i),string:new n}}},24053,(e,t,r)=>{t.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},87994,(e,t,r)=>{var n=e.r(24053);t.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},96768,(e,t,r)=>{var n=e.r(87994);t.exports=function(e){var t=n(this,e).delete(e);return this.size-=!!t,t}},29932,(e,t,r)=>{var n=e.r(87994);t.exports=function(e){return n(this,e).get(e)}},92647,(e,t,r)=>{var n=e.r(87994);t.exports=function(e){return n(this,e).has(e)}},46644,(e,t,r)=>{var n=e.r(87994);t.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=+(r.size!=i),this}},87547,(e,t,r)=>{var n=e.r(48994),i=e.r(96768),a=e.r(29932),o=e.r(92647),s=e.r(46644);function l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}l.prototype.clear=n,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,t.exports=l},20517,(e,t,r)=>{var n=e.r(29039),i=e.r(87362),a=e.r(87547);t.exports=function(e,t){var r=this.__data__;if(r instanceof n){var o=r.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++r.size,this;r=this.__data__=new a(o)}return r.set(e,t),this.size=r.size,this}},1551,(e,t,r)=>{var n=e.r(29039),i=e.r(5400),a=e.r(86238),o=e.r(57831),s=e.r(77802),l=e.r(20517);function u(e){var t=this.__data__=new n(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=l,t.exports=u},12895,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},24251,(e,t,r)=>{var n=e.r(41920);t.exports=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}()},74548,(e,t,r)=>{var n=e.r(24251);t.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},4300,(e,t,r)=>{var n=e.r(74548),i=e.r(25172),a=Object.prototype.hasOwnProperty;t.exports=function(e,t,r){var o=e[t];a.call(e,t)&&i(o,r)&&(void 0!==r||t in e)||n(e,t,r)}},72351,(e,t,r)=>{var n=e.r(4300),i=e.r(74548);t.exports=function(e,t,r,a){var o=!r;r||(r={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=a?a(r[u],e[u],u,r,e):void 0;void 0===c&&(c=e[u]),o?i(r,u,c):n(r,u,c)}return r}},55803,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},77289,(e,t,r)=>{t.exports=function(e){return null!=e&&"object"==typeof e}},66645,(e,t,r)=>{var n=e.r(77684),i=e.r(77289);t.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},73250,(e,t,r)=>{var n=e.r(66645),i=e.r(77289),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable;t.exports=n(function(){return arguments}())?n:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")}},45350,(e,t,r)=>{t.exports=Array.isArray},24013,(e,t,r)=>{t.exports=function(){return!1}},56956,(e,t,r)=>{var n=e.r(39088),i=e.r(24013),a=r&&!r.nodeType&&r,o=a&&t&&!t.nodeType&&t,s=o&&o.exports===a?n.Buffer:void 0;t.exports=(s?s.isBuffer:void 0)||i},66397,(e,t,r)=>{var n=/^(?:0|[1-9]\d*)$/;t.exports=function(e,t){var r=typeof e;return!!(t=null==t?0x1fffffffffffff:t)&&("number"==r||"symbol"!=r&&n.test(e))&&e>-1&&e%1==0&&e<t}},98376,(e,t,r)=>{t.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=0x1fffffffffffff}},76602,(e,t,r)=>{var n=e.r(77684),i=e.r(98376),a=e.r(77289),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,t.exports=function(e){return a(e)&&i(e.length)&&!!o[n(e)]}},33999,(e,t,r)=>{t.exports=function(e){return function(t){return e(t)}}},80156,(e,t,r)=>{var n=e.r(236),i=r&&!r.nodeType&&r,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i&&n.process;t.exports=function(){try{var e=a&&a.require&&a.require("util").types;if(e)return e;return o&&o.binding&&o.binding("util")}catch(e){}}()},3023,(e,t,r)=>{var n=e.r(76602),i=e.r(33999),a=e.r(80156),o=a&&a.isTypedArray;t.exports=o?i(o):n},58877,(e,t,r)=>{var n=e.r(55803),i=e.r(73250),a=e.r(45350),o=e.r(56956),s=e.r(66397),l=e.r(3023),u=Object.prototype.hasOwnProperty;t.exports=function(e,t){var r=a(e),c=!r&&i(e),d=!r&&!c&&o(e),h=!r&&!c&&!d&&l(e),f=r||c||d||h,p=f?n(e.length,String):[],v=p.length;for(var g in e)(t||u.call(e,g))&&!(f&&("length"==g||d&&("offset"==g||"parent"==g)||h&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,v)))&&p.push(g);return p}},63996,(e,t,r)=>{var n=Object.prototype;t.exports=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||n)}},25717,(e,t,r)=>{t.exports=function(e,t){return function(r){return e(t(r))}}},42369,(e,t,r)=>{t.exports=e.r(25717)(Object.keys,Object)},48477,(e,t,r)=>{var n=e.r(63996),i=e.r(42369),a=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))a.call(e,r)&&"constructor"!=r&&t.push(r);return t}},51095,(e,t,r)=>{var n=e.r(71223),i=e.r(98376);t.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},33679,(e,t,r)=>{var n=e.r(58877),i=e.r(48477),a=e.r(51095);t.exports=function(e){return a(e)?n(e):i(e)}},60196,(e,t,r)=>{var n=e.r(72351),i=e.r(33679);t.exports=function(e,t){return e&&n(t,i(t),e)}},13730,(e,t,r)=>{t.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},85689,(e,t,r)=>{var n=e.r(12447),i=e.r(63996),a=e.r(13730),o=Object.prototype.hasOwnProperty;t.exports=function(e){if(!n(e))return a(e);var t=i(e),r=[];for(var s in e)"constructor"==s&&(t||!o.call(e,s))||r.push(s);return r}},89695,(e,t,r)=>{var n=e.r(58877),i=e.r(85689),a=e.r(51095);t.exports=function(e){return a(e)?n(e,!0):i(e)}},52624,(e,t,r)=>{var n=e.r(72351),i=e.r(89695);t.exports=function(e,t){return e&&n(t,i(t),e)}},22781,(e,t,r)=>{var n=e.r(39088),i=r&&!r.nodeType&&r,a=i&&t&&!t.nodeType&&t,o=a&&a.exports===i?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;t.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},76736,(e,t,r)=>{t.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},36100,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,a=[];++r<n;){var o=e[r];t(o,r,e)&&(a[i++]=o)}return a}},45159,(e,t,r)=>{t.exports=function(){return[]}},17332,(e,t,r)=>{var n=e.r(36100),i=e.r(45159),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.exports=o?function(e){return null==e?[]:n(o(e=Object(e)),function(t){return a.call(e,t)})}:i},74071,(e,t,r)=>{var n=e.r(72351),i=e.r(17332);t.exports=function(e,t){return n(e,i(e),t)}},69102,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},62413,(e,t,r)=>{t.exports=e.r(25717)(Object.getPrototypeOf,Object)},33648,(e,t,r)=>{var n=e.r(69102),i=e.r(62413),a=e.r(17332),o=e.r(45159);t.exports=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,a(e)),e=i(e);return t}:o},45001,(e,t,r)=>{var n=e.r(72351),i=e.r(33648);t.exports=function(e,t){return n(e,i(e),t)}},23403,(e,t,r)=>{var n=e.r(69102),i=e.r(45350);t.exports=function(e,t,r){var a=t(e);return i(e)?a:n(a,r(e))}},13370,(e,t,r)=>{var n=e.r(23403),i=e.r(17332),a=e.r(33679);t.exports=function(e){return n(e,a,i)}},7889,(e,t,r)=>{var n=e.r(23403),i=e.r(33648),a=e.r(89695);t.exports=function(e){return n(e,a,i)}},1419,(e,t,r)=>{t.exports=e.r(41920)(e.r(39088),"DataView")},17074,(e,t,r)=>{t.exports=e.r(41920)(e.r(39088),"Promise")},6966,(e,t,r)=>{t.exports=e.r(41920)(e.r(39088),"Set")},73895,(e,t,r)=>{t.exports=e.r(41920)(e.r(39088),"WeakMap")},67426,(e,t,r)=>{var n=e.r(1419),i=e.r(87362),a=e.r(17074),o=e.r(6966),s=e.r(73895),l=e.r(77684),u=e.r(76366),c="[object Map]",d="[object Promise]",h="[object Set]",f="[object WeakMap]",p="[object DataView]",v=u(n),g=u(i),y=u(a),b=u(o),x=u(s),w=l;(n&&w(new n(new ArrayBuffer(1)))!=p||i&&w(new i)!=c||a&&w(a.resolve())!=d||o&&w(new o)!=h||s&&w(new s)!=f)&&(w=function(e){var t=l(e),r="[object Object]"==t?e.constructor:void 0,n=r?u(r):"";if(n)switch(n){case v:return p;case g:return c;case y:return d;case b:return h;case x:return f}return t}),t.exports=w},53265,(e,t,r)=>{var n=Object.prototype.hasOwnProperty;t.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},63750,(e,t,r)=>{t.exports=e.r(39088).Uint8Array},25393,(e,t,r)=>{var n=e.r(63750);t.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},64146,(e,t,r)=>{var n=e.r(25393);t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},84046,(e,t,r)=>{var n=/\w*$/;t.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},98430,(e,t,r)=>{var n=e.r(30353),i=n?n.prototype:void 0,a=i?i.valueOf:void 0;t.exports=function(e){return a?Object(a.call(e)):{}}},14712,(e,t,r)=>{var n=e.r(25393);t.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},49769,(e,t,r)=>{var n=e.r(25393),i=e.r(64146),a=e.r(84046),o=e.r(98430),s=e.r(14712);t.exports=function(e,t,r){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return a(e);case"[object Symbol]":return o(e)}}},46352,(e,t,r)=>{var n=e.r(12447),i=Object.create;t.exports=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}()},92433,(e,t,r)=>{var n=e.r(46352),i=e.r(62413),a=e.r(63996);t.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:n(i(e))}},81198,(e,t,r)=>{var n=e.r(67426),i=e.r(77289);t.exports=function(e){return i(e)&&"[object Map]"==n(e)}},54284,(e,t,r)=>{var n=e.r(81198),i=e.r(33999),a=e.r(80156),o=a&&a.isMap;t.exports=o?i(o):n},36206,(e,t,r)=>{var n=e.r(67426),i=e.r(77289);t.exports=function(e){return i(e)&&"[object Set]"==n(e)}},40158,(e,t,r)=>{var n=e.r(36206),i=e.r(33999),a=e.r(80156),o=a&&a.isSet;t.exports=o?i(o):n},64324,(e,t,r)=>{var n=e.r(1551),i=e.r(12895),a=e.r(4300),o=e.r(60196),s=e.r(52624),l=e.r(22781),u=e.r(76736),c=e.r(74071),d=e.r(45001),h=e.r(13370),f=e.r(7889),p=e.r(67426),v=e.r(53265),g=e.r(49769),y=e.r(92433),b=e.r(45350),x=e.r(56956),w=e.r(54284),E=e.r(12447),k=e.r(40158),_=e.r(33679),C=e.r(89695),T="[object Arguments]",P="[object Function]",S="[object Object]",B={};B[T]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object DataView]"]=B["[object Boolean]"]=B["[object Date]"]=B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Map]"]=B["[object Number]"]=B[S]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object Symbol]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Error]"]=B[P]=B["[object WeakMap]"]=!1,t.exports=function e(t,r,D,A,M,R){var N,I=1&r,L=2&r,O=4&r;if(D&&(N=M?D(t,A,M,R):D(t)),void 0!==N)return N;if(!E(t))return t;var z=b(t);if(z){if(N=v(t),!I)return u(t,N)}else{var j=p(t),V=j==P||"[object GeneratorFunction]"==j;if(x(t))return l(t,I);if(j==S||j==T||V&&!M){if(N=L||V?{}:y(t),!I)return L?d(t,s(N,t)):c(t,o(N,t))}else{if(!B[j])return M?t:{};N=g(t,j,I)}}R||(R=new n);var F=R.get(t);if(F)return F;R.set(t,N),k(t)?t.forEach(function(n){N.add(e(n,r,D,n,t,R))}):w(t)&&t.forEach(function(n,i){N.set(i,e(n,r,D,i,t,R))});var X=O?L?f:h:L?C:_,q=z?void 0:X(t);return i(q||t,function(n,i){q&&(n=t[i=n]),a(N,i,e(n,r,D,i,t,R))}),N}},12989,(e,t,r)=>{var n=e.r(64324);t.exports=function(e){return n(e,4)}},56751,(e,t,r)=>{t.exports=function(e){return function(){return e}}},36755,(e,t,r)=>{t.exports=function(e){return function(t,r,n){for(var i=-1,a=Object(t),o=n(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===r(a[l],l,a))break}return t}}},98728,(e,t,r)=>{t.exports=e.r(36755)()},63799,(e,t,r)=>{var n=e.r(98728),i=e.r(33679);t.exports=function(e,t){return e&&n(e,t,i)}},73554,(e,t,r)=>{var n=e.r(51095);t.exports=function(e,t){return function(r,i){if(null==r)return r;if(!n(r))return e(r,i);for(var a=r.length,o=t?a:-1,s=Object(r);(t?o--:++o<a)&&!1!==i(s[o],o,s););return r}}},53587,(e,t,r)=>{var n=e.r(63799);t.exports=e.r(73554)(n)},53336,(e,t,r)=>{t.exports=function(e){return e}},73282,(e,t,r)=>{var n=e.r(53336);t.exports=function(e){return"function"==typeof e?e:n}},93448,(e,t,r)=>{var n=e.r(12895),i=e.r(53587),a=e.r(73282),o=e.r(45350);t.exports=function(e,t){return(o(e)?n:i)(e,a(t))}},71846,(e,t,r)=>{t.exports=e.r(93448)},36179,(e,t,r)=>{var n=e.r(53587);t.exports=function(e,t){var r=[];return n(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}},21274,(e,t,r)=>{t.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},39805,(e,t,r)=>{t.exports=function(e){return this.__data__.has(e)}},27493,(e,t,r)=>{var n=e.r(87547),i=e.r(21274),a=e.r(39805);function o(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new n;++t<r;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,t.exports=o},51477,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}},15262,(e,t,r)=>{t.exports=function(e,t){return e.has(t)}},6856,(e,t,r)=>{var n=e.r(27493),i=e.r(51477),a=e.r(15262);t.exports=function(e,t,r,o,s,l){var u=1&r,c=e.length,d=t.length;if(c!=d&&!(u&&d>c))return!1;var h=l.get(e),f=l.get(t);if(h&&f)return h==t&&f==e;var p=-1,v=!0,g=2&r?new n:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var y=e[p],b=t[p];if(o)var x=u?o(b,y,p,t,e,l):o(y,b,p,e,t,l);if(void 0!==x){if(x)continue;v=!1;break}if(g){if(!i(t,function(e,t){if(!a(g,t)&&(y===e||s(y,e,r,o,l)))return g.push(t)})){v=!1;break}}else if(!(y===b||s(y,b,r,o,l))){v=!1;break}}return l.delete(e),l.delete(t),v}},75331,(e,t,r)=>{t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r}},99850,(e,t,r)=>{t.exports=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r}},78012,(e,t,r)=>{var n=e.r(30353),i=e.r(63750),a=e.r(25172),o=e.r(6856),s=e.r(75331),l=e.r(99850),u=n?n.prototype:void 0,c=u?u.valueOf:void 0;t.exports=function(e,t,r,n,u,d,h){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!d(new i(e),new i(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&n;if(f||(f=l),e.size!=t.size&&!p)break;var v=h.get(e);if(v)return v==t;n|=2,h.set(e,t);var g=o(f(e),f(t),n,u,d,h);return h.delete(e),g;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},30698,(e,t,r)=>{var n=e.r(13370),i=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,a,o,s){var l=1&r,u=n(e),c=u.length;if(c!=n(t).length&&!l)return!1;for(var d=c;d--;){var h=u[d];if(!(l?h in t:i.call(t,h)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var g=l;++d<c;){var y=e[h=u[d]],b=t[h];if(a)var x=l?a(b,y,h,t,e,s):a(y,b,h,e,t,s);if(!(void 0===x?y===b||o(y,b,r,a,s):x)){v=!1;break}g||(g="constructor"==h)}if(v&&!g){var w=e.constructor,E=t.constructor;w!=E&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof E&&E instanceof E)&&(v=!1)}return s.delete(e),s.delete(t),v}},78353,(e,t,r)=>{var n=e.r(1551),i=e.r(6856),a=e.r(78012),o=e.r(30698),s=e.r(67426),l=e.r(45350),u=e.r(56956),c=e.r(3023),d="[object Arguments]",h="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;t.exports=function(e,t,r,v,g,y){var b=l(e),x=l(t),w=b?h:s(e),E=x?h:s(t);w=w==d?f:w,E=E==d?f:E;var k=w==f,_=E==f,C=w==E;if(C&&u(e)){if(!u(t))return!1;b=!0,k=!1}if(C&&!k)return y||(y=new n),b||c(e)?i(e,t,r,v,g,y):a(e,t,w,r,v,g,y);if(!(1&r)){var T=k&&p.call(e,"__wrapped__"),P=_&&p.call(t,"__wrapped__");if(T||P){var S=T?e.value():e,B=P?t.value():t;return y||(y=new n),g(S,B,r,v,y)}}return!!C&&(y||(y=new n),o(e,t,r,v,g,y))}},21885,(e,t,r)=>{var n=e.r(78353),i=e.r(77289);t.exports=function e(t,r,a,o,s){return t===r||(null!=t&&null!=r&&(i(t)||i(r))?n(t,r,a,o,e,s):t!=t&&r!=r)}},48299,(e,t,r)=>{var n=e.r(1551),i=e.r(21885);t.exports=function(e,t,r,a){var o=r.length,s=o,l=!a;if(null==e)return!s;for(e=Object(e);o--;){var u=r[o];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var c=(u=r[o])[0],d=e[c],h=u[1];if(l&&u[2]){if(void 0===d&&!(c in e))return!1}else{var f=new n;if(a)var p=a(d,h,c,e,t,f);if(!(void 0===p?i(h,d,3,a,f):p))return!1}}return!0}},15782,(e,t,r)=>{var n=e.r(12447);t.exports=function(e){return e==e&&!n(e)}},41903,(e,t,r)=>{var n=e.r(15782),i=e.r(33679);t.exports=function(e){for(var t=i(e),r=t.length;r--;){var a=t[r],o=e[a];t[r]=[a,o,n(o)]}return t}},65570,(e,t,r)=>{t.exports=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}},23426,(e,t,r)=>{var n=e.r(48299),i=e.r(41903),a=e.r(65570);t.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(r){return r===e||n(r,e,t)}}},61884,(e,t,r)=>{var n=e.r(77684),i=e.r(77289);t.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==n(e)}},9903,(e,t,r)=>{var n=e.r(45350),i=e.r(61884),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;t.exports=function(e,t){if(n(e))return!1;var r=typeof e;return!!("number"==r||"symbol"==r||"boolean"==r||null==e||i(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}},57588,(e,t,r)=>{var n=e.r(87547);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],a=r.cache;if(a.has(i))return a.get(i);var o=e.apply(this,n);return r.cache=a.set(i,o)||a,o};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},88832,(e,t,r)=>{var n=e.r(57588);t.exports=function(e){var t=n(e,function(e){return 500===r.size&&r.clear(),e}),r=t.cache;return t}},2677,(e,t,r)=>{var n=e.r(88832),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g;t.exports=n(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,function(e,r,n,i){t.push(n?i.replace(a,"$1"):r||e)}),t})},92708,(e,t,r)=>{t.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}},72537,(e,t,r)=>{var n=e.r(30353),i=e.r(92708),a=e.r(45350),o=e.r(61884),s=1/0,l=n?n.prototype:void 0,u=l?l.toString:void 0;t.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return u?u.call(t):"";var r=t+"";return"0"==r&&1/t==-s?"-0":r}},2922,(e,t,r)=>{var n=e.r(72537);t.exports=function(e){return null==e?"":n(e)}},86287,(e,t,r)=>{var n=e.r(45350),i=e.r(9903),a=e.r(2677),o=e.r(2922);t.exports=function(e,t){return n(e)?e:i(e,t)?[e]:a(o(e))}},2054,(e,t,r)=>{var n=e.r(61884),i=1/0;t.exports=function(e){if("string"==typeof e||n(e))return e;var t=e+"";return"0"==t&&1/e==-i?"-0":t}},33141,(e,t,r)=>{var n=e.r(86287),i=e.r(2054);t.exports=function(e,t){t=n(t,e);for(var r=0,a=t.length;null!=e&&r<a;)e=e[i(t[r++])];return r&&r==a?e:void 0}},82820,(e,t,r)=>{var n=e.r(33141);t.exports=function(e,t,r){var i=null==e?void 0:n(e,t);return void 0===i?r:i}},40688,(e,t,r)=>{t.exports=function(e,t){return null!=e&&t in Object(e)}},15359,(e,t,r)=>{var n=e.r(86287),i=e.r(73250),a=e.r(45350),o=e.r(66397),s=e.r(98376),l=e.r(2054);t.exports=function(e,t,r){t=n(t,e);for(var u=-1,c=t.length,d=!1;++u<c;){var h=l(t[u]);if(!(d=null!=e&&r(e,h)))break;e=e[h]}return d||++u!=c?d:!!(c=null==e?0:e.length)&&s(c)&&o(h,c)&&(a(e)||i(e))}},76590,(e,t,r)=>{var n=e.r(40688),i=e.r(15359);t.exports=function(e,t){return null!=e&&i(e,t,n)}},72298,(e,t,r)=>{var n=e.r(21885),i=e.r(82820),a=e.r(76590),o=e.r(9903),s=e.r(15782),l=e.r(65570),u=e.r(2054);t.exports=function(e,t){return o(e)&&s(t)?l(u(e),t):function(r){var o=i(r,e);return void 0===o&&o===t?a(r,e):n(t,o,3)}}},1079,(e,t,r)=>{t.exports=function(e){return function(t){return null==t?void 0:t[e]}}},30970,(e,t,r)=>{var n=e.r(33141);t.exports=function(e){return function(t){return n(t,e)}}},33906,(e,t,r)=>{var n=e.r(1079),i=e.r(30970),a=e.r(9903),o=e.r(2054);t.exports=function(e){return a(e)?n(o(e)):i(e)}},66305,(e,t,r)=>{var n=e.r(23426),i=e.r(72298),a=e.r(53336),o=e.r(45350),s=e.r(33906);t.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):n(e):s(e)}},84892,(e,t,r)=>{var n=e.r(36100),i=e.r(36179),a=e.r(66305),o=e.r(45350);t.exports=function(e,t){return(o(e)?n:i)(e,a(t,3))}},36760,(e,t,r)=>{var n=Object.prototype.hasOwnProperty;t.exports=function(e,t){return null!=e&&n.call(e,t)}},44708,(e,t,r)=>{var n=e.r(36760),i=e.r(15359);t.exports=function(e,t){return null!=e&&i(e,t,n)}},46217,(e,t,r)=>{var n=e.r(48477),i=e.r(67426),a=e.r(73250),o=e.r(45350),s=e.r(51095),l=e.r(56956),u=e.r(63996),c=e.r(3023),d=Object.prototype.hasOwnProperty;t.exports=function(e){if(null==e)return!0;if(s(e)&&(o(e)||"string"==typeof e||"function"==typeof e.splice||l(e)||c(e)||a(e)))return!e.length;var t=i(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!n(e).length;for(var r in e)if(d.call(e,r))return!1;return!0}},79393,(e,t,r)=>{t.exports=function(e){return void 0===e}},7073,(e,t,r)=>{var n=e.r(53587),i=e.r(51095);t.exports=function(e,t){var r=-1,a=i(e)?Array(e.length):[];return n(e,function(e,n,i){a[++r]=t(e,n,i)}),a}},10632,(e,t,r)=>{var n=e.r(92708),i=e.r(66305),a=e.r(7073),o=e.r(45350);t.exports=function(e,t){return(o(e)?n:a)(e,i(t,3))}},92427,(e,t,r)=>{t.exports=function(e,t,r,n){var i=-1,a=null==e?0:e.length;for(n&&a&&(r=e[++i]);++i<a;)r=t(r,e[i],i,e);return r}},78577,(e,t,r)=>{t.exports=function(e,t,r,n,i){return i(e,function(e,i,a){r=n?(n=!1,e):t(r,e,i,a)}),r}},58253,(e,t,r)=>{var n=e.r(92427),i=e.r(53587),a=e.r(66305),o=e.r(78577),s=e.r(45350);t.exports=function(e,t,r){var l=s(e)?n:o,u=arguments.length<3;return l(e,a(t,4),r,u,i)}},85845,(e,t,r)=>{var n=e.r(77684),i=e.r(45350),a=e.r(77289);t.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==n(e)}},13450,(e,t,r)=>{t.exports=e.r(1079)("length")},79589,(e,t,r)=>{var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(e){return n.test(e)}},7129,(e,t,r)=>{var n="\\ud800-\\udfff",i="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",a="\\ud83c[\\udffb-\\udfff]",o="[^"+n+"]",s="(?:\\ud83c[\\udde6-\\uddff]){2}",l="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+i+"|"+a+")?",c="[\\ufe0e\\ufe0f]?",d="(?:\\u200d(?:"+[o,s,l].join("|")+")"+c+u+")*",h=RegExp(a+"(?="+a+")|"+("(?:"+[o+i+"?",i,s,l,"["+n+"]"].join("|"))+")"+(c+u+d),"g");t.exports=function(e){for(var t=h.lastIndex=0;h.test(e);)++t;return t}},22994,(e,t,r)=>{var n=e.r(13450),i=e.r(79589),a=e.r(7129);t.exports=function(e){return i(e)?a(e):n(e)}},35405,(e,t,r)=>{var n=e.r(48477),i=e.r(67426),a=e.r(51095),o=e.r(85845),s=e.r(22994);t.exports=function(e){if(null==e)return 0;if(a(e))return o(e)?s(e):e.length;var t=i(e);return"[object Map]"==t||"[object Set]"==t?e.size:n(e).length}},79335,(e,t,r)=>{var n=e.r(12895),i=e.r(46352),a=e.r(63799),o=e.r(66305),s=e.r(62413),l=e.r(45350),u=e.r(56956),c=e.r(71223),d=e.r(12447),h=e.r(3023);t.exports=function(e,t,r){var f=l(e),p=f||u(e)||h(e);if(t=o(t,4),null==r){var v=e&&e.constructor;r=p?f?new v:[]:d(e)&&c(v)?i(s(e)):{}}return(p?n:a)(e,function(e,n,i){return t(r,e,n,i)}),r}},33803,(e,t,r)=>{var n=e.r(30353),i=e.r(73250),a=e.r(45350),o=n?n.isConcatSpreadable:void 0;t.exports=function(e){return a(e)||i(e)||!!(o&&e&&e[o])}},41891,(e,t,r)=>{var n=e.r(69102),i=e.r(33803);t.exports=function e(t,r,a,o,s){var l=-1,u=t.length;for(a||(a=i),s||(s=[]);++l<u;){var c=t[l];r>0&&a(c)?r>1?e(c,r-1,a,o,s):n(s,c):o||(s[s.length]=c)}return s}},87160,(e,t,r)=>{t.exports=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}},72953,(e,t,r)=>{var n=e.r(87160),i=Math.max;t.exports=function(e,t,r){return t=i(void 0===t?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=i(a.length-t,0),l=Array(s);++o<s;)l[o]=a[t+o];o=-1;for(var u=Array(t+1);++o<t;)u[o]=a[o];return u[t]=r(l),n(e,this,u)}}},1647,(e,t,r)=>{var n=e.r(56751),i=e.r(24251),a=e.r(53336);t.exports=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:a},51994,(e,t,r)=>{var n=Date.now;t.exports=function(e){var t=0,r=0;return function(){var i=n(),a=16-(i-r);if(r=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},84665,(e,t,r)=>{var n=e.r(1647);t.exports=e.r(51994)(n)},95059,(e,t,r)=>{var n=e.r(53336),i=e.r(72953),a=e.r(84665);t.exports=function(e,t){return a(i(e,t,n),e+"")}},56445,(e,t,r)=>{t.exports=function(e,t,r,n){for(var i=e.length,a=r+(n?1:-1);n?a--:++a<i;)if(t(e[a],a,e))return a;return -1}},4078,(e,t,r)=>{t.exports=function(e){return e!=e}},1987,(e,t,r)=>{t.exports=function(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return -1}},49719,(e,t,r)=>{var n=e.r(56445),i=e.r(4078),a=e.r(1987);t.exports=function(e,t,r){return t==t?a(e,t,r):n(e,i,r)}},46515,(e,t,r)=>{var n=e.r(49719);t.exports=function(e,t){return!!(null==e?0:e.length)&&n(e,t,0)>-1}},29584,(e,t,r)=>{t.exports=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}},91692,(e,t,r)=>{t.exports=function(){}},8484,(e,t,r)=>{var n=e.r(6966),i=e.r(91692),a=e.r(99850);t.exports=n&&1/a(new n([,-0]))[1]==1/0?function(e){return new n(e)}:i},10339,(e,t,r)=>{var n=e.r(27493),i=e.r(46515),a=e.r(29584),o=e.r(15262),s=e.r(8484),l=e.r(99850);t.exports=function(e,t,r){var u=-1,c=i,d=e.length,h=!0,f=[],p=f;if(r)h=!1,c=a;else if(d>=200){var v=t?null:s(e);if(v)return l(v);h=!1,c=o,p=new n}else p=t?[]:f;e:for(;++u<d;){var g=e[u],y=t?t(g):g;if(g=r||0!==g?g:0,h&&y==y){for(var b=p.length;b--;)if(p[b]===y)continue e;t&&p.push(y),f.push(g)}else c(p,y,r)||(p!==f&&p.push(y),f.push(g))}return f}},91072,(e,t,r)=>{var n=e.r(51095),i=e.r(77289);t.exports=function(e){return i(e)&&n(e)}},4366,(e,t,r)=>{var n=e.r(41891),i=e.r(95059),a=e.r(10339),o=e.r(91072);t.exports=i(function(e){return a(n(e,1,o,!0))})},18110,(e,t,r)=>{var n=e.r(92708);t.exports=function(e,t){return n(t,function(t){return e[t]})}},80985,(e,t,r)=>{var n=e.r(18110),i=e.r(33679);t.exports=function(e){return null==e?[]:n(e,i(e))}},79749,(e,t,r)=>{var n;try{n={clone:e.r(12989),constant:e.r(56751),each:e.r(71846),filter:e.r(84892),has:e.r(44708),isArray:e.r(45350),isEmpty:e.r(46217),isFunction:e.r(71223),isUndefined:e.r(79393),keys:e.r(33679),map:e.r(10632),reduce:e.r(58253),size:e.r(35405),transform:e.r(79335),union:e.r(4366),values:e.r(80985)}}catch(e){}n||(n=window._),t.exports=n},64930,(e,t,r)=>{"use strict";var n=e.r(79749);function i(e){this._isDirected=!n.has(e,"directed")||e.directed,this._isMultigraph=!!n.has(e,"multigraph")&&e.multigraph,this._isCompound=!!n.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=n.constant(void 0),this._defaultEdgeLabelFn=n.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function o(e,t){--e[t]||delete e[t]}function s(e,t,r,i){var a=""+t,o=""+r;if(!e&&a>o){var s=a;a=o,o=s}return a+"\x01"+o+"\x01"+(n.isUndefined(i)?"\0":i)}function l(e,t){return s(e,t.v,t.w,t.name)}t.exports=i,i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(e){return this._label=e,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultNodeLabelFn=e,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return n.keys(this._nodes)},i.prototype.sources=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._in[t])})},i.prototype.sinks=function(){var e=this;return n.filter(this.nodes(),function(t){return n.isEmpty(e._out[t])})},i.prototype.setNodes=function(e,t){var r=arguments,i=this;return n.each(e,function(e){r.length>1?i.setNode(e,t):i.setNode(e)}),this},i.prototype.setNode=function(e,t){return n.has(this._nodes,e)?arguments.length>1&&(this._nodes[e]=t):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount),this},i.prototype.node=function(e){return this._nodes[e]},i.prototype.hasNode=function(e){return n.has(this._nodes,e)},i.prototype.removeNode=function(e){var t=this;if(n.has(this._nodes,e)){var r=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],n.each(this.children(e),function(e){t.setParent(e)}),delete this._children[e]),n.each(n.keys(this._in[e]),r),delete this._in[e],delete this._preds[e],n.each(n.keys(this._out[e]),r),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},i.prototype.setParent=function(e,t){if(!this._isCompound)throw Error("Cannot set parent in a non-compound graph");if(n.isUndefined(t))t="\0";else{t+="";for(var r=t;!n.isUndefined(r);r=this.parent(r))if(r===e)throw Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},i.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},i.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},i.prototype.children=function(e){if(n.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return n.keys(t)}else if("\0"===e)return this.nodes();else if(this.hasNode(e))return[]},i.prototype.predecessors=function(e){var t=this._preds[e];if(t)return n.keys(t)},i.prototype.successors=function(e){var t=this._sucs[e];if(t)return n.keys(t)},i.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return n.union(t,this.successors(e))},i.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},i.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var r=this;n.each(this._nodes,function(r,n){e(n)&&t.setNode(n,r)}),n.each(this._edgeObjs,function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,r.edge(e))});var i={};return this._isCompound&&n.each(t.nodes(),function(e){t.setParent(e,function e(n){var a=r.parent(n);return void 0===a||t.hasNode(a)?(i[n]=a,a):a in i?i[a]:e(a)}(e))}),t},i.prototype.setDefaultEdgeLabel=function(e){return n.isFunction(e)||(e=n.constant(e)),this._defaultEdgeLabelFn=e,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return n.values(this._edgeObjs)},i.prototype.setPath=function(e,t){var r=this,i=arguments;return n.reduce(e,function(e,n){return i.length>1?r.setEdge(e,n,t):r.setEdge(e,n),n}),this},i.prototype.setEdge=function(){var e,t,r,i,o=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,r=l.name,2==arguments.length&&(i=arguments[1],o=!0)):(e=l,t=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],o=!0)),e=""+e,t=""+t,n.isUndefined(r)||(r=""+r);var u=s(this._isDirected,e,t,r);if(n.has(this._edgeLabels,u))return o&&(this._edgeLabels[u]=i),this;if(!n.isUndefined(r)&&!this._isMultigraph)throw Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[u]=o?i:this._defaultEdgeLabelFn(e,t,r);var c=function(e,t,r,n){var i=""+t,a=""+r;if(!e&&i>a){var o=i;i=a,a=o}var s={v:i,w:a};return n&&(s.name=n),s}(this._isDirected,e,t,r);return e=c.v,t=c.w,Object.freeze(c),this._edgeObjs[u]=c,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][u]=c,this._out[e][u]=c,this._edgeCount++,this},i.prototype.edge=function(e,t,r){var n=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,r);return this._edgeLabels[n]},i.prototype.hasEdge=function(e,t,r){var i=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,r);return n.has(this._edgeLabels,i)},i.prototype.removeEdge=function(e,t,r){var n=1==arguments.length?l(this._isDirected,arguments[0]):s(this._isDirected,e,t,r),i=this._edgeObjs[n];return i&&(e=i.v,t=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],o(this._preds[t],e),o(this._sucs[e],t),delete this._in[t][n],delete this._out[e][n],this._edgeCount--),this},i.prototype.inEdges=function(e,t){var r=this._in[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.v===t}):i}},i.prototype.outEdges=function(e,t){var r=this._out[e];if(r){var i=n.values(r);return t?n.filter(i,function(e){return e.w===t}):i}},i.prototype.nodeEdges=function(e,t){var r=this.inEdges(e,t);if(r)return r.concat(this.outEdges(e,t))}},36347,(e,t,r)=>{t.exports="2.1.8"},45376,(e,t,r)=>{t.exports={Graph:e.r(64930),version:e.r(36347)}},52829,(e,t,r)=>{var n=e.r(79749),i=e.r(64930);t.exports={write:function(e){var t,r,i={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:(t=e,n.map(t.nodes(),function(e){var r=t.node(e),i=t.parent(e),a={v:e};return n.isUndefined(r)||(a.value=r),n.isUndefined(i)||(a.parent=i),a})),edges:(r=e,n.map(r.edges(),function(e){var t=r.edge(e),i={v:e.v,w:e.w};return n.isUndefined(e.name)||(i.name=e.name),n.isUndefined(t)||(i.value=t),i}))};return n.isUndefined(e.graph())||(i.value=n.clone(e.graph())),i},read:function(e){var t=new i(e.options).setGraph(e.value);return n.each(e.nodes,function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)}),n.each(e.edges,function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)}),t}}},92100,(e,t,r)=>{var n=e.r(79749);t.exports=function(e){var t,r={},i=[];return n.each(e.nodes(),function(a){t=[],function i(a){n.has(r,a)||(r[a]=!0,t.push(a),n.each(e.successors(a),i),n.each(e.predecessors(a),i))}(a),t.length&&i.push(t)}),i}},92402,(e,t,r)=>{var n=e.r(79749);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map(function(e){return e.key})},i.prototype.has=function(e){return n.has(this._keyIndices,e)},i.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},i.prototype.min=function(){if(0===this.size())throw Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(e,t){var r=this._keyIndices;if(e=String(e),!n.has(r,e)){var i=this._arr,a=i.length;return r[e]=a,i.push({key:e,priority:t}),this._decrease(a),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},i.prototype.decrease=function(e,t){var r=this._keyIndices[e];if(t>this._arr[r].priority)throw Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[r].priority+" New: "+t);this._arr[r].priority=t,this._decrease(r)},i.prototype._heapify=function(e){var t=this._arr,r=2*e,n=r+1,i=e;r<t.length&&(i=t[r].priority<t[i].priority?r:i,n<t.length&&(i=t[n].priority<t[i].priority?n:i),i!==e&&(this._swap(e,i),this._heapify(i)))},i.prototype._decrease=function(e){for(var t,r=this._arr,n=r[e].priority;0!==e&&!(r[t=e>>1].priority<n);)this._swap(e,t),e=t},i.prototype._swap=function(e,t){var r=this._arr,n=this._keyIndices,i=r[e],a=r[t];r[e]=a,r[t]=i,n[a.key]=e,n[i.key]=t}},74584,(e,t,r)=>{var n=e.r(79749),i=e.r(92402);t.exports=function(e,t,r,n){return function(e,t,r,n){var a,o,s={},l=new i,u=function(e){var t=e.v!==a?e.v:e.w,n=s[t],i=r(e),u=o.distance+i;if(i<0)throw Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+i);u<n.distance&&(n.distance=u,n.predecessor=a,l.decrease(t,u))};for(e.nodes().forEach(function(e){var r=e===t?0:1/0;s[e]={distance:r},l.add(e,r)});l.size()>0&&(o=s[a=l.removeMin()]).distance!==1/0;)n(a).forEach(u);return s}(e,String(t),r||a,n||function(t){return e.outEdges(t)})};var a=n.constant(1)},63255,(e,t,r)=>{var n=e.r(74584),i=e.r(79749);t.exports=function(e,t,r){return i.transform(e.nodes(),function(i,a){i[a]=n(e,a,t,r)},{})}},36194,(e,t,r)=>{var n=e.r(79749);t.exports=function(e){var t=0,r=[],i={},a=[];return e.nodes().forEach(function(o){n.has(i,o)||function o(s){var l=i[s]={onStack:!0,lowlink:t,index:t++};if(r.push(s),e.successors(s).forEach(function(e){n.has(i,e)?i[e].onStack&&(l.lowlink=Math.min(l.lowlink,i[e].index)):(o(e),l.lowlink=Math.min(l.lowlink,i[e].lowlink))}),l.lowlink===l.index){var u,c=[];do i[u=r.pop()].onStack=!1,c.push(u);while(s!==u)a.push(c)}}(o)}),a}},72175,(e,t,r)=>{var n=e.r(79749),i=e.r(36194);t.exports=function(e){return n.filter(i(e),function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])})}},78229,(e,t,r)=>{var n=e.r(79749);t.exports=function(e,t,r){var n,a,o,s,l;return n=e,a=t||i,o=r||function(t){return e.outEdges(t)},s={},(l=n.nodes()).forEach(function(e){s[e]={},s[e][e]={distance:0},l.forEach(function(t){e!==t&&(s[e][t]={distance:1/0})}),o(e).forEach(function(t){var r=t.v===e?t.w:t.v,n=a(t);s[e][r]={distance:n,predecessor:e}})}),l.forEach(function(e){var t=s[e];l.forEach(function(r){var n=s[r];l.forEach(function(r){var i=n[e],a=t[r],o=n[r],s=i.distance+a.distance;s<o.distance&&(o.distance=s,o.predecessor=a.predecessor)})})}),s};var i=n.constant(1)},8240,(e,t,r)=>{var n=e.r(79749);function i(e){var t={},r={},i=[];if(n.each(e.sinks(),function o(s){if(n.has(r,s))throw new a;n.has(t,s)||(r[s]=!0,t[s]=!0,n.each(e.predecessors(s),o),delete r[s],i.push(s))}),n.size(t)!==e.nodeCount())throw new a;return i}function a(){}t.exports=i,i.CycleException=a,a.prototype=Error()},68780,(e,t,r)=>{var n=e.r(8240);t.exports=function(e){try{n(e)}catch(e){if(e instanceof n.CycleException)return!1;throw e}return!0}},92512,(e,t,r)=>{var n=e.r(79749);t.exports=function(e,t,r){n.isArray(t)||(t=[t]);var i=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],o={};return n.each(t,function(t){if(!e.hasNode(t))throw Error("Graph does not have node: "+t);!function e(t,r,i,a,o,s){!n.has(a,r)&&(a[r]=!0,i||s.push(r),n.each(o(r),function(r){e(t,r,i,a,o,s)}),i&&s.push(r))}(e,t,"post"===r,o,i,a)}),a}},20233,(e,t,r)=>{var n=e.r(92512);t.exports=function(e,t){return n(e,t,"post")}},21802,(e,t,r)=>{var n=e.r(92512);t.exports=function(e,t){return n(e,t,"pre")}},67875,(e,t,r)=>{var n=e.r(79749),i=e.r(64930),a=e.r(92402);t.exports=function(e,t){var r,o=new i,s={},l=new a;function u(e){var n=e.v===r?e.w:e.v,i=l.priority(n);if(void 0!==i){var a=t(e);a<i&&(s[n]=r,l.decrease(n,a))}}if(0===e.nodeCount())return o;n.each(e.nodes(),function(e){l.add(e,1/0),o.setNode(e)}),l.decrease(e.nodes()[0],0);for(var c=!1;l.size()>0;){if(r=l.removeMin(),n.has(s,r))o.setEdge(r,s[r]);else if(c)throw Error("Input graph is not connected: "+e);else c=!0;e.nodeEdges(r).forEach(u)}return o}},64182,(e,t,r)=>{t.exports={components:e.r(92100),dijkstra:e.r(74584),dijkstraAll:e.r(63255),findCycles:e.r(72175),floydWarshall:e.r(78229),isAcyclic:e.r(68780),postorder:e.r(20233),preorder:e.r(21802),prim:e.r(67875),tarjan:e.r(36194),topsort:e.r(8240)}},62319,(e,t,r)=>{var n=e.r(45376);t.exports={Graph:n.Graph,json:e.r(52829),alg:e.r(64182),version:n.version}},40576,(e,t,r)=>{var n;try{n=e.r(62319)}catch(e){}n||(n=window.graphlib),t.exports=n},71944,(e,t,r)=>{var n=e.r(64324);t.exports=function(e){return n(e,5)}},70237,(e,t,r)=>{var n=e.r(25172),i=e.r(51095),a=e.r(66397),o=e.r(12447);t.exports=function(e,t,r){if(!o(r))return!1;var s=typeof t;return("number"==s?!!(i(r)&&a(t,r.length)):"string"==s&&t in r)&&n(r[t],e)}},10806,(e,t,r)=>{var n=e.r(95059),i=e.r(25172),a=e.r(70237),o=e.r(89695),s=Object.prototype,l=s.hasOwnProperty;t.exports=n(function(e,t){e=Object(e);var r=-1,n=t.length,u=n>2?t[2]:void 0;for(u&&a(t[0],t[1],u)&&(n=1);++r<n;)for(var c=t[r],d=o(c),h=-1,f=d.length;++h<f;){var p=d[h],v=e[p];(void 0===v||i(v,s[p])&&!l.call(e,p))&&(e[p]=c[p])}return e})},95200,(e,t,r)=>{var n=e.r(66305),i=e.r(51095),a=e.r(33679);t.exports=function(e){return function(t,r,o){var s=Object(t);if(!i(t)){var l=n(r,3);t=a(t),r=function(e){return l(s[e],e,s)}}var u=e(t,r,o);return u>-1?s[l?t[u]:u]:void 0}}},48891,(e,t,r)=>{var n=/\s/;t.exports=function(e){for(var t=e.length;t--&&n.test(e.charAt(t)););return t}},30364,(e,t,r)=>{var n=e.r(48891),i=/^\s+/;t.exports=function(e){return e?e.slice(0,n(e)+1).replace(i,""):e}},73759,(e,t,r)=>{var n=e.r(30364),i=e.r(12447),a=e.r(61884),o=0/0,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(e){if("number"==typeof e)return e;if(a(e))return o;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=n(e);var r=l.test(e);return r||u.test(e)?c(e.slice(2),r?2:8):s.test(e)?o:+e}},82560,(e,t,r)=>{var n=e.r(73759),i=1/0;t.exports=function(e){return e?(e=n(e))===i||e===-i?(e<0?-1:1)*17976931348623157e292:e==e?e:0:0===e?e:0}},4653,(e,t,r)=>{var n=e.r(82560);t.exports=function(e){var t=n(e),r=t%1;return t==t?r?t-r:t:0}},26965,(e,t,r)=>{var n=e.r(56445),i=e.r(66305),a=e.r(4653),o=Math.max;t.exports=function(e,t,r){var s=null==e?0:e.length;if(!s)return -1;var l=null==r?0:a(r);return l<0&&(l=o(s+l,0)),n(e,i(t,3),l)}},60191,(e,t,r)=>{t.exports=e.r(95200)(e.r(26965))},72810,(e,t,r)=>{var n=e.r(41891);t.exports=function(e){return(null==e?0:e.length)?n(e,1):[]}},14200,(e,t,r)=>{var n=e.r(98728),i=e.r(73282),a=e.r(89695);t.exports=function(e,t){return null==e?e:n(e,i(t),a)}},4879,(e,t,r)=>{t.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},60793,(e,t,r)=>{var n=e.r(74548),i=e.r(63799),a=e.r(66305);t.exports=function(e,t){var r={};return t=a(t,3),i(e,function(e,i,a){n(r,i,t(e,i,a))}),r}},41015,(e,t,r)=>{var n=e.r(61884);t.exports=function(e,t,r){for(var i=-1,a=e.length;++i<a;){var o=e[i],s=t(o);if(null!=s&&(void 0===l?s==s&&!n(s):r(s,l)))var l=s,u=o}return u}},80957,(e,t,r)=>{t.exports=function(e,t){return e>t}},86966,(e,t,r)=>{var n=e.r(41015),i=e.r(80957),a=e.r(53336);t.exports=function(e){return e&&e.length?n(e,a,i):void 0}},58352,(e,t,r)=>{var n=e.r(74548),i=e.r(25172);t.exports=function(e,t,r){(void 0===r||i(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},1320,(e,t,r)=>{var n=e.r(77684),i=e.r(62413),a=e.r(77289),o=Object.prototype,s=Function.prototype.toString,l=o.hasOwnProperty,u=s.call(Object);t.exports=function(e){if(!a(e)||"[object Object]"!=n(e))return!1;var t=i(e);if(null===t)return!0;var r=l.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&s.call(r)==u}},84305,(e,t,r)=>{t.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},37153,(e,t,r)=>{var n=e.r(72351),i=e.r(89695);t.exports=function(e){return n(e,i(e))}},27579,(e,t,r)=>{var n=e.r(58352),i=e.r(22781),a=e.r(14712),o=e.r(76736),s=e.r(92433),l=e.r(73250),u=e.r(45350),c=e.r(91072),d=e.r(56956),h=e.r(71223),f=e.r(12447),p=e.r(1320),v=e.r(3023),g=e.r(84305),y=e.r(37153);t.exports=function(e,t,r,b,x,w,E){var k=g(e,r),_=g(t,r),C=E.get(_);if(C)return void n(e,r,C);var T=w?w(k,_,r+"",e,t,E):void 0,P=void 0===T;if(P){var S=u(_),B=!S&&d(_),D=!S&&!B&&v(_);T=_,S||B||D?u(k)?T=k:c(k)?T=o(k):B?(P=!1,T=i(_,!0)):D?(P=!1,T=a(_,!0)):T=[]:p(_)||l(_)?(T=k,l(k)?T=y(k):(!f(k)||h(k))&&(T=s(_))):P=!1}P&&(E.set(_,T),x(T,_,b,w,E),E.delete(_)),n(e,r,T)}},5702,(e,t,r)=>{var n=e.r(1551),i=e.r(58352),a=e.r(98728),o=e.r(27579),s=e.r(12447),l=e.r(89695),u=e.r(84305);t.exports=function e(t,r,c,d,h){t!==r&&a(r,function(a,l){if(h||(h=new n),s(a))o(t,r,l,c,e,d,h);else{var f=d?d(u(t,l),a,l+"",t,r,h):void 0;void 0===f&&(f=a),i(t,l,f)}},l)}},83495,(e,t,r)=>{var n=e.r(95059),i=e.r(70237);t.exports=function(e){return n(function(t,r){var n=-1,a=r.length,o=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(o=e.length>3&&"function"==typeof o?(a--,o):void 0,s&&i(r[0],r[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++n<a;){var l=r[n];l&&e(t,l,n,o)}return t})}},11595,(e,t,r)=>{var n=e.r(5702);t.exports=e.r(83495)(function(e,t,r){n(e,t,r)})},98128,(e,t,r)=>{t.exports=function(e,t){return e<t}},37544,(e,t,r)=>{var n=e.r(41015),i=e.r(98128),a=e.r(53336);t.exports=function(e){return e&&e.length?n(e,a,i):void 0}},49673,(e,t,r)=>{var n=e.r(41015),i=e.r(66305),a=e.r(98128);t.exports=function(e,t){return e&&e.length?n(e,i(t,2),a):void 0}},31926,(e,t,r)=>{var n=e.r(39088);t.exports=function(){return n.Date.now()}},42173,(e,t,r)=>{var n=e.r(4300),i=e.r(86287),a=e.r(66397),o=e.r(12447),s=e.r(2054);t.exports=function(e,t,r,l){if(!o(e))return e;t=i(t,e);for(var u=-1,c=t.length,d=c-1,h=e;null!=h&&++u<c;){var f=s(t[u]),p=r;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(u!=d){var v=h[f];void 0===(p=l?l(v,f,h):void 0)&&(p=o(v)?v:a(t[u+1])?[]:{})}n(h,f,p),h=h[f]}return e}},81829,(e,t,r)=>{var n=e.r(33141),i=e.r(42173),a=e.r(86287);t.exports=function(e,t,r){for(var o=-1,s=t.length,l={};++o<s;){var u=t[o],c=n(e,u);r(c,u)&&i(l,a(u,e),c)}return l}},13879,(e,t,r)=>{var n=e.r(81829),i=e.r(76590);t.exports=function(e,t){return n(e,t,function(t,r){return i(e,r)})}},6227,(e,t,r)=>{var n=e.r(72810),i=e.r(72953),a=e.r(84665);t.exports=function(e){return a(i(e,void 0,n),e+"")}},80210,(e,t,r)=>{var n=e.r(13879);t.exports=e.r(6227)(function(e,t){return null==e?{}:n(e,t)})},93440,(e,t,r)=>{var n=Math.ceil,i=Math.max;t.exports=function(e,t,r,a){for(var o=-1,s=i(n((t-e)/(r||1)),0),l=Array(s);s--;)l[a?s:++o]=e,e+=r;return l}},69523,(e,t,r)=>{var n=e.r(93440),i=e.r(70237),a=e.r(82560);t.exports=function(e){return function(t,r,o){return o&&"number"!=typeof o&&i(t,r,o)&&(r=o=void 0),t=a(t),void 0===r?(r=t,t=0):r=a(r),o=void 0===o?t<r?1:-1:a(o),n(t,r,o,e)}}},44950,(e,t,r)=>{t.exports=e.r(69523)()},83629,(e,t,r)=>{t.exports=function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}},4886,(e,t,r)=>{var n=e.r(61884);t.exports=function(e,t){if(e!==t){var r=void 0!==e,i=null===e,a=e==e,o=n(e),s=void 0!==t,l=null===t,u=t==t,c=n(t);if(!l&&!c&&!o&&e>t||o&&s&&u&&!l&&!c||i&&s&&u||!r&&u||!a)return 1;if(!i&&!o&&!c&&e<t||c&&r&&a&&!i&&!o||l&&r&&a||!s&&a||!u)return -1}return 0}},58322,(e,t,r)=>{var n=e.r(4886);t.exports=function(e,t,r){for(var i=-1,a=e.criteria,o=t.criteria,s=a.length,l=r.length;++i<s;){var u=n(a[i],o[i]);if(u){if(i>=l)return u;return u*("desc"==r[i]?-1:1)}}return e.index-t.index}},28138,(e,t,r)=>{var n=e.r(92708),i=e.r(33141),a=e.r(66305),o=e.r(7073),s=e.r(83629),l=e.r(33999),u=e.r(58322),c=e.r(53336),d=e.r(45350);t.exports=function(e,t,r){t=t.length?n(t,function(e){return d(e)?function(t){return i(t,1===e.length?e[0]:e)}:e}):[c];var h=-1;return t=n(t,l(a)),s(o(e,function(e,r,i){return{criteria:n(t,function(t){return t(e)}),index:++h,value:e}}),function(e,t){return u(e,t,r)})}},31195,(e,t,r)=>{var n=e.r(41891),i=e.r(28138),a=e.r(95059),o=e.r(70237);t.exports=a(function(e,t){if(null==e)return[];var r=t.length;return r>1&&o(e,t[0],t[1])?t=[]:r>2&&o(t[0],t[1],t[2])&&(t=[t[0]]),i(e,n(t,1),[])})},85658,(e,t,r)=>{var n=e.r(2922),i=0;t.exports=function(e){var t=++i;return n(e)+t}},89726,(e,t,r)=>{t.exports=function(e,t,r){for(var n=-1,i=e.length,a=t.length,o={};++n<i;){var s=n<a?t[n]:void 0;r(o,e[n],s)}return o}},78957,(e,t,r)=>{var n=e.r(4300),i=e.r(89726);t.exports=function(e,t){return i(e||[],t||[],n)}},11994,(e,t,r)=>{var n;try{n={cloneDeep:e.r(71944),constant:e.r(56751),defaults:e.r(10806),each:e.r(71846),filter:e.r(84892),find:e.r(60191),flatten:e.r(72810),forEach:e.r(93448),forIn:e.r(14200),has:e.r(44708),isUndefined:e.r(79393),last:e.r(4879),map:e.r(10632),mapValues:e.r(60793),max:e.r(86966),merge:e.r(11595),min:e.r(37544),minBy:e.r(49673),now:e.r(31926),pick:e.r(80210),range:e.r(44950),reduce:e.r(58253),sortBy:e.r(31195),uniqueId:e.r(85658),values:e.r(80985),zipObject:e.r(78957)}}catch(e){}n||(n=window._),t.exports=n},71676,(e,t,r)=>{function n(){var e={};e._next=e._prev=e,this._sentinel=e}function i(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function a(e,t){if("_next"!==e&&"_prev"!==e)return t}t.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return i(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&i(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,r=t._prev;r!==t;)e.push(JSON.stringify(r,a)),r=r._prev;return"["+e.join(", ")+"]"}},15769,(e,t,r)=>{var n=e.r(11994),i=e.r(40576).Graph,a=e.r(71676);t.exports=function(e,t){if(1>=e.nodeCount())return[];var r,u,c,d,h,f,p,v=(r=e,u=t||o,c=new i,d=0,h=0,n.forEach(r.nodes(),function(e){c.setNode(e,{v:e,in:0,out:0})}),n.forEach(r.edges(),function(e){var t=c.edge(e.v,e.w)||0,r=u(e);c.setEdge(e.v,e.w,t+r),h=Math.max(h,c.node(e.v).out+=r),d=Math.max(d,c.node(e.w).in+=r)}),f=n.range(h+d+3).map(function(){return new a}),p=d+1,n.forEach(c.nodes(),function(e){l(f,p,c.node(e))}),{graph:c,buckets:f,zeroIdx:p}),g=function(e,t,r){for(var n,i=[],a=t[t.length-1],o=t[0];e.nodeCount();){for(;n=o.dequeue();)s(e,t,r,n);for(;n=a.dequeue();)s(e,t,r,n);if(e.nodeCount()){for(var l=t.length-2;l>0;--l)if(n=t[l].dequeue()){i=i.concat(s(e,t,r,n,!0));break}}}return i}(v.graph,v.buckets,v.zeroIdx);return n.flatten(n.map(g,function(t){return e.outEdges(t.v,t.w)}),!0)};var o=n.constant(1);function s(e,t,r,i,a){var o=a?[]:void 0;return n.forEach(e.inEdges(i.v),function(n){var i=e.edge(n),s=e.node(n.v);a&&o.push({v:n.v,w:n.w}),s.out-=i,l(t,r,s)}),n.forEach(e.outEdges(i.v),function(n){var i=e.edge(n),a=n.w,o=e.node(a);o.in-=i,l(t,r,o)}),e.removeNode(i.v),o}function l(e,t,r){r.out?r.in?e[r.out-r.in+t].enqueue(r):e[e.length-1].enqueue(r):e[0].enqueue(r)}},28155,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(15769);t.exports={run:function(e){var t,r,a,o,s,l="greedy"===e.graph().acyclicer?i(e,(t=e,function(e){return t.edge(e).weight})):(r=e,a=[],o={},s={},n.forEach(r.nodes(),function e(t){n.has(s,t)||(s[t]=!0,o[t]=!0,n.forEach(r.outEdges(t),function(t){n.has(o,t.w)?a.push(t):e(t.w)}),delete o[t])}),a);n.forEach(l,function(t){var r=e.edge(t);e.removeEdge(t),r.forwardName=t.name,r.reversed=!0,e.setEdge(t.w,t.v,r,n.uniqueId("rev"))})},undo:function(e){n.forEach(e.edges(),function(t){var r=e.edge(t);if(r.reversed){e.removeEdge(t);var n=r.forwardName;delete r.reversed,delete r.forwardName,e.setEdge(t.w,t.v,r,n)}})}}},80897,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(40576).Graph;function a(e,t,r,i){var a;do a=n.uniqueId(i);while(e.hasNode(a))return r.dummy=t,e.setNode(a,r),a}function o(e){return n.max(n.map(e.nodes(),function(t){var r=e.node(t).rank;if(!n.isUndefined(r))return r}))}t.exports={addDummyNode:a,simplify:function(e){var t=new i().setGraph(e.graph());return n.forEach(e.nodes(),function(r){t.setNode(r,e.node(r))}),n.forEach(e.edges(),function(r){var n=t.edge(r.v,r.w)||{weight:0,minlen:1},i=e.edge(r);t.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})}),t},asNonCompoundGraph:function(e){var t=new i({multigraph:e.isMultigraph()}).setGraph(e.graph());return n.forEach(e.nodes(),function(r){e.children(r).length||t.setNode(r,e.node(r))}),n.forEach(e.edges(),function(r){t.setEdge(r,e.edge(r))}),t},successorWeights:function(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.outEdges(t),function(t){r[t.w]=(r[t.w]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=n.map(e.nodes(),function(t){var r={};return n.forEach(e.inEdges(t),function(t){r[t.v]=(r[t.v]||0)+e.edge(t).weight}),r});return n.zipObject(e.nodes(),t)},intersectRect:function(e,t){var r,n,i=e.x,a=e.y,o=t.x-i,s=t.y-a,l=e.width/2,u=e.height/2;if(!o&&!s)throw Error("Not possible to find intersection inside of the rectangle");return Math.abs(s)*l>Math.abs(o)*u?(s<0&&(u=-u),r=u*o/s,n=u):(o<0&&(l=-l),r=l,n=l*s/o),{x:i+r,y:a+n}},buildLayerMatrix:function(e){var t=n.map(n.range(o(e)+1),function(){return[]});return n.forEach(e.nodes(),function(r){var i=e.node(r),a=i.rank;n.isUndefined(a)||(t[a][i.order]=r)}),t},normalizeRanks:function(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank}));n.forEach(e.nodes(),function(r){var i=e.node(r);n.has(i,"rank")&&(i.rank-=t)})},removeEmptyRanks:function(e){var t=n.min(n.map(e.nodes(),function(t){return e.node(t).rank})),r=[];n.forEach(e.nodes(),function(n){var i=e.node(n).rank-t;r[i]||(r[i]=[]),r[i].push(n)});var i=0,a=e.graph().nodeRankFactor;n.forEach(r,function(t,r){n.isUndefined(t)&&r%a!=0?--i:i&&n.forEach(t,function(t){e.node(t).rank+=i})})},addBorderNode:function(e,t,r,n){var i={width:0,height:0};return arguments.length>=4&&(i.rank=r,i.order=n),a(e,"border",i,t)},maxRank:o,partition:function(e,t){var r={lhs:[],rhs:[]};return n.forEach(e,function(e){t(e)?r.lhs.push(e):r.rhs.push(e)}),r},time:function(e,t){var r=n.now();try{return t()}finally{console.log(e+" time: "+(n.now()-r)+"ms")}},notime:function(e,t){return t()}}},21810,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(80897);t.exports={run:function(e){e.graph().dummyChains=[],n.forEach(e.edges(),function(t){!function(e,t){var r,n,a,o=t.v,s=e.node(o).rank,l=t.w,u=e.node(l).rank,c=t.name,d=e.edge(t),h=d.labelRank;if(u!==s+1){for(e.removeEdge(t),a=0,++s;s<u;++a,++s)d.points=[],n={width:0,height:0,edgeLabel:d,edgeObj:t,rank:s},r=i.addDummyNode(e,"edge",n,"_d"),s===h&&(n.width=d.width,n.height=d.height,n.dummy="edge-label",n.labelpos=d.labelpos),e.setEdge(o,r,{weight:d.weight},c),0===a&&e.graph().dummyChains.push(r),o=r;e.setEdge(o,l,{weight:d.weight},c)}}(e,t)})},undo:function(e){n.forEach(e.graph().dummyChains,function(t){var r,n=e.node(t),i=n.edgeLabel;for(e.setEdge(n.edgeObj,i);n.dummy;)r=e.successors(t)[0],e.removeNode(t),i.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),t=r,n=e.node(t)})}}},99269,(e,t,r)=>{"use strict";var n=e.r(11994);t.exports={longestPath:function(e){var t={};n.forEach(e.sources(),function r(i){var a=e.node(i);if(n.has(t,i))return a.rank;t[i]=!0;var o=n.min(n.map(e.outEdges(i),function(t){return r(t.w)-e.edge(t).minlen}));return(o===1/0||null==o)&&(o=0),a.rank=o})},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},10836,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(40576).Graph,a=e.r(99269).slack;t.exports=function(e){var t,r,o,s,l=new i({directed:!1}),u=e.nodes()[0],c=e.nodeCount();for(l.setNode(u,{});t=l,r=e,n.forEach(t.nodes(),function e(i){n.forEach(r.nodeEdges(i),function(n){var o=n.v,s=i===o?n.w:o;t.hasNode(s)||a(r,n)||(t.setNode(s,{}),t.setEdge(i,s,{}),e(s))})}),t.nodeCount()<c;)o=function(e,t){return n.minBy(t.edges(),function(r){if(e.hasNode(r.v)!==e.hasNode(r.w))return a(t,r)})}(l,e),s=l.hasNode(o.v)?a(e,o):-a(e,o),function(e,t,r){n.forEach(e.nodes(),function(e){t.node(e).rank+=r})}(l,e,s);return l}},71639,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(10836),a=e.r(99269).slack,o=e.r(99269).longestPath,s=e.r(40576).alg.preorder,l=e.r(40576).alg.postorder,u=e.r(80897).simplify;function c(e){o(e=u(e));var t,r,n=i(e);for(f(n),d(n,e);t=p(n);)r=v(n,e,t),g(n,e,t,r)}function d(e,t){var r=l(e,e.nodes());r=r.slice(0,r.length-1),n.forEach(r,function(r){var n,i,a,o;n=e,i=t,a=r,o=n.node(a).parent,n.edge(a,o).cutvalue=h(n,i,a)})}function h(e,t,r){var i=e.node(r).parent,a=!0,o=t.edge(r,i),s=0;return o||(a=!1,o=t.edge(i,r)),s=o.weight,n.forEach(t.nodeEdges(r),function(n){var o=n.v===r,l=o?n.w:n.v;if(l!==i){var u,c,d,h=o===a,f=t.edge(n).weight;if(s+=h?f:-f,u=e,c=r,d=l,u.hasEdge(c,d)){var p=e.edge(r,l).cutvalue;s+=h?-p:p}}}),s}function f(e,t){arguments.length<2&&(t=e.nodes()[0]),function e(t,r,i,a,o){var s=i,l=t.node(a);return r[a]=!0,n.forEach(t.neighbors(a),function(o){n.has(r,o)||(i=e(t,r,i,o,a))}),l.low=s,l.lim=i++,o?l.parent=o:delete l.parent,i}(e,{},1,t)}function p(e){return n.find(e.edges(),function(t){return e.edge(t).cutvalue<0})}function v(e,t,r){var i=r.v,o=r.w;t.hasEdge(i,o)||(i=r.w,o=r.v);var s=e.node(i),l=e.node(o),u=s,c=!1;s.lim>l.lim&&(u=l,c=!0);var d=n.filter(t.edges(),function(t){return c===y(e,e.node(t.v),u)&&c!==y(e,e.node(t.w),u)});return n.minBy(d,function(e){return a(t,e)})}function g(e,t,r,i){var a,o,l,u,c=r.v,h=r.w;e.removeEdge(c,h),e.setEdge(i.v,i.w,{}),f(e),d(e,t),a=e,o=t,l=n.find(a.nodes(),function(e){return!o.node(e).parent}),u=(u=s(a,l)).slice(1),n.forEach(u,function(e){var t=a.node(e).parent,r=o.edge(e,t),n=!1;r||(r=o.edge(t,e),n=!0),o.node(e).rank=o.node(t).rank+(n?r.minlen:-r.minlen)})}function y(e,t,r){return r.low<=t.lim&&t.lim<=r.lim}t.exports=c,c.initLowLimValues=f,c.initCutValues=d,c.calcCutValue=h,c.leaveEdge=p,c.enterEdge=v,c.exchangeEdges=g},60106,(e,t,r)=>{"use strict";var n=e.r(99269).longestPath,i=e.r(10836),a=e.r(71639);t.exports=function(e){switch(e.graph().ranker){case"network-simplex":default:a(e);break;case"tight-tree":var t;n(t=e),i(t);break;case"longest-path":o(e)}};var o=n},31662,(e,t,r)=>{var n=e.r(11994);t.exports=function(e){var t,r,i,a=(t=e,r={},i=0,n.forEach(t.children(),function e(a){var o=i;n.forEach(t.children(a),e),r[a]={low:o,lim:i++}}),r);n.forEach(e.graph().dummyChains,function(t){for(var r=e.node(t),n=r.edgeObj,i=function(e,t,r,n){var i,a,o=[],s=[],l=Math.min(t[r].low,t[n].low),u=Math.max(t[r].lim,t[n].lim);i=r;do o.push(i=e.parent(i));while(i&&(t[i].low>l||u>t[i].lim))for(a=i,i=n;(i=e.parent(i))!==a;)s.push(i);return{path:o.concat(s.reverse()),lca:a}}(e,a,n.v,n.w),o=i.path,s=i.lca,l=0,u=o[0],c=!0;t!==n.w;){if(r=e.node(t),c){for(;(u=o[l])!==s&&e.node(u).maxRank<r.rank;)l++;u===s&&(c=!1)}if(!c){for(;l<o.length-1&&e.node(u=o[l+1]).minRank<=r.rank;)l++;u=o[l]}e.setParent(t,u),t=e.successors(t)[0]}})}},40786,(e,t,r)=>{var n=e.r(11994),i=e.r(80897);t.exports={run:function(e){var t,r,a,o=i.addDummyNode(e,"root",{},"_root"),s=(t=e,r={},n.forEach(t.children(),function(e){!function e(i,a){var o=t.children(i);o&&o.length&&n.forEach(o,function(t){e(t,a+1)}),r[i]=a}(e,1)}),r),l=n.max(n.values(s))-1,u=2*l+1;e.graph().nestingRoot=o,n.forEach(e.edges(),function(t){e.edge(t).minlen*=u});var c=(a=e,n.reduce(a.edges(),function(e,t){return e+a.edge(t).weight},0)+1);n.forEach(e.children(),function(t){!function e(t,r,a,o,s,l,u){var c=t.children(u);if(!c.length){u!==r&&t.setEdge(r,u,{weight:0,minlen:a});return}var d=i.addBorderNode(t,"_bt"),h=i.addBorderNode(t,"_bb"),f=t.node(u);t.setParent(d,u),f.borderTop=d,t.setParent(h,u),f.borderBottom=h,n.forEach(c,function(n){e(t,r,a,o,s,l,n);var i=t.node(n),c=i.borderTop?i.borderTop:n,f=i.borderBottom?i.borderBottom:n,p=i.borderTop?o:2*o,v=c!==f?1:s-l[u]+1;t.setEdge(d,c,{weight:p,minlen:v,nestingEdge:!0}),t.setEdge(f,h,{weight:p,minlen:v,nestingEdge:!0})}),t.parent(u)||t.setEdge(r,d,{weight:0,minlen:s+l[u]})}(e,o,u,c,l,s,t)}),e.graph().nodeRankFactor=u},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,n.forEach(e.edges(),function(t){e.edge(t).nestingEdge&&e.removeEdge(t)})}}},8889,(e,t,r)=>{var n=e.r(11994),i=e.r(80897);function a(e,t,r,n,a,o){var s=a[t][o-1],l=i.addDummyNode(e,"border",{width:0,height:0,rank:o,borderType:t},r);a[t][o]=l,e.setParent(l,n),s&&e.setEdge(s,l,{weight:1})}t.exports=function(e){n.forEach(e.children(),function t(r){var i=e.children(r),o=e.node(r);if(i.length&&n.forEach(i,t),n.has(o,"minRank")){o.borderLeft=[],o.borderRight=[];for(var s=o.minRank,l=o.maxRank+1;s<l;++s)a(e,"borderLeft","_bl",r,o,s),a(e,"borderRight","_br",r,o,s)}})}},75175,(e,t,r)=>{"use strict";var n=e.r(11994);function i(e){n.forEach(e.nodes(),function(t){a(e.node(t))}),n.forEach(e.edges(),function(t){a(e.edge(t))})}function a(e){var t=e.width;e.width=e.height,e.height=t}function o(e){e.y=-e.y}function s(e){var t=e.x;e.x=e.y,e.y=t}t.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();("lr"===t||"rl"===t)&&i(e)},undo:function(e){var t,r,a=e.graph().rankdir.toLowerCase();("bt"===a||"rl"===a)&&(t=e,n.forEach(t.nodes(),function(e){o(t.node(e))}),n.forEach(t.edges(),function(e){var r=t.edge(e);n.forEach(r.points,o),n.has(r,"y")&&o(r)})),("lr"===a||"rl"===a)&&(r=e,n.forEach(r.nodes(),function(e){s(r.node(e))}),n.forEach(r.edges(),function(e){var t=r.edge(e);n.forEach(t.points,s),n.has(t,"x")&&s(t)}),i(e))}}},92064,(e,t,r)=>{"use strict";var n=e.r(11994);t.exports=function(e){var t={},r=n.filter(e.nodes(),function(t){return!e.children(t).length}),i=n.max(n.map(r,function(t){return e.node(t).rank})),a=n.map(n.range(i+1),function(){return[]}),o=n.sortBy(r,function(t){return e.node(t).rank});return n.forEach(o,function r(i){n.has(t,i)||(t[i]=!0,a[e.node(i).rank].push(i),n.forEach(e.successors(i),r))}),a}},45729,(e,t,r)=>{"use strict";var n=e.r(11994);t.exports=function(e,t){for(var r=0,i=1;i<t.length;++i)r+=function(e,t,r){for(var i=n.zipObject(r,n.map(r,function(e,t){return t})),a=n.flatten(n.map(t,function(t){return n.sortBy(n.map(e.outEdges(t),function(t){return{pos:i[t.w],weight:e.edge(t).weight}}),"pos")}),!0),o=1;o<r.length;)o<<=1;var s=2*o-1;o-=1;var l=n.map(Array(s),function(){return 0}),u=0;return n.forEach(a.forEach(function(e){var t=e.pos+o;l[t]+=e.weight;for(var r=0;t>0;)t%2&&(r+=l[t+1]),t=t-1>>1,l[t]+=e.weight;u+=e.weight*r})),u}(e,t[i-1],t[i]);return r}},91609,(e,t,r)=>{var n=e.r(11994);t.exports=function(e,t){return n.map(t,function(t){var r=e.inEdges(t);if(!r.length)return{v:t};var i=n.reduce(r,function(t,r){var n=e.edge(r),i=e.node(r.v);return{sum:t.sum+n.weight*i.order,weight:t.weight+n.weight}},{sum:0,weight:0});return{v:t,barycenter:i.sum/i.weight,weight:i.weight}})}},38867,(e,t,r)=>{"use strict";var n=e.r(11994);t.exports=function(e,t){var r={};return n.forEach(e,function(e,t){var i=r[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};n.isUndefined(e.barycenter)||(i.barycenter=e.barycenter,i.weight=e.weight)}),n.forEach(t.edges(),function(e){var t=r[e.v],i=r[e.w];n.isUndefined(t)||n.isUndefined(i)||(i.indegree++,t.out.push(r[e.w]))}),function(e){for(var t=[];e.length;){var r=e.pop();t.push(r),n.forEach(r.in.reverse(),function(e){return function(t){!t.merged&&(n.isUndefined(t.barycenter)||n.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var r=0,n=0;e.weight&&(r+=e.barycenter*e.weight,n+=e.weight),t.weight&&(r+=t.barycenter*t.weight,n+=t.weight),e.vs=t.vs.concat(e.vs),e.barycenter=r/n,e.weight=n,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}(r)),n.forEach(r.out,function(t){return function(r){r.in.push(t),0==--r.indegree&&e.push(r)}}(r))}return n.map(n.filter(t,function(e){return!e.merged}),function(e){return n.pick(e,["vs","i","barycenter","weight"])})}(n.filter(r,function(e){return!e.indegree}))}},25571,(e,t,r)=>{var n=e.r(11994),i=e.r(80897);function a(e,t,r){for(var i;t.length&&(i=n.last(t)).i<=r;)t.pop(),e.push(i.vs),r++;return r}t.exports=function(e,t){var r,o=i.partition(e,function(e){return n.has(e,"barycenter")}),s=o.lhs,l=n.sortBy(o.rhs,function(e){return-e.i}),u=[],c=0,d=0,h=0;s.sort((r=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:r?t.i-e.i:e.i-t.i})),h=a(u,l,h),n.forEach(s,function(e){h+=e.vs.length,u.push(e.vs),c+=e.barycenter*e.weight,d+=e.weight,h=a(u,l,h)});var f={vs:n.flatten(u,!0)};return d&&(f.barycenter=c/d,f.weight=d),f}},15133,(e,t,r)=>{var n=e.r(11994),i=e.r(91609),a=e.r(38867),o=e.r(25571);t.exports=function e(t,r,s,l){var u,c,d=t.children(r),h=t.node(r),f=h?h.borderLeft:void 0,p=h?h.borderRight:void 0,v={};f&&(d=n.filter(d,function(e){return e!==f&&e!==p}));var g=i(t,d);n.forEach(g,function(r){if(t.children(r.v).length){var i,a,o=e(t,r.v,s,l);v[r.v]=o,n.has(o,"barycenter")&&(i=r,a=o,n.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}});var y=a(g,s);u=y,c=v,n.forEach(u,function(e){e.vs=n.flatten(e.vs.map(function(e){return c[e]?c[e].vs:e}),!0)});var b=o(y,l);if(f&&(b.vs=n.flatten([f,b.vs,p],!0),t.predecessors(f).length)){var x=t.node(t.predecessors(f)[0]),w=t.node(t.predecessors(p)[0]);n.has(b,"barycenter")||(b.barycenter=0,b.weight=0),b.barycenter=(b.barycenter*b.weight+x.order+w.order)/(b.weight+2),b.weight+=2}return b}},81686,(e,t,r)=>{var n=e.r(11994),i=e.r(40576).Graph;t.exports=function(e,t,r){var a=function(e){for(var t;e.hasNode(t=n.uniqueId("_root")););return t}(e),o=new i({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(function(t){return e.node(t)});return n.forEach(e.nodes(),function(i){var s=e.node(i),l=e.parent(i);(s.rank===t||s.minRank<=t&&t<=s.maxRank)&&(o.setNode(i),o.setParent(i,l||a),n.forEach(e[r](i),function(t){var r=t.v===i?t.w:t.v,a=o.edge(r,i),s=n.isUndefined(a)?0:a.weight;o.setEdge(r,i,{weight:e.edge(t).weight+s})}),n.has(s,"minRank")&&o.setNode(i,{borderLeft:s.borderLeft[t],borderRight:s.borderRight[t]}))}),o}},47404,(e,t,r)=>{var n=e.r(11994);t.exports=function(e,t,r){var i,a={};n.forEach(r,function(r){for(var n,o,s=e.parent(r);s;){if((n=e.parent(s))?(o=a[n],a[n]=s):(o=i,i=s),o&&o!==s)return void t.setEdge(o,s);s=n}})}},94432,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(92064),a=e.r(45729),o=e.r(15133),s=e.r(81686),l=e.r(47404),u=e.r(40576).Graph,c=e.r(80897);function d(e,t,r){return n.map(t,function(t){return s(e,t,r)})}function h(e,t){n.forEach(t,function(t){n.forEach(t,function(t,r){e.node(t).order=r})})}t.exports=function(e){var t=c.maxRank(e),r=d(e,n.range(1,t+1),"inEdges"),s=d(e,n.range(t-1,-1,-1),"outEdges"),f=i(e);h(e,f);for(var p,v=1/0,g=0,y=0;y<4;++g,++y){(function(e,t){var r=new u;n.forEach(e,function(e){var i=e.graph().root,a=o(e,i,r,t);n.forEach(a.vs,function(t,r){e.node(t).order=r}),l(e,r,a.vs)})})(g%2?r:s,g%4>=2),f=c.buildLayerMatrix(e);var b=a(e,f);b<v&&(y=0,p=n.cloneDeep(f),v=b)}h(e,p)}},69298,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(40576).Graph,a=e.r(80897);function o(e,t){var r={};return n.reduce(t,function(t,i){var a=0,o=0,s=t.length,u=n.last(i);return n.forEach(i,function(t,c){var d=function(e,t){if(e.node(t).dummy)return n.find(e.predecessors(t),function(t){return e.node(t).dummy})}(e,t),h=d?e.node(d).order:s;(d||t===u)&&(n.forEach(i.slice(o,c+1),function(t){n.forEach(e.predecessors(t),function(n){var i=e.node(n),o=i.order;(o<a||h<o)&&!(i.dummy&&e.node(t).dummy)&&l(r,n,t)})}),o=c+1,a=h)}),i}),r}function s(e,t){var r={};function i(t,i,a,o,s){var u;n.forEach(n.range(i,a),function(i){u=t[i],e.node(u).dummy&&n.forEach(e.predecessors(u),function(t){var n=e.node(t);n.dummy&&(n.order<o||n.order>s)&&l(r,t,u)})})}return n.reduce(t,function(t,r){var a,o=-1,s=0;return n.forEach(r,function(n,l){if("border"===e.node(n).dummy){var u=e.predecessors(n);u.length&&(a=e.node(u[0]).order,i(r,s,l,o,a),s=l,o=a)}i(r,s,r.length,a,t.length)}),r}),r}function l(e,t,r){if(t>r){var n=t;t=r,r=n}var i=e[t];i||(e[t]=i={}),i[r]=!0}function u(e,t,r){if(t>r){var i=t;t=r,r=i}return n.has(e[t],r)}function c(e,t,r,i){var a={},o={},s={};return n.forEach(t,function(e){n.forEach(e,function(e,t){a[e]=e,o[e]=e,s[e]=t})}),n.forEach(t,function(e){var t=-1;n.forEach(e,function(e){var l=i(e);if(l.length)for(var c=((l=n.sortBy(l,function(e){return s[e]})).length-1)/2,d=Math.floor(c),h=Math.ceil(c);d<=h;++d){var f=l[d];o[e]===e&&t<s[f]&&!u(r,e,f)&&(o[f]=e,o[e]=a[e]=a[f],t=s[f])}})}),{root:a,align:o}}function d(e,t,r,a,o){var s,l,u,c,d,h,f,p,v,g,y={},b=(s=e,l=t,u=r,c=o,p=new i,g=(d=(v=s.graph()).nodesep,h=v.edgesep,f=c,function(e,t,r){var i,a,o=e.node(t),s=e.node(r);if(i=0+o.width/2,n.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":a=-o.width/2;break;case"r":a=o.width/2}if(a&&(i+=f?a:-a),a=0,i+=(o.dummy?h:d)/2,i+=(s.dummy?h:d)/2,i+=s.width/2,n.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":a=s.width/2;break;case"r":a=-s.width/2}return a&&(i+=f?a:-a),a=0,i}),n.forEach(l,function(e){var t;n.forEach(e,function(e){var r=u[e];if(p.setNode(r),t){var n=u[t],i=p.edge(n,r);p.setEdge(n,r,Math.max(g(s,e,t),i||0))}t=e})}),p),x=o?"borderLeft":"borderRight";function w(e,t){for(var r=b.nodes(),n=r.pop(),i={};n;)i[n]?e(n):(i[n]=!0,r.push(n),r=r.concat(t(n))),n=r.pop()}return w(function(e){y[e]=b.inEdges(e).reduce(function(e,t){return Math.max(e,y[t.v]+b.edge(t))},0)},b.predecessors.bind(b)),w(function(t){var r=b.outEdges(t).reduce(function(e,t){return Math.min(e,y[t.w]-b.edge(t))},1/0),n=e.node(t);r!==1/0&&n.borderType!==x&&(y[t]=Math.max(y[t],r))},b.successors.bind(b)),n.forEach(a,function(e){y[e]=y[r[e]]}),y}function h(e,t){return n.minBy(n.values(t),function(t){var r=-1/0,i=1/0;return n.forIn(t,function(t,n){var a,o,s=(a=e,o=n,a.node(o).width/2);r=Math.max(t+s,r),i=Math.min(t-s,i)}),r-i})}function f(e,t){var r=n.values(t),i=n.min(r),a=n.max(r);n.forEach(["u","d"],function(r){n.forEach(["l","r"],function(o){var s,l=r+o,u=e[l];if(u!==t){var c=n.values(u);(s="l"===o?i-n.min(c):a-n.max(c))&&(e[l]=n.mapValues(u,function(e){return e+s}))}})})}function p(e,t){return n.mapValues(e.ul,function(r,i){if(t)return e[t.toLowerCase()][i];var a=n.sortBy(n.map(e,i));return(a[1]+a[2])/2})}t.exports={positionX:function(e){var t,r=a.buildLayerMatrix(e),i=n.merge(o(e,r),s(e,r)),l={};n.forEach(["u","d"],function(a){t="u"===a?r:n.values(r).reverse(),n.forEach(["l","r"],function(r){"r"===r&&(t=n.map(t,function(e){return n.values(e).reverse()}));var o=("u"===a?e.predecessors:e.successors).bind(e),s=c(e,t,i,o),u=d(e,t,s.root,s.align,"r"===r);"r"===r&&(u=n.mapValues(u,function(e){return-e})),l[a+r]=u})});var u=h(e,l);return f(l,u),p(l,e.graph().align)},findType1Conflicts:o,findType2Conflicts:s,addConflict:l,hasConflict:u,verticalAlignment:c,horizontalCompaction:d,alignCoordinates:f,findSmallestWidthAlignment:h,balance:p}},66162,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(80897),a=e.r(69298).positionX;t.exports=function(e){var t,r,o,s;t=e=i.asNonCompoundGraph(e),r=i.buildLayerMatrix(t),o=t.graph().ranksep,s=0,n.forEach(r,function(e){var r=n.max(n.map(e,function(e){return t.node(e).height}));n.forEach(e,function(e){t.node(e).y=s+r/2}),s+=r+o}),n.forEach(a(e),function(t,r){e.node(r).x=t})}},77040,(e,t,r)=>{"use strict";var n=e.r(11994),i=e.r(28155),a=e.r(21810),o=e.r(60106),s=e.r(80897).normalizeRanks,l=e.r(31662),u=e.r(80897).removeEmptyRanks,c=e.r(40786),d=e.r(8889),h=e.r(75175),f=e.r(94432),p=e.r(66162),v=e.r(80897),g=e.r(40576).Graph;t.exports=function(e,t){var r=t&&t.debugTiming?v.time:v.notime;r("layout",function(){var t=r("  buildLayoutGraph",function(){var t,r,i;return t=e,r=new g({multigraph:!0,compound:!0}),i=P(t.graph()),r.setGraph(n.merge({},b,T(i,y),n.pick(i,x))),n.forEach(t.nodes(),function(e){var i=P(t.node(e));r.setNode(e,n.defaults(T(i,w),E)),r.setParent(e,t.parent(e))}),n.forEach(t.edges(),function(e){var i=P(t.edge(e));r.setEdge(e,n.merge({},_,T(i,k),n.pick(i,C)))}),r});r("  runLayout",function(){var e,g;e=t,(g=r)("    makeSpaceForEdgeLabels",function(){var t,r;r=(t=e).graph(),r.ranksep/=2,n.forEach(t.edges(),function(e){var n=t.edge(e);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===r.rankdir||"BT"===r.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)})}),g("    removeSelfEdges",function(){var t;t=e,n.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}})}),g("    acyclic",function(){i.run(e)}),g("    nestingGraph.run",function(){c.run(e)}),g("    rank",function(){o(v.asNonCompoundGraph(e))}),g("    injectEdgeLabelProxies",function(){var t;t=e,n.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),i={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};v.addDummyNode(t,"edge-proxy",i,"_ep")}})}),g("    removeEmptyRanks",function(){u(e)}),g("    nestingGraph.cleanup",function(){c.cleanup(e)}),g("    normalizeRanks",function(){s(e)}),g("    assignRankMinMax",function(){var t,r;t=e,r=0,n.forEach(t.nodes(),function(e){var i=t.node(e);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,r=n.max(r,i.maxRank))}),t.graph().maxRank=r}),g("    removeEdgeLabelProxies",function(){var t;t=e,n.forEach(t.nodes(),function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}),g("    normalize.run",function(){a.run(e)}),g("    parentDummyChains",function(){l(e)}),g("    addBorderSegments",function(){d(e)}),g("    order",function(){f(e)}),g("    insertSelfEdges",function(){var t,r;t=e,r=v.buildLayerMatrix(t),n.forEach(r,function(e){var r=0;n.forEach(e,function(e,i){var a=t.node(e);a.order=i+r,n.forEach(a.selfEdges,function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:a.rank,order:i+ ++r,e:e.e,label:e.label},"_se")}),delete a.selfEdges})})}),g("    adjustCoordinateSystem",function(){h.adjust(e)}),g("    position",function(){p(e)}),g("    positionSelfEdges",function(){var t;t=e,n.forEach(t.nodes(),function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),i=n.x+n.width/2,a=n.y,o=r.x-i,s=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:i+2*o/3,y:a-s},{x:i+5*o/6,y:a-s},{x:i+o,y:a},{x:i+5*o/6,y:a+s},{x:i+2*o/3,y:a+s}],r.label.x=r.x,r.label.y=r.y}})}),g("    removeBorderNodes",function(){var t;t=e,n.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),i=t.node(r.borderTop),a=t.node(r.borderBottom),o=t.node(n.last(r.borderLeft)),s=t.node(n.last(r.borderRight));r.width=Math.abs(s.x-o.x),r.height=Math.abs(a.y-i.y),r.x=o.x+r.width/2,r.y=i.y+r.height/2}}),n.forEach(t.nodes(),function(e){"border"===t.node(e).dummy&&t.removeNode(e)})}),g("    normalize.undo",function(){a.undo(e)}),g("    fixupEdgeLabelCoords",function(){var t;t=e,n.forEach(t.edges(),function(e){var r=t.edge(e);if(n.has(r,"x"))switch(("l"===r.labelpos||"r"===r.labelpos)&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}})}),g("    undoCoordinateSystem",function(){h.undo(e)}),g("    translateGraph",function(){!function(e){var t=1/0,r=0,i=1/0,a=0,o=e.graph(),s=o.marginx||0,l=o.marginy||0;function u(e){var n=e.x,o=e.y,s=e.width,l=e.height;t=Math.min(t,n-s/2),r=Math.max(r,n+s/2),i=Math.min(i,o-l/2),a=Math.max(a,o+l/2)}n.forEach(e.nodes(),function(t){u(e.node(t))}),n.forEach(e.edges(),function(t){var r=e.edge(t);n.has(r,"x")&&u(r)}),t-=s,i-=l,n.forEach(e.nodes(),function(r){var n=e.node(r);n.x-=t,n.y-=i}),n.forEach(e.edges(),function(r){var a=e.edge(r);n.forEach(a.points,function(e){e.x-=t,e.y-=i}),n.has(a,"x")&&(a.x-=t),n.has(a,"y")&&(a.y-=i)}),o.width=r-t+s,o.height=a-i+l}(e)}),g("    assignNodeIntersects",function(){var t;t=e,n.forEach(t.edges(),function(e){var r,n,i=t.edge(e),a=t.node(e.v),o=t.node(e.w);i.points?(r=i.points[0],n=i.points[i.points.length-1]):(i.points=[],r=o,n=a),i.points.unshift(v.intersectRect(a,r)),i.points.push(v.intersectRect(o,n))})}),g("    reversePoints",function(){var t;t=e,n.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}),g("    acyclic.undo",function(){i.undo(e)})}),r("  updateInputGraph",function(){var r,i;r=e,i=t,n.forEach(r.nodes(),function(e){var t=r.node(e),n=i.node(e);t&&(t.x=n.x,t.y=n.y,i.children(e).length&&(t.width=n.width,t.height=n.height))}),n.forEach(r.edges(),function(e){var t=r.edge(e),a=i.edge(e);t.points=a.points,n.has(a,"x")&&(t.x=a.x,t.y=a.y)}),r.graph().width=i.graph().width,r.graph().height=i.graph().height})})};var y=["nodesep","edgesep","ranksep","marginx","marginy"],b={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},x=["acyclicer","ranker","rankdir","align"],w=["width","height"],E={width:0,height:0},k=["minlen","weight","width","height","labeloffset"],_={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},C=["labelpos"];function T(e,t){return n.mapValues(n.pick(e,t),Number)}function P(e){var t={};return n.forEach(e,function(e,r){t[r.toLowerCase()]=e}),t}},15400,(e,t,r)=>{var n=e.r(11994),i=e.r(80897),a=e.r(40576).Graph;t.exports={debugOrdering:function(e){var t=i.buildLayerMatrix(e),r=new a({compound:!0,multigraph:!0}).setGraph({});return n.forEach(e.nodes(),function(t){r.setNode(t,{label:t}),r.setParent(t,"layer"+e.node(t).rank)}),n.forEach(e.edges(),function(e){r.setEdge(e.v,e.w,{},e.name)}),n.forEach(t,function(e,t){r.setNode("layer"+t,{rank:"same"}),n.reduce(e,function(e,t){return r.setEdge(e,t,{style:"invis"}),t})}),r}}},51581,(e,t,r)=>{t.exports="0.8.5"},39669,(e,t,r)=>{t.exports={graphlib:e.r(40576),layout:e.r(77040),debug:e.r(15400),util:{time:e.r(80897).time,notime:e.r(80897).notime},version:e.r(51581)}},65777,(e,t,r)=>{e.e,t.exports=function(e){var t=[function(e,t,r){var n=r(1),i=function(e){e&&e("layout","dagre",n)};"undefined"!=typeof cytoscape&&i(cytoscape),e.exports=i},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=function(e){return"function"==typeof e},a=r(2),o=r(3),s=r(4);function l(e){this.options=o({},a,e)}l.prototype.run=function(){var e,t=this.options,r=t.cy,a=t.eles,o=function(e,t){return i(t)?t.apply(e,[e]):t},l=t.boundingBox||{x1:0,y1:0,w:r.width(),h:r.height()};void 0===l.x2&&(l.x2=l.x1+l.w),void 0===l.w&&(l.w=l.x2-l.x1),void 0===l.y2&&(l.y2=l.y1+l.h),void 0===l.h&&(l.h=l.y2-l.y1);var u=new s.graphlib.Graph({multigraph:!0,compound:!0}),c={},d=function(e,t){null!=t&&(c[e]=t)};d("nodesep",t.nodeSep),d("edgesep",t.edgeSep),d("ranksep",t.rankSep),d("rankdir",t.rankDir),d("align",t.align),d("ranker",t.ranker),d("acyclicer",t.acyclicer),u.setGraph(c),u.setDefaultEdgeLabel(function(){return{}}),u.setDefaultNodeLabel(function(){return{}});var h=a.nodes();i(t.sort)&&(h=h.sort(t.sort));for(var f=0;f<h.length;f++){var p=h[f],v=p.layoutDimensions(t);u.setNode(p.id(),{width:v.w,height:v.h,name:p.id()})}for(var g=0;g<h.length;g++){var y=h[g];y.isChild()&&u.setParent(y.id(),y.parent().id())}var b=a.edges().stdFilter(function(e){return!e.source().isParent()&&!e.target().isParent()});i(t.sort)&&(b=b.sort(t.sort));for(var x=0;x<b.length;x++){var w=b[x];u.setEdge(w.source().id(),w.target().id(),{minlen:o(w,t.minLen),weight:o(w,t.edgeWeight),name:w.id()},w.id())}s.layout(u);for(var E=u.nodes(),k=0;k<E.length;k++){var _=E[k],C=u.node(_);r.getElementById(_).scratch().dagre=C}t.boundingBox?(e={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0},h.forEach(function(t){var r=t.scratch().dagre;e.x1=Math.min(e.x1,r.x),e.x2=Math.max(e.x2,r.x),e.y1=Math.min(e.y1,r.y),e.y2=Math.max(e.y2,r.y)}),e.w=e.x2-e.x1,e.h=e.y2-e.y1):e=l;var T=function(r){if(!t.boundingBox)return r;var n=0===e.w?0:(r.x-e.x1)/e.w,i=0===e.h?0:(r.y-e.y1)/e.h;return{x:l.x1+n*l.w,y:l.y1+i*l.h}};return h.layoutPositions(this,t,function(e){var t=(e="object"===n(e)?e:this).scratch().dagre;return T({x:t.x,y:t.y})}),this},e.exports=l},function(e,t){e.exports={nodeSep:void 0,edgeSep:void 0,rankSep:void 0,rankDir:void 0,align:void 0,acyclicer:void 0,ranker:void 0,minLen:function(e){return 1},edgeWeight:function(e){return 1},fit:!0,padding:30,spacingFactor:void 0,nodeDimensionsIncludeLabels:!1,animate:!1,animateFilter:function(e,t){return!0},animationDuration:500,animationEasing:void 0,boundingBox:void 0,transform:function(e,t){return t},ready:function(){},sort:void 0,stop:function(){}}},function(e,t){e.exports=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return r.forEach(function(t){Object.keys(t).forEach(function(r){return e[r]=t[r]})}),e}},function(t,r){t.exports=e}],r={};function n(e){if(r[e])return r[e].exports;var i=r[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=r,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t||4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,(function(t){return e[t]}).bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}(e.r(39669))},81164,e=>{"use strict";e.i(47167);var t,r,n,i,a,o,s,l=e.i(43476),u=e.i(71645);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function h(e,t,r){return t&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}function p(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,i=e}finally{try{if(!l&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||x(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:t+""}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){if(e){if("string"==typeof e)return c(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}var w="undefined"==typeof window?null:window,E=w?w.navigator:null;w&&w.document;var k=b(""),_=b({}),C=b(function(){}),T="undefined"==typeof HTMLElement?"undefined":b(HTMLElement),P=function(e){return e&&e.instanceString&&B(e.instanceString)?e.instanceString():null},S=function(e){return null!=e&&b(e)==k},B=function(e){return null!=e&&b(e)===C},D=function(e){return!N(e)&&(Array.isArray?Array.isArray(e):null!=e&&e instanceof Array)},A=function(e){return null!=e&&b(e)===_&&!D(e)&&e.constructor===Object},M=function(e){return null!=e&&b(e)===b(1)&&!isNaN(e)},R=function(e){if("undefined"!==T)return null!=e&&e instanceof HTMLElement},N=function(e){return I(e)||L(e)},I=function(e){return"collection"===P(e)&&e._private.single},L=function(e){return"collection"===P(e)&&!e._private.single},O=function(e){return"core"===P(e)},z=function(e){return"stylesheet"===P(e)},j=function(e){return null==e||!!(""===e||e.match(/^\s+$/))},V=function(e){return null!=e&&b(e)===_&&B(e.then)},F=function(e,t){t||(t=function(){if(1==arguments.length)return arguments[0];if(0==arguments.length)return"undefined";for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);return e.join("$")});var r=function(){var n,i=arguments,a=t.apply(this,i),o=r.cache;return(n=o[a])||(n=o[a]=e.apply(this,i)),n};return r.cache={},r},X=F(function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),q=F(function(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Y=F(function(e,t){return e+t[0].toUpperCase()+t.substring(1)},function(e,t){return e+"$"+t}),W=function(e){return j(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},U=function(e,t){return e.slice(-1*t.length)===t},G="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",H="rgb[a]?\\(("+G+"[%]?)\\s*,\\s*("+G+"[%]?)\\s*,\\s*("+G+"[%]?)(?:\\s*,\\s*("+G+"))?\\)",K="rgb[a]?\\((?:"+G+"[%]?)\\s*,\\s*(?:"+G+"[%]?)\\s*,\\s*(?:"+G+"[%]?)(?:\\s*,\\s*(?:"+G+"))?\\)",Z="hsl[a]?\\(("+G+")\\s*,\\s*("+G+"[%])\\s*,\\s*("+G+"[%])(?:\\s*,\\s*("+G+"))?\\)",$="hsl[a]?\\((?:"+G+")\\s*,\\s*(?:"+G+"[%])\\s*,\\s*(?:"+G+"[%])(?:\\s*,\\s*(?:"+G+"))?\\)",Q=function(e,t){return e<t?-1:+(e>t)},J=null!=Object.assign?Object.assign.bind(Object):function(e){for(var t=arguments,r=1;r<t.length;r++){var n=t[r];if(null!=n)for(var i=Object.keys(n),a=0;a<i.length;a++){var o=i[a];e[o]=n[o]}}return e},ee=function(e){if((4===e.length||7===e.length)&&"#"===e[0]){var t,r,n;return 4===e.length?(t=parseInt(e[1]+e[1],16),r=parseInt(e[2]+e[2],16),n=parseInt(e[3]+e[3],16)):(t=parseInt(e[1]+e[2],16),r=parseInt(e[3]+e[4],16),n=parseInt(e[5]+e[6],16)),[t,r,n]}},et=function(e){function t(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}var r,n,i,a,o,s,l,u,c=RegExp("^"+Z+"$").exec(e);if(c){if((n=parseInt(c[1]))<0?n=(360- -1*n%360)%360:n>360&&(n%=360),n/=360,(i=parseFloat(c[2]))<0||i>100||(i/=100,(a=parseFloat(c[3]))<0||a>100)||(a/=100,void 0!==(o=c[4])&&((o=parseFloat(o))<0||o>1)))return;if(0===i)s=l=u=Math.round(255*a);else{var d=a<.5?a*(1+i):a+i-a*i,h=2*a-d;s=Math.round(255*t(h,d,n+1/3)),l=Math.round(255*t(h,d,n)),u=Math.round(255*t(h,d,n-1/3))}r=[s,l,u,o]}return r},er=function(e){var t,r=RegExp("^"+H+"$").exec(e);if(r){t=[];for(var n=[],i=1;i<=3;i++){var a=r[i];if("%"===a[a.length-1]&&(n[i]=!0),a=parseFloat(a),n[i]&&(a=a/100*255),a<0||a>255)return;t.push(Math.floor(a))}var o=n[1]||n[2]||n[3],s=n[1]&&n[2]&&n[3];if(o&&!s)return;var l=r[4];if(void 0!==l){if((l=parseFloat(l))<0||l>1)return;t.push(l)}}return t},en=function(e){return(D(e)?e:null)||ei[e.toLowerCase()]||ee(e)||er(e)||et(e)},ei={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},ea=function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var a=r[i];if(A(a))throw Error("Tried to set map with object key");i<r.length-1?(null==t[a]&&(t[a]={}),t=t[a]):t[a]=e.value}},eo=function(e){for(var t=e.map,r=e.keys,n=r.length,i=0;i<n;i++){var a=r[i];if(A(a))throw Error("Tried to get map with object key");if(null==(t=t[a]))break}return t},es="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:e.g;function el(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function eu(){return oe?a8:(oe=1,a8=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)})}function ec(){if(oi)return on;oi=1;var e=or?ot:(or=1,ot="object"==typeof es&&es&&es.Object===Object&&es),t="object"==typeof self&&self&&self.Object===Object&&self;return on=e||t||Function("return this")()}function ed(){return oh?od:(oh=1,od=ec().Symbol)}function eh(){if(om)return oy;om=1;var e=ed(),t=function(){if(op)return of;op=1;var e=ed(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,i=e?e.toStringTag:void 0;return of=function(e){var t=r.call(e,i),a=e[i];try{e[i]=void 0;var o=!0}catch(e){}var s=n.call(e);return o&&(t?e[i]=a:delete e[i]),s}}(),r=function(){if(og)return ov;og=1;var e=Object.prototype.toString;return ov=function(t){return e.call(t)}}(),n=e?e.toStringTag:void 0;return oy=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":n&&n in Object(e)?t(e):r(e)}}function ef(){if(oE)return ow;oE=1;var e=eh(),t=ox?ob:(ox=1,ob=function(e){return null!=e&&"object"==typeof e});return ow=function(r){return"symbol"==typeof r||t(r)&&"[object Symbol]"==e(r)}}var ep=el(function(){if(oT)return oC;oT=1;var e=eu(),t=function(){if(oo)return oa;oo=1;var e=ec();return oa=function(){return e.Date.now()}}(),r=function(){if(o_)return ok;o_=1;var e=function(){if(oc)return ou;oc=1;var e=function(){if(ol)return os;ol=1;var e=/\s/;return os=function(t){for(var r=t.length;r--&&e.test(t.charAt(r)););return r}}(),t=/^\s+/;return ou=function(r){return r?r.slice(0,e(r)+1).replace(t,""):r}}(),t=eu(),r=ef(),n=0/0,i=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt;return ok=function(l){if("number"==typeof l)return l;if(r(l))return n;if(t(l)){var u="function"==typeof l.valueOf?l.valueOf():l;l=t(u)?u+"":u}if("string"!=typeof l)return 0===l?l:+l;l=e(l);var c=a.test(l);return c||o.test(l)?s(l.slice(2),c?2:8):i.test(l)?n:+l}}(),n=Math.max,i=Math.min;return oC=function(a,o,s){var l,u,c,d,h,f,p=0,v=!1,g=!1,y=!0;if("function"!=typeof a)throw TypeError("Expected a function");function b(e){var t=l,r=u;return l=u=void 0,p=e,d=a.apply(r,t)}function x(e){var t=e-f,r=e-p;return void 0===f||t>=o||t<0||g&&r>=c}function w(){var e,r,n,a=t();if(x(a))return E(a);h=setTimeout(w,(e=a-f,r=a-p,n=o-e,g?i(n,c-r):n))}function E(e){return(h=void 0,y&&l)?b(e):(l=u=void 0,d)}function k(){var e,r=t(),n=x(r);if(l=arguments,u=this,f=r,n){if(void 0===h)return p=e=f,h=setTimeout(w,o),v?b(e):d;if(g)return clearTimeout(h),h=setTimeout(w,o),b(f)}return void 0===h&&(h=setTimeout(w,o)),d}return o=r(o)||0,e(s)&&(v=!!s.leading,c=(g="maxWait"in s)?n(r(s.maxWait)||0,o):c,y="trailing"in s?!!s.trailing:y),k.cancel=function(){void 0!==h&&clearTimeout(h),p=0,l=f=u=h=void 0},k.flush=function(){return void 0===h?d:E(t())},k}}()),ev=w?w.performance:null,eg=ev&&ev.now?function(){return ev.now()}:function(){return Date.now()},ey=function(){if(w){if(w.requestAnimationFrame)return function(e){w.requestAnimationFrame(e)};else if(w.mozRequestAnimationFrame)return function(e){w.mozRequestAnimationFrame(e)};else if(w.webkitRequestAnimationFrame)return function(e){w.webkitRequestAnimationFrame(e)};else if(w.msRequestAnimationFrame)return function(e){w.msRequestAnimationFrame(e)}}return function(e){e&&setTimeout(function(){e(eg())},1e3/60)}}(),em=function(e){return ey(e)},eb=function(e){for(var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261,n=r;!(t=e.next()).done;)n=65599*n+t.value|0;return n},ex=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9261;return 65599*t+e|0},ew=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5381;return(t<<5)+t+e|0},eE=function(e){return 2097152*e[0]+e[1]},ek=function(e,t){return[ex(e[0],t[0]),ew(e[1],t[1])]},e_=function(e,t){var r={value:0,done:!1},n=0,i=e.length;return eb({next:function(){return n<i?r.value=e[n++]:r.done=!0,r}},t)},eC=function(e,t){var r={value:0,done:!1},n=0,i=e.length;return eb({next:function(){return n<i?r.value=e.charCodeAt(n++):r.done=!0,r}},t)},eT=function(){return eP(arguments)},eP=function(e){for(var t,r=0;r<e.length;r++){var n=e[r];t=0===r?eC(n):eC(n,t)}return t},eS=!0,eB=null!=console.warn,eD=null!=console.trace,eA=Number.MAX_SAFE_INTEGER||0x1fffffffffffff,eM=function(){return!0},eR=function(){return!1},eN=function(){return 0},eI=function(){},eL=function(e){throw Error(e)},eO=function(e){if(void 0===e)return eS;eS=!!e},ez=function(e){eO()&&(eB?console.warn(e):(console.log(e),eD&&console.trace()))},ej=function(e){return null==e?e:D(e)?e.slice():A(e)?J({},e):e},eV=function(e,t){for(t=e="";e++<36;t+=51*e&52?(15^e?8^Math.random()*(20^e?16:4):4).toString(16):"-");return t},eF={},eX=function(){return eF},eq=function(e){var t=Object.keys(e);return function(r){for(var n={},i=0;i<t.length;i++){var a=t[i],o=null==r?void 0:r[a];n[a]=void 0===o?e[a]:o}return n}},eY=function(e,t,r){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1)},eW=function(e){e.splice(0,e.length)},eU=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.push(n)}},eG=function(e,t,r){return r&&(t=Y(r,t)),e[t]},eH=function(e,t,r,n){r&&(t=Y(r,t)),e[t]=n},eK=h(function e(){d(this,e),this._obj={}},[{key:"set",value:function(e,t){return this._obj[e]=t,this}},{key:"delete",value:function(e){return this._obj[e]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(e){return void 0!==this._obj[e]}},{key:"get",value:function(e){return this._obj[e]}}]),eZ="undefined"!=typeof Map?Map:eK,e$=h(function e(t){if(d(this,e),this._obj=Object.create(null),this.size=0,null!=t){var r;r=null!=t.instanceString&&t.instanceString()===this.instanceString()?t.toArray():t;for(var n=0;n<r.length;n++)this.add(r[n])}},[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(e){var t=this._obj;1!==t[e]&&(t[e]=1,this.size++)}},{key:"delete",value:function(e){var t=this._obj;1===t[e]&&(t[e]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(e){return 1===this._obj[e]}},{key:"toArray",value:function(){var e=this;return Object.keys(this._obj).filter(function(t){return e.has(t)})}},{key:"forEach",value:function(e,t){return this.toArray().forEach(e,t)}}]),eQ=("undefined"==typeof Set?"undefined":b(Set))!=="undefined"?Set:e$,eJ=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(void 0===e||void 0===t||!O(e))return void eL("An element must have a core reference and parameters set");var n=t.group;if(null==n&&(n=t.data&&null!=t.data.source&&null!=t.data.target?"edges":"nodes"),"nodes"!==n&&"edges"!==n)return void eL("An element must be of type `nodes` or `edges`; you specified `"+n+"`");this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:n,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:void 0===t.selectable||!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:void 0===t.grabbable||!!t.grabbable,pannable:void 0===t.pannable?"edges"===n:!!t.pannable,active:!1,classes:new eQ,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(null==i.position.x&&(i.position.x=0),null==i.position.y&&(i.position.y=0),t.renderedPosition){var a=t.renderedPosition,o=e.pan(),s=e.zoom();i.position={x:(a.x-o.x)/s,y:(a.y-o.y)/s}}var l=[];D(t.classes)?l=t.classes:S(t.classes)&&(l=t.classes.split(/\s+/));for(var u=0,c=l.length;u<c;u++){var d=l[u];d&&""!==d&&i.classes.add(d)}this.createEmitter(),(void 0===r||r)&&this.restore();var h=t.style||t.css;h&&(ez("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(h))},e0=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(t,r,n){A(t)&&!N(t)&&(t=(i=t).roots||i.root,r=i.visit,n=i.directed),n=2!=arguments.length||B(r)?n:r,r=B(r)?r:function(){};for(var i,a,o,s=this._private.cy,l=t=S(t)?this.filter(t):t,u=[],c=[],d={},h={},f={},p=0,v=this.byGroup(),g=v.nodes,y=v.edges,b=0;b<l.length;b++){var x=l[b],w=x.id();x.isNode()&&(u.unshift(x),e.bfs&&(f[w]=!0,c.push(x)),h[w]=0)}for(;0!==u.length&&(0===(o=function(){var t,i=e.bfs?u.shift():u.pop(),o=i.id();if(e.dfs){if(f[o])return 0;f[o]=!0,c.push(i)}var s=h[o],l=d[o],v=null!=l?l.source():null,b=null!=l?l.target():null,x=null==l?void 0:i.same(v)?b[0]:v[0];if(!0===(t=r(i,l,x,p++,s)))return a=i,1;if(!1===t)return 1;for(var w=i.connectedEdges().filter(function(e){return(!n||e.source().same(i))&&y.has(e)}),E=0;E<w.length;E++){var k=w[E],_=k.connectedNodes().filter(function(e){return!e.same(i)&&g.has(e)}),C=_.id();0===_.length||f[C]||(_=_[0],u.push(_),e.bfs&&(f[C]=!0,c.push(_)),d[C]=k,h[C]=h[o]+1)}}())||1!==o););for(var E=s.collection(),k=0;k<c.length;k++){var _=c[k],C=d[_.id()];null!=C&&E.push(C),E.push(_)}return{path:s.collection(E),found:s.collection(a)}}},e1={breadthFirstSearch:e0({bfs:!0}),depthFirstSearch:e0({dfs:!0})};e1.bfs=e1.breadthFirstSearch,e1.dfs=e1.depthFirstSearch;var e2={exports:{}},e5=e2.exports,e3=el(oB?oS:(oB=1,oS=function(){return oP?e2.exports:(oP=1,(function(){var e,t,r,n,i,a,o,s,l,u,c,d,h,f,p;r=Math.floor,u=Math.min,t=function(e,t){return e<t?-1:+(e>t)},l=function(e,n,i,a,o){var s;if(null==i&&(i=0),null==o&&(o=t),i<0)throw Error("lo must be non-negative");for(null==a&&(a=e.length);i<a;)0>o(n,e[s=r((i+a)/2)])?a=s:i=s+1;return[].splice.apply(e,[i,i-i].concat(n)),n},a=function(e,r,n){return null==n&&(n=t),e.push(r),f(e,0,e.length-1,n)},i=function(e,r){var n,i;return null==r&&(r=t),n=e.pop(),e.length?(i=e[0],e[0]=n,p(e,0,r)):i=n,i},s=function(e,r,n){var i;return null==n&&(n=t),i=e[0],e[0]=r,p(e,0,n),i},o=function(e,r,n){var i;return null==n&&(n=t),e.length&&0>n(e[0],r)&&(r=(i=[e[0],r])[0],e[0]=i[1],p(e,0,n)),r},n=function(e,n){var i,a,o,s,l,u;for(null==n&&(n=t),s=(function(){u=[];for(var t=0,n=r(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}).apply(this).reverse(),l=[],a=0,o=s.length;a<o;a++)i=s[a],l.push(p(e,i,n));return l},h=function(e,r,n){var i;if(null==n&&(n=t),-1!==(i=e.indexOf(r)))return f(e,0,i,n),p(e,i,n)},c=function(e,r,i){var a,s,l,u;if(null==i&&(i=t),!(a=e.slice(0,r)).length)return a;for(n(a,i),s=0,l=(u=e.slice(r)).length;s<l;s++)o(a,u[s],i);return a.sort(i).reverse()},d=function(e,r,a){var o,s,c,d,h,f,p,v,g;if(null==a&&(a=t),10*r<=e.length){if(!(c=e.slice(0,r).sort(a)).length)return c;for(d=0,s=c[c.length-1],f=(p=e.slice(r)).length;d<f;d++)0>a(o=p[d],s)&&(l(c,o,0,null,a),c.pop(),s=c[c.length-1]);return c}for(n(e,a),g=[],h=0,v=u(r,e.length);0<=v?h<v:h>v;0<=v?++h:--h)g.push(i(e,a));return g},f=function(e,r,n,i){var a,o,s;for(null==i&&(i=t),a=e[n];n>r;){if(0>i(a,o=e[s=n-1>>1])){e[n]=o,n=s;continue}break}return e[n]=a},p=function(e,r,n){var i,a,o,s,l;for(null==n&&(n=t),a=e.length,l=r,o=e[r],i=2*r+1;i<a;)(s=i+1)<a&&!(0>n(e[i],e[s]))&&(i=s),e[r]=e[i],i=2*(r=i)+1;return e[r]=o,f(e,l,r,n)},e=function(){function e(e){this.cmp=null!=e?e:t,this.nodes=[]}return e.push=a,e.pop=i,e.replace=s,e.pushpop=o,e.heapify=n,e.updateItem=h,e.nlargest=c,e.nsmallest=d,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return i(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return -1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return o(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return n(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return h(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return(t=new e).nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),e2.exports=e}).call(e5),e2.exports)}())),e4=eq({root:null,weight:function(e){return 1},directed:!1}),e9=eq({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),e6=eq({weight:function(e){return 1},directed:!1}),e7=eq({weight:function(e){return 1},directed:!1,root:null}),e8=Math.sqrt(2),te=function(e,t,r){0===r.length&&eL("Karger-Stein must be run on a connected (sub)graph");for(var n=r[e],i=n[1],a=n[2],o=t[i],s=t[a],l=r.length-1;l>=0;l--){var u=r[l],c=u[1],d=u[2];(t[c]===o&&t[d]===s||t[c]===s&&t[d]===o)&&r.splice(l,1)}for(var h=0;h<r.length;h++){var f=r[h];f[1]===s?(r[h]=f.slice(),r[h][1]=o):f[2]===s&&(r[h]=f.slice(),r[h][2]=o)}for(var p=0;p<t.length;p++)t[p]===s&&(t[p]=o);return r},tt=function(e,t,r,n){for(;r>n;)t=te(Math.floor(Math.random()*t.length),e,t),r--;return t},tr=function(e,t,r){return{x:e.x*t+r.x,y:e.y*t+r.y}},tn=function(e,t,r){return{x:(e.x-r.x)/t,y:(e.y-r.y)/t}},ti=function(e){return{x:e[0],y:e[1]}},ta=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=1/0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n=Math.min(a,n))}return n},to=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=-1/0,i=t;i<r;i++){var a=e[i];isFinite(a)&&(n=Math.max(a,n))}return n},ts=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=0,i=0,a=t;a<r;a++){var o=e[a];isFinite(o)&&(n+=o,i++)}return n/i},tl=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=!(arguments.length>5)||void 0===arguments[5]||arguments[5];n?e=e.slice(t,r):(r<e.length&&e.splice(r,e.length-r),t>0&&e.splice(0,t));for(var o=0,s=e.length-1;s>=0;s--){var l=e[s];a?!isFinite(l)&&(e[s]=-1/0,o++):e.splice(s,1)}i&&e.sort(function(e,t){return e-t});var u=e.length,c=Math.floor(u/2);return u%2!=0?e[c+1+o]:(e[c-1+o]+e[c+o])/2},tu=function(e,t){return Math.atan2(t,e)-Math.PI/2},tc=Math.log2||function(e){return Math.log(e)/Math.log(2)},td=function(e){return e>0?1:e<0?-1:0},th=function(e,t){return Math.sqrt(tf(e,t))},tf=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r*r+n*n},tp=function(e){for(var t=e.length,r=0,n=0;n<t;n++)r+=e[n];for(var i=0;i<t;i++)e[i]=e[i]/r;return e},tv=function(e,t,r,n){return(1-n)*(1-n)*e+2*(1-n)*n*t+n*n*r},tg=function(e,t,r,n){return{x:tv(e.x,t.x,r.x,n),y:tv(e.y,t.y,r.y,n)}},ty=function(e,t,r,n){var i={x:t.x-e.x,y:t.y-e.y},a=th(e,t),o={x:i.x/a,y:i.y/a};return r=null==r?0:r,n=null!=n?n:r*a,{x:e.x+o.x*n,y:e.y+o.y*n}},tm=function(e,t,r){return Math.max(e,Math.min(r,t))},tb=function(e){if(null==e)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(null!=e.x1&&null!=e.y1){if(null!=e.x2&&null!=e.y2&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};else if(null!=e.w&&null!=e.h&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},tx=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},tw=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},tE=function(e,t,r){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,r),e.y2=Math.max(e.y2,r),e.h=e.y2-e.y1},tk=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},t_=function(e){var t,r,n,i,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0];if(1===a.length)t=r=n=i=a[0];else if(2===a.length)t=n=a[0],i=r=a[1];else if(4===a.length){var o=v(a,4);t=o[0],r=o[1],n=o[2],i=o[3]}return e.x1-=i,e.x2+=r,e.y1-=t,e.y2+=n,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},tC=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},tT=function(e,t){return!(e.x1>t.x2)&&!(t.x1>e.x2)&&!(e.x2<t.x1)&&!(t.x2<e.x1)&&!(e.y2<t.y1)&&!(t.y2<e.y1)&&!(e.y1>t.y2)&&!(t.y1>e.y2)&&!0},tP=function(e,t,r){return e.x1<=t&&t<=e.x2&&e.y1<=r&&r<=e.y2},tS=function(e,t){return tP(e,t.x,t.y)},tB=function(e,t){return tP(e,t.x1,t.y1)&&tP(e,t.x2,t.y2)},tD=null!=(oD=Math.hypot)?oD:function(e,t){return Math.sqrt(e*e+t*t)},tA=function(e,t,r,n,i,a,o){var s,l,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"auto",c="auto"===u?t1(i,a):u,d=i/2,h=a/2,f=(c=Math.min(c,d,h))!==d,p=c!==h;if(f){var v=r-d+c-o,g=n-h-o,y=r+d-c+o;if((s=tG(e,t,r,n,v,g,y,g,!1)).length>0)return s}if(p){var b=r+d+o,x=n-h+c-o,w=n+h-c+o;if((s=tG(e,t,r,n,b,x,b,w,!1)).length>0)return s}if(f){var E=r-d+c-o,k=n+h+o,_=r+d-c+o;if((s=tG(e,t,r,n,E,k,_,k,!1)).length>0)return s}if(p){var C=r-d-o,T=n-h+c-o,P=n+h-c+o;if((s=tG(e,t,r,n,C,T,C,P,!1)).length>0)return s}var S=r-d+c,B=n-h+c;if((l=tW(e,t,r,n,S,B,c+o)).length>0&&l[0]<=S&&l[1]<=B)return[l[0],l[1]];var D=r+d-c,A=n-h+c;if((l=tW(e,t,r,n,D,A,c+o)).length>0&&l[0]>=D&&l[1]<=A)return[l[0],l[1]];var M=r+d-c,R=n+h-c;if((l=tW(e,t,r,n,M,R,c+o)).length>0&&l[0]>=M&&l[1]>=R)return[l[0],l[1]];var N=r-d+c,I=n+h-c;return(l=tW(e,t,r,n,N,I,c+o)).length>0&&l[0]<=N&&l[1]>=I?[l[0],l[1]]:[]},tM=function(e,t,r,n,i,a,o){var s=Math.min(r,i),l=Math.max(r,i),u=Math.min(n,a),c=Math.max(n,a);return s-o<=e&&e<=l+o&&u-o<=t&&t<=c+o},tR=function(e,t,r,n,i,a,o,s,l){var u={x1:Math.min(r,o,i)-l,x2:Math.max(r,o,i)+l,y1:Math.min(n,s,a)-l,y2:Math.max(n,s,a)+l};return!(e<u.x1)&&!(e>u.x2)&&!(t<u.y1)&&!(t>u.y2)},tN=function(e,t,r,n){var i=t*t-4*e*(r-=n);if(i<0)return[];var a=Math.sqrt(i),o=2*e;return[(-t+a)/o,(-t-a)/o]},tI=function(e,t,r,n,i){var a,o,s,l,u,c,d,h;if(0===e&&(e=1e-5),t/=e,r/=e,n/=e,a=(o=(3*r-t*t)/9)*o*o+(s=(-(27*n)+t*(9*r-t*t*2))/54)*s,i[1]=0,d=t/3,a>0){u=(u=s+Math.sqrt(a))<0?-Math.pow(-u,1/3):Math.pow(u,1/3),c=(c=s-Math.sqrt(a))<0?-Math.pow(-c,1/3):Math.pow(c,1/3),i[0]=-d+u+c,d+=(u+c)/2,i[4]=i[2]=-d,d=Math.sqrt(3)*(-c+u)/2,i[3]=d,i[5]=-d;return}if(i[5]=i[3]=0,0===a){h=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),i[0]=-d+2*h,i[4]=i[2]=-(h+d);return}l=Math.acos(s/Math.sqrt(l=(o=-o)*o*o)),h=2*Math.sqrt(o),i[0]=-d+h*Math.cos(l/3),i[2]=-d+h*Math.cos((l+2*Math.PI)/3),i[4]=-d+h*Math.cos((l+4*Math.PI)/3)},tL=function(e,t,r,n,i,a,o,s){var l,u=[];tI(r*r-4*r*i+2*r*o+4*i*i-4*i*o+o*o+n*n-4*n*a+2*n*s+4*a*a-4*a*s+s*s,9*r*i-3*r*r-3*r*o-6*i*i+3*i*o+9*n*a-3*n*n-3*n*s-6*a*a+3*a*s,3*r*r-6*r*i+r*o-r*e+2*i*i+2*i*e-o*e+3*n*n-6*n*a+n*s-n*t+2*a*a+2*a*t-s*t,r*i-r*r+r*e-i*e+n*a-n*n+n*t-a*t,u);for(var c=[],d=0;d<6;d+=2)1e-7>Math.abs(u[d+1])&&u[d]>=0&&u[d]<=1&&c.push(u[d]);c.push(1),c.push(0);for(var h=-1,f=0;f<c.length;f++)l=Math.pow(Math.pow(1-c[f],2)*r+2*(1-c[f])*c[f]*i+c[f]*c[f]*o-e,2)+Math.pow(Math.pow(1-c[f],2)*n+2*(1-c[f])*c[f]*a+c[f]*c[f]*s-t,2),h>=0?l<h&&(h=l):h=l;return h},tO=function(e,t,r,n,i,a){var o=[e-r,t-n],s=[i-r,a-n],l=s[0]*s[0]+s[1]*s[1],u=o[0]*o[0]+o[1]*o[1],c=o[0]*s[0]+o[1]*s[1],d=c*c/l;return c<0?u:d>l?(e-i)*(e-i)+(t-a)*(t-a):u-d},tz=function(e,t,r){for(var n,i,a,o,s=0,l=0;l<r.length/2;l++)if(n=r[2*l],i=r[2*l+1],l+1<r.length/2?(a=r[(l+1)*2],o=r[(l+1)*2+1]):(a=r[(l+1-r.length/2)*2],o=r[(l+1-r.length/2)*2+1]),n==e&&a==e);else{if((!(n>=e)||!(e>=a))&&(!(n<=e)||!(e<=a)))continue;(e-n)/(a-n)*(o-i)+i>t&&s++}return s%2!=0},tj=function(e,t,r,n,i,a,o,s,l){var u,c=Array(r.length);null!=s[0]?(u=Math.atan(s[1]/s[0]),s[0]<0?u+=Math.PI/2:u=-u-Math.PI/2):u=s;for(var d=Math.cos(-u),h=Math.sin(-u),f=0;f<c.length/2;f++)c[2*f]=a/2*(r[2*f]*d-r[2*f+1]*h),c[2*f+1]=o/2*(r[2*f+1]*d+r[2*f]*h),c[2*f]+=n,c[2*f+1]+=i;return tz(e,t,l>0?tF(tX(c,-l)):c)},tV=function(e,t,r,n,i,a,o,s){for(var l=Array(2*r.length),u=0;u<s.length;u++){var c=s[u];if(l[4*u+0]=c.startX,l[4*u+1]=c.startY,l[4*u+2]=c.stopX,l[4*u+3]=c.stopY,Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2)<=Math.pow(c.radius,2))return!0}return tz(e,t,l)},tF=function(e){for(var t,r,n,i,a,o,s,l,u=Array(e.length/2),c=0;c<e.length/4;c++){t=e[4*c],r=e[4*c+1],n=e[4*c+2],i=e[4*c+3],c<e.length/4-1?(a=e[(c+1)*4],o=e[(c+1)*4+1],s=e[(c+1)*4+2],l=e[(c+1)*4+3]):(a=e[0],o=e[1],s=e[2],l=e[3]);var d=tG(t,r,n,i,a,o,s,l,!0);u[2*c]=d[0],u[2*c+1]=d[1]}return u},tX=function(e,t){for(var r,n,i,a,o=Array(2*e.length),s=0;s<e.length/2;s++){r=e[2*s],n=e[2*s+1],s<e.length/2-1?(i=e[(s+1)*2],a=e[(s+1)*2+1]):(i=e[0],a=e[1]);var l=a-n,u=-(i-r),c=Math.sqrt(l*l+u*u),d=l/c,h=u/c;o[4*s]=r+d*t,o[4*s+1]=n+h*t,o[4*s+2]=i+d*t,o[4*s+3]=a+h*t}return o},tq=function(e,t,r,n,i,a){var o=r-e,s=n-t,l=Math.sqrt((o/=i)*o+(s/=a)*s),u=l-1;if(u<0)return[];var c=u/l;return[(r-e)*c+e,(n-t)*c+t]},tY=function(e,t,r,n,i,a,o){return e-=i,t-=a,(e/=r/2+o)*e+(t/=n/2+o)*t<=1},tW=function(e,t,r,n,i,a,o){var s=[r-e,n-t],l=[e-i,t-a],u=s[0]*s[0]+s[1]*s[1],c=2*(l[0]*s[0]+l[1]*s[1]),d=c*c-4*u*(l[0]*l[0]+l[1]*l[1]-o*o);if(d<0)return[];var h=(-c+Math.sqrt(d))/(2*u),f=(-c-Math.sqrt(d))/(2*u),p=Math.min(h,f),v=Math.max(h,f),g=[];if(p>=0&&p<=1&&g.push(p),v>=0&&v<=1&&g.push(v),0===g.length)return[];var y=g[0]*s[0]+e,b=g[0]*s[1]+t;return g.length>1?g[0]==g[1]?[y,b]:[y,b,g[1]*s[0]+e,g[1]*s[1]+t]:[y,b]},tU=function(e,t,r){return t<=e&&e<=r||r<=e&&e<=t?e:e<=t&&t<=r||r<=t&&t<=e?t:r},tG=function(e,t,r,n,i,a,o,s,l){var u=e-i,c=r-e,d=o-i,h=t-a,f=n-t,p=s-a,v=d*h-p*u,g=c*h-f*u,y=p*c-d*f;if(0!==y){var b=v/y,x=g/y;return -.001<=b&&b<=1.001&&-.001<=x&&x<=1.001||l?[e+b*c,t+b*f]:[]}return 0!==v&&0!==g?[]:tU(e,r,o)===o?[o,s]:tU(e,r,i)===i?[i,a]:tU(i,o,r)===r?[r,n]:[]},tH=function(e,t,r,n,i){var a=[],o=n/2,s=i/2;a.push({x:t+o*e[0],y:r+s*e[1]});for(var l=1;l<e.length/2;l++)a.push({x:t+o*e[2*l],y:r+s*e[2*l+1]});return a},tK=function(e,t,r,n,i,a,o,s){var l,u,c,d,h,f,p=[],v=Array(r.length),g=!0;if(null==a&&(g=!1),g){for(var y=0;y<v.length/2;y++)v[2*y]=r[2*y]*a+n,v[2*y+1]=r[2*y+1]*o+i;u=s>0?tF(tX(v,-s)):v}else u=r;for(var b=0;b<u.length/2;b++)c=u[2*b],d=u[2*b+1],b<u.length/2-1?(h=u[(b+1)*2],f=u[(b+1)*2+1]):(h=u[0],f=u[1]),0!==(l=tG(e,t,n,i,c,d,h,f)).length&&p.push(l[0],l[1]);return p},tZ=function(e,t,r,n,i,a,o,s,l){var u,c=[],d=Array(2*r.length);l.forEach(function(r,a){0===a?(d[d.length-2]=r.startX,d[d.length-1]=r.startY):(d[4*a-2]=r.startX,d[4*a-1]=r.startY),d[4*a]=r.stopX,d[4*a+1]=r.stopY,0!==(u=tW(e,t,n,i,r.cx,r.cy,r.radius)).length&&c.push(u[0],u[1])});for(var h=0;h<d.length/4;h++)0!==(u=tG(e,t,n,i,d[4*h],d[4*h+1],d[4*h+2],d[4*h+3],!1)).length&&c.push(u[0],u[1]);if(c.length>2){for(var f=[c[0],c[1]],p=Math.pow(f[0]-e,2)+Math.pow(f[1]-t,2),v=1;v<c.length/2;v++){var g=Math.pow(c[2*v]-e,2)+Math.pow(c[2*v+1]-t,2);g<=p&&(f[0]=c[2*v],f[1]=c[2*v+1],p=g)}return f}return c},t$=function(e,t,r){var n=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=(i-r)/i;return a<0&&(a=1e-5),[t[0]+a*n[0],t[1]+a*n[1]]},tQ=function(e,t){var r=t0(e,t);return tJ(r)},tJ=function(e){for(var t,r,n=e.length/2,i=1/0,a=1/0,o=-1/0,s=-1/0,l=0;l<n;l++)t=e[2*l],r=e[2*l+1],i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);for(var u=2/(o-i),c=2/(s-a),d=0;d<n;d++)t=e[2*d]=e[2*d]*u,r=e[2*d+1]=e[2*d+1]*c,i=Math.min(i,t),o=Math.max(o,t),a=Math.min(a,r),s=Math.max(s,r);if(a<-1)for(var h=0;h<n;h++)r=e[2*h+1]=e[2*h+1]+(-1-a);return e},t0=function(e,t){var r,n=1/e*2*Math.PI,i=e%2==0?Math.PI/2+n/2:Math.PI/2;i+=t;for(var a=Array(2*e),o=0;o<e;o++)r=o*n+i,a[2*o]=Math.cos(r),a[2*o+1]=Math.sin(-r);return a},t1=function(e,t){return Math.min(e/4,t/4,8)},t2=function(e,t){return Math.min(e/10,t/10,8)},t5=function(){return 8},t3=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function t4(e,t){function r(e){for(var t=[],r=0;r<e.length;r++){var n=e[r],i=e[(r+1)%e.length],a={x:i.x-n.x,y:i.y-n.y},o={x:-a.y,y:a.x},s=Math.sqrt(o.x*o.x+o.y*o.y);t.push({x:o.x/s,y:o.y/s})}return t}function n(e,t){var r,n=1/0,i=-1/0,a=f(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,s=o.x*t.x+o.y*t.y;n=Math.min(n,s),i=Math.max(i,s)}}catch(e){a.e(e)}finally{a.f()}return{min:n,max:i}}var i,a=f([].concat(g(r(e)),g(r(t))));try{for(a.s();!(i=a.n()).done;){var o=i.value,s=n(e,o),l=n(t,o);if(s.max<l.min||l.max<s.min)return!1}}catch(e){a.e(e)}finally{a.f()}return!0}var t9=eq({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),t6=eq({root:null,weight:function(e){return 1},directed:!1,alpha:0}),t7={degreeCentralityNormalized:function(e){e=t6(e);var t=this.cy(),r=this.nodes(),n=r.length;if(e.directed){for(var i={},a={},o=0,s=0,l=0;l<n;l++){var u=r[l],c=u.id();e.root=u;var d=this.degreeCentrality(e);o<d.indegree&&(o=d.indegree),s<d.outdegree&&(s=d.outdegree),i[c]=d.indegree,a[c]=d.outdegree}return{indegree:function(e){return 0==o?0:(S(e)&&(e=t.filter(e)),i[e.id()]/o)},outdegree:function(e){return 0===s?0:(S(e)&&(e=t.filter(e)),a[e.id()]/s)}}}for(var h={},f=0,p=0;p<n;p++){var v=r[p];e.root=v;var g=this.degreeCentrality(e);f<g.degree&&(f=g.degree),h[v.id()]=g.degree}return{degree:function(e){return 0===f?0:(S(e)&&(e=t.filter(e)),h[e.id()]/f)}}},degreeCentrality:function(e){e=t6(e);var t=this.cy(),r=this,n=e,i=n.root,a=n.weight,o=n.directed,s=n.alpha;if(i=t.collection(i)[0],o){for(var l=i.connectedEdges(),u=l.filter(function(e){return e.target().same(i)&&r.has(e)}),c=l.filter(function(e){return e.source().same(i)&&r.has(e)}),d=u.length,h=c.length,f=0,p=0,v=0;v<u.length;v++)f+=a(u[v]);for(var g=0;g<c.length;g++)p+=a(c[g]);return{indegree:Math.pow(d,1-s)*Math.pow(f,s),outdegree:Math.pow(h,1-s)*Math.pow(p,s)}}for(var y=i.connectedEdges().intersection(r),b=y.length,x=0,w=0;w<y.length;w++)x+=a(y[w]);return{degree:Math.pow(b,1-s)*Math.pow(x,s)}}};t7.dc=t7.degreeCentrality,t7.dcn=t7.degreeCentralityNormalised=t7.degreeCentralityNormalized;var t8=eq({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),re={closenessCentralityNormalized:function(e){for(var t=t8(e),r=t.harmonic,n=t.weight,i=t.directed,a=this.cy(),o={},s=0,l=this.nodes(),u=this.floydWarshall({weight:n,directed:i}),c=0;c<l.length;c++){for(var d=0,h=l[c],f=0;f<l.length;f++)if(c!==f){var p=u.distance(h,l[f]);r?d+=1/p:d+=p}r||(d=1/d),s<d&&(s=d),o[h.id()]=d}return{closeness:function(e){return 0==s?0:o[e=S(e)?a.filter(e)[0].id():e.id()]/s}}},closenessCentrality:function(e){var t=t8(e),r=t.root,n=t.weight,i=t.directed,a=t.harmonic;r=this.filter(r)[0];for(var o=this.dijkstra({root:r,weight:n,directed:i}),s=0,l=this.nodes(),u=0;u<l.length;u++){var c=l[u];if(!c.same(r)){var d=o.distanceTo(c);a?s+=1/d:s+=d}}return a?s:1/s}};re.cc=re.closenessCentrality,re.ccn=re.closenessCentralityNormalised=re.closenessCentralityNormalized;var rt=eq({weight:null,directed:!1}),rr={betweennessCentrality:function(e){for(var t=rt(e),r=t.directed,n=t.weight,i=null!=n,a=this.cy(),o=this.nodes(),s={},l={},u=0,c=function(e,t){l[e]=t,t>u&&(u=t)},d=function(e){return l[e]},h=0;h<o.length;h++){var f=o[h],p=f.id();r?s[p]=f.outgoers().nodes():s[p]=f.openNeighborhood().nodes(),c(p,0)}for(var v=0;v<o.length;v++)!function(){for(var e=o[v].id(),t=[],r={},l={},u={},h=new e3(function(e,t){return u[e]-u[t]}),f=0;f<o.length;f++){var p=o[f].id();r[p]=[],l[p]=0,u[p]=1/0}for(l[e]=1,u[e]=0,h.push(e);!h.empty();){var g=h.pop();if(t.push(g),i)for(var y=0;y<s[g].length;y++){var b=s[g][y],x=a.getElementById(g),w=n(x.edgesTo(b).length>0?x.edgesTo(b)[0]:b.edgesTo(x)[0]);u[b=b.id()]>u[g]+w&&(u[b]=u[g]+w,0>h.nodes.indexOf(b)?h.push(b):h.updateItem(b),l[b]=0,r[b]=[]),u[b]==u[g]+w&&(l[b]=l[b]+l[g],r[b].push(g))}else for(var E=0;E<s[g].length;E++){var k=s[g][E].id();u[k]==1/0&&(h.push(k),u[k]=u[g]+1),u[k]==u[g]+1&&(l[k]=l[k]+l[g],r[k].push(g))}}for(var _={},C=0;C<o.length;C++)_[o[C].id()]=0;for(;t.length>0;){for(var T=t.pop(),P=0;P<r[T].length;P++){var S=r[T][P];_[S]=_[S]+l[S]/l[T]*(1+_[T])}T!=o[v].id()&&c(T,d(T)+_[T])}}();var g={betweenness:function(e){return d(a.collection(e).id())},betweennessNormalized:function(e){return 0==u?0:d(a.collection(e).id())/u}};return g.betweennessNormalised=g.betweennessNormalized,g}};rr.bc=rr.betweennessCentrality;var rn=eq({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(e){return 1}]}),ri=function(e,t){for(var r=0,n=0;n<t.length;n++)r+=t[n](e);return r},ra=function(e,t,r){for(var n=0;n<t;n++)e[n*t+n]=r},ro=function(e,t){for(var r,n=0;n<t;n++){r=0;for(var i=0;i<t;i++)r+=e[i*t+n];for(var a=0;a<t;a++)e[a*t+n]=e[a*t+n]/r}},rs=function(e,t,r){for(var n=Array(r*r),i=0;i<r;i++){for(var a=0;a<r;a++)n[i*r+a]=0;for(var o=0;o<r;o++)for(var s=0;s<r;s++)n[i*r+s]+=e[i*r+o]*t[o*r+s]}return n},rl=function(e,t,r){for(var n=e.slice(0),i=1;i<r;i++)e=rs(e,n,t);return e},ru=function(e,t,r){for(var n=Array(t*t),i=0;i<t*t;i++)n[i]=Math.pow(e[i],r);return ro(n,t),n},rc=function(e,t,r,n){for(var i=0;i<r;i++)if(Math.round(e[i]*Math.pow(10,n))/Math.pow(10,n)!=Math.round(t[i]*Math.pow(10,n))/Math.pow(10,n))return!1;return!0},rd=function(e,t,r,n){for(var i=[],a=0;a<t;a++){for(var o=[],s=0;s<t;s++)Math.round(1e3*e[a*t+s])/1e3>0&&o.push(r[s]);0!==o.length&&i.push(n.collection(o))}return i},rh=function(e,t){for(var r=0;r<e.length;r++)if(!t[r]||e[r].id()!==t[r].id())return!1;return!0},rf=function(e){for(var t=0;t<e.length;t++)for(var r=0;r<e.length;r++)t!=r&&rh(e[t],e[r])&&e.splice(r,1);return e},rp=function(e){for(var t=this.nodes(),r=this.edges(),n=this.cy(),i=rn(e),a={},o=0;o<t.length;o++)a[t[o].id()]=o;for(var s,l=t.length,u=l*l,c=Array(u),d=0;d<u;d++)c[d]=0;for(var h=0;h<r.length;h++){var f=r[h],p=a[f.source().id()],v=a[f.target().id()],g=ri(f,i.attributes);c[p*l+v]+=g,c[v*l+p]+=g}ra(c,l,i.multFactor),ro(c,l);for(var y=!0,b=0;y&&b<i.maxIterations;)y=!1,rc(c=ru(s=rl(c,l,i.expandFactor),l,i.inflateFactor),s,u,4)||(y=!0),b++;var x=rd(c,l,t,n);return rf(x)},rv=function(e){return e},rg=function(e,t){return Math.abs(t-e)},ry=function(e,t,r){return e+rg(t,r)},rm=function(e,t,r){return e+Math.pow(r-t,2)},rb=function(e){return Math.sqrt(e)},rx=function(e,t,r){return Math.max(e,rg(t,r))},rw=function(e,t,r,n,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:rv,o=n,s=0;s<e;s++)o=i(o,t(s),r(s));return a(o)},rE={euclidean:function(e,t,r){return e>=2?rw(e,t,r,0,rm,rb):rw(e,t,r,0,ry)},squaredEuclidean:function(e,t,r){return rw(e,t,r,0,rm)},manhattan:function(e,t,r){return rw(e,t,r,0,ry)},max:function(e,t,r){return rw(e,t,r,-1/0,rx)}};function rk(e,t,r,n,i,a){var o;return(o=B(e)?e:rE[e]||rE.euclidean,0===t&&B(e))?o(i,a):o(t,r,n,i,a)}rE["squared-euclidean"]=rE.squaredEuclidean,rE.squaredeuclidean=rE.squaredEuclidean;var r_=eq({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),rC=function(e){return r_(e)},rT=function(e,t,r,n,i){var a="kMedoids"!==i?function(e){return r[e]}:function(e){return n[e](r)};return rk(e,n.length,a,function(e){return n[e](t)},r,t)},rP=function(e,t,r){for(var n=r.length,i=Array(n),a=Array(n),o=Array(t),s=null,l=0;l<n;l++)i[l]=e.min(r[l]).value,a[l]=e.max(r[l]).value;for(var u=0;u<t;u++){s=[];for(var c=0;c<n;c++)s[c]=Math.random()*(a[c]-i[c])+i[c];o[u]=s}return o},rS=function(e,t,r,n,i){for(var a=1/0,o=0,s=0;s<t.length;s++){var l=rT(r,e,t[s],n,i);l<a&&(a=l,o=s)}return o},rB=function(e,t,r){for(var n=[],i=null,a=0;a<t.length;a++)r[(i=t[a]).id()]===e&&n.push(i);return n},rD=function(e,t,r){for(var n=0;n<e.length;n++)for(var i=0;i<e[n].length;i++)if(Math.abs(e[n][i]-t[n][i])>r)return!1;return!0},rA=function(e,t,r){for(var n=0;n<r;n++)if(e===t[n])return!0;return!1},rM=function(e,t){var r=Array(t);if(e.length<50)for(var n=0;n<t;n++){for(var i=e[Math.floor(Math.random()*e.length)];rA(i,r,n);)i=e[Math.floor(Math.random()*e.length)];r[n]=i}else for(var a=0;a<t;a++)r[a]=e[Math.floor(Math.random()*e.length)];return r},rR=function(e,t,r){for(var n=0,i=0;i<t.length;i++)n+=rT("manhattan",t[i],e,r,"kMedoids");return n},rN=function(e,t,r,n,i){for(var a,o,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)n[s][l]=Math.pow(r[s][l],i.m);for(var u=0;u<e.length;u++)for(var c=0;c<i.attributes.length;c++){a=0,o=0;for(var d=0;d<t.length;d++)a+=n[d][u]*i.attributes[c](t[d]),o+=n[d][u];e[u][c]=a/o}},rI=function(e,t,r,n,i){for(var a,o=0;o<e.length;o++)t[o]=e[o].slice();for(var s=2/(i.m-1),l=0;l<r.length;l++)for(var u=0;u<n.length;u++){a=0;for(var c=0;c<r.length;c++)a+=Math.pow(rT(i.distance,n[u],r[l],i.attributes,"cmeans")/rT(i.distance,n[u],r[c],i.attributes,"cmeans"),s);e[u][l]=1/a}},rL=function(e,t,r,n){for(var i,a,o=Array(r.k),s=0;s<o.length;s++)o[s]=[];for(var l=0;l<t.length;l++){i=-1/0,a=-1;for(var u=0;u<t[0].length;u++)t[l][u]>i&&(i=t[l][u],a=u);o[a].push(e[l])}for(var c=0;c<o.length;c++)o[c]=n.collection(o[c]);return o},rO=function(e){var t,r,n,i,a=this.cy(),o=this.nodes(),s=rC(e);n=Array(o.length);for(var l=0;l<o.length;l++)n[l]=Array(s.k);r=Array(o.length);for(var u=0;u<o.length;u++)r[u]=Array(s.k);for(var c=0;c<o.length;c++){for(var d=0,h=0;h<s.k;h++)r[c][h]=Math.random(),d+=r[c][h];for(var f=0;f<s.k;f++)r[c][f]=r[c][f]/d}t=Array(s.k);for(var p=0;p<s.k;p++)t[p]=Array(s.attributes.length);i=Array(o.length);for(var v=0;v<o.length;v++)i[v]=Array(s.k);for(var g=!0,y=0;g&&y<s.maxIterations;)g=!1,rN(t,o,r,i,s),rI(r,n,t,o,s),rD(r,n,s.sensitivityThreshold)||(g=!0),y++;return{clusters:rL(o,r,s,a),degreeOfMembership:r}},rz=eq({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),rj={single:"min",complete:"max"},rV=function(e){var t=rz(e),r=rj[t.linkage];return null!=r&&(t.linkage=r),t},rF=function(e,t,r,n,i){for(var a,o,s=0,l=1/0,u=i.attributes,c=function(e,t){return rk(i.distance,u.length,function(t){return u[t](e)},function(e){return u[e](t)},e,t)},d=0;d<e.length;d++){var h=e[d].key,f=r[h][n[h]];f<l&&(s=h,l=f)}if("threshold"===i.mode&&l>=i.threshold||"dendrogram"===i.mode&&1===e.length)return!1;var p=t[s],v=t[n[s]];o="dendrogram"===i.mode?{left:p,right:v,key:p.key}:{value:p.value.concat(v.value),key:p.key},e[p.index]=o,e.splice(v.index,1),t[p.key]=o;for(var g=0;g<e.length;g++){var y=e[g];p.key===y.key?a=1/0:"min"===i.linkage?(a=r[p.key][y.key],r[p.key][y.key]>r[v.key][y.key]&&(a=r[v.key][y.key])):"max"===i.linkage?(a=r[p.key][y.key],r[p.key][y.key]<r[v.key][y.key]&&(a=r[v.key][y.key])):a="mean"===i.linkage?(r[p.key][y.key]*p.size+r[v.key][y.key]*v.size)/(p.size+v.size):"dendrogram"===i.mode?c(y.value,p.value):c(y.value[0],p.value[0]),r[p.key][y.key]=r[y.key][p.key]=a}for(var b=0;b<e.length;b++){var x=e[b].key;if(n[x]===p.key||n[x]===v.key){for(var w=x,E=0;E<e.length;E++){var k=e[E].key;r[x][k]<r[x][w]&&(w=k)}n[x]=w}e[b].index=b}return p.key=v.key=p.index=v.index=null,!0},rX=function(e,t,r){e&&(e.value?t.push(e.value):(e.left&&rX(e.left,t),e.right&&rX(e.right,t)))},rq=function(e,t){if(!e)return"";if(e.left&&e.right){var r=rq(e.left,t),n=rq(e.right,t),i=t.add({group:"nodes",data:{id:r+","+n}});return t.add({group:"edges",data:{source:r,target:i.id()}}),t.add({group:"edges",data:{source:n,target:i.id()}}),i.id()}if(e.value)return e.value.id()},rY=function(e,t,r){if(!e)return[];var n=[],i=[],a=[];if(0===t)return e.left&&rX(e.left,n),e.right&&rX(e.right,i),a=n.concat(i),[r.collection(a)];if(1===t)if(e.value)return[r.collection(e.value)];else return e.left&&rX(e.left,n),e.right&&rX(e.right,i),[r.collection(n),r.collection(i)];return e.value?[r.collection(e.value)]:(e.left&&(n=rY(e.left,t-1,r)),e.right&&(i=rY(e.right,t-1,r)),n.concat(i))},rW=function(e){for(var t,r=this.cy(),n=this.nodes(),i=rV(e),a=i.attributes,o=function(e,t){return rk(i.distance,a.length,function(t){return a[t](e)},function(e){return a[e](t)},e,t)},s=[],l=[],u=[],c=[],d=0;d<n.length;d++){var h={value:"dendrogram"===i.mode?n[d]:[n[d]],key:d,index:d};s[d]=h,c[d]=h,l[d]=[],u[d]=0}for(var f=0;f<s.length;f++)for(var p=0;p<=f;p++){var v=void 0;v="dendrogram"===i.mode?f===p?1/0:o(s[f].value,s[p].value):f===p?1/0:o(s[f].value[0],s[p].value[0]),l[f][p]=v,l[p][f]=v,v<l[f][u[f]]&&(u[f]=p)}for(var g=rF(s,c,l,u,i);g;)g=rF(s,c,l,u,i);return"dendrogram"===i.mode?(t=rY(s[0],i.dendrogramDepth,r),i.addDendrogram&&rq(s[0],r)):(t=Array(s.length),s.forEach(function(e,n){e.key=e.index=null,t[n]=r.collection(e.value)})),t},rU=eq({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),rG=function(e){var t=e.damping,r=e.preference;.5<=t&&t<1||eL("Damping must range on [0.5, 1).  Got: ".concat(t));var n=["median","mean","min","max"];return n.some(function(e){return e===r})||M(r)||eL("Preference must be one of [".concat(n.map(function(e){return"'".concat(e,"'")}).join(", "),"] or a number.  Got: ").concat(r)),rU(e)},rH=function(e,t,r,n){var i=function(e,t){return n[t](e)};return-rk(e,n.length,function(e){return i(t,e)},function(e){return i(r,e)},t,r)},rK=function(e,t){return"median"===t?tl(e):"mean"===t?ts(e):"min"===t?ta(e):"max"===t?to(e):t},rZ=function(e,t,r){for(var n=[],i=0;i<e;i++)t[i*e+i]+r[i*e+i]>0&&n.push(i);return n},r$=function(e,t,r){for(var n=[],i=0;i<e;i++){for(var a=-1,o=-1/0,s=0;s<r.length;s++){var l=r[s];t[i*e+l]>o&&(a=l,o=t[i*e+l])}a>0&&n.push(a)}for(var u=0;u<r.length;u++)n[r[u]]=r[u];return n},rQ=function(e,t,r){for(var n=r$(e,t,r),i=0;i<r.length;i++){for(var a=[],o=0;o<n.length;o++)n[o]===r[i]&&a.push(o);for(var s=-1,l=-1/0,u=0;u<a.length;u++){for(var c=0,d=0;d<a.length;d++)c+=t[a[d]*e+a[u]];c>l&&(s=u,l=c)}r[i]=a[s]}return r$(e,t,r)},rJ=function(e){for(var t,r,n,i,a,o,s,l=this.cy(),u=this.nodes(),c=rG(e),d={},h=0;h<u.length;h++)d[u[h].id()]=h;n=Array(r=(t=u.length)*t);for(var f=0;f<r;f++)n[f]=-1/0;for(var p=0;p<t;p++)for(var v=0;v<t;v++)p!==v&&(n[p*t+v]=rH(c.distance,u[p],u[v],c.attributes));i=rK(n,c.preference);for(var g=0;g<t;g++)n[g*t+g]=i;a=Array(r);for(var y=0;y<r;y++)a[y]=0;o=Array(r);for(var b=0;b<r;b++)o[b]=0;for(var x=Array(t),w=Array(t),E=Array(t),k=0;k<t;k++)x[k]=0,w[k]=0,E[k]=0;for(var _=Array(t*c.minIterations),C=0;C<_.length;C++)_[C]=0;for(s=0;s<c.maxIterations;s++){for(var T=0;T<t;T++){for(var P=-1/0,S=-1/0,B=-1,D=0,A=0;A<t;A++)x[A]=a[T*t+A],(D=o[T*t+A]+n[T*t+A])>=P?(S=P,P=D,B=A):D>S&&(S=D);for(var M=0;M<t;M++)a[T*t+M]=(1-c.damping)*(n[T*t+M]-P)+c.damping*x[M];a[T*t+B]=(1-c.damping)*(n[T*t+B]-S)+c.damping*x[B]}for(var R=0;R<t;R++){for(var N=0,I=0;I<t;I++)x[I]=o[I*t+R],w[I]=Math.max(0,a[I*t+R]),N+=w[I];N-=w[R],w[R]=a[R*t+R],N+=w[R];for(var L=0;L<t;L++)o[L*t+R]=(1-c.damping)*Math.min(0,N-w[L])+c.damping*x[L];o[R*t+R]=(1-c.damping)*(N-w[R])+c.damping*x[R]}for(var O=0,z=0;z<t;z++){var j=+(o[z*t+z]+a[z*t+z]>0);_[s%c.minIterations*t+z]=j,O+=j}if(O>0&&(s>=c.minIterations-1||s==c.maxIterations-1)){for(var V=0,F=0;F<t;F++){E[F]=0;for(var X=0;X<c.minIterations;X++)E[F]+=_[X*t+F];(0===E[F]||E[F]===c.minIterations)&&V++}if(V===t)break}}for(var q=rZ(t,a,o),Y=rQ(t,n,q),W={},U=0;U<q.length;U++)W[q[U]]=[];for(var G=0;G<u.length;G++){var H=Y[d[u[G].id()]];null!=H&&W[H].push(u[G])}for(var K=Array(q.length),Z=0;Z<q.length;Z++)K[Z]=l.collection(W[q[Z]]);return K},r0=eq({root:void 0,directed:!1}),r1=function(){var e=this,t={},r=0,n=0,i=[],a=[],o={},s=function(r,n){for(var o=a.length-1,s=[],l=e.spawn();a[o].x!=r||a[o].y!=n;)s.push(a.pop().edge),o--;s.push(a.pop().edge),s.forEach(function(r){var n=r.connectedNodes().intersection(e);l.merge(r),n.forEach(function(r){var n=r.id(),i=r.connectedEdges().intersection(e);l.merge(r),t[n].cutVertex?l.merge(i.filter(function(e){return e.isLoop()})):l.merge(i)})}),i.push(l)},l=function(u,c,d){u===d&&(n+=1),t[c]={id:r,low:r++,cutVertex:!1};var h,f,p,v,g=e.getElementById(c).connectedEdges().intersection(e);0===g.size()?i.push(e.spawn(e.getElementById(c))):g.forEach(function(e){h=e.source().id(),f=e.target().id(),(p=h===c?f:h)!==d&&(o[v=e.id()]||(o[v]=!0,a.push({x:c,y:p,edge:e})),p in t?t[c].low=Math.min(t[c].low,t[p].id):(l(u,p,c),t[c].low=Math.min(t[c].low,t[p].low),t[c].id<=t[p].low&&(t[c].cutVertex=!0,s(c,p))))})};e.forEach(function(e){if(e.isNode()){var r=e.id();r in t||(n=0,l(r,r),t[r].cutVertex=n>1)}});var u=Object.keys(t).filter(function(e){return t[e].cutVertex}).map(function(t){return e.getElementById(t)});return{cut:e.spawn(u),components:i}},r2=function(){var e=this,t={},r=0,n=[],i=[],a=e.spawn(e),o=function(s){if(i.push(s),t[s]={index:r,low:r++,explored:!1},e.getElementById(s).connectedEdges().intersection(e).forEach(function(e){var r=e.target().id();r!==s&&(r in t||o(r),t[r].explored||(t[s].low=Math.min(t[s].low,t[r].low)))}),t[s].index===t[s].low){for(var l=e.spawn();;){var u=i.pop();if(l.merge(e.getElementById(u)),t[u].low=t[s].index,t[u].explored=!0,u===s)break}var c=l.edgesWith(l),d=l.merge(c);n.push(d),a=a.difference(d)}};return e.forEach(function(e){if(e.isNode()){var r=e.id();r in t||o(r)}}),{cut:a,components:n}},r5={};[e1,{dijkstra:function(e){if(!A(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var r=e4(e),n=r.root,i=r.weight,a=r.directed,o=this,s=S(n)?this.filter(n)[0]:n[0],l={},u={},c={},d=this.byGroup(),h=d.nodes,f=d.edges;f.unmergeBy(function(e){return e.isLoop()});for(var p=function(e){return l[e.id()]},v=new e3(function(e,t){return p(e)-p(t)}),g=0;g<h.length;g++){var y=h[g];l[y.id()]=y.same(s)?0:1/0,v.push(y)}for(;v.size()>0;){var b=v.pop(),x=p(b);if(c[b.id()]=x,x!==1/0)for(var w=b.neighborhood().intersect(h),E=0;E<w.length;E++){var k=w[E],_=k.id(),C=function(e,t){for(var r,n=(a?e.edgesTo(t):e.edgesWith(t)).intersect(f),o=1/0,s=0;s<n.length;s++){var l=n[s],u=i(l);(u<o||!r)&&(o=u,r=l)}return{edge:r,dist:o}}(b,k),T=x+C.dist;T<p(k)&&(l[k.id()]=T,v.updateItem(k),u[_]={node:b,edge:C.edge})}}return{distanceTo:function(e){return c[(S(e)?h.filter(e)[0]:e[0]).id()]},pathTo:function(e){var t=S(e)?h.filter(e)[0]:e[0],r=[],n=t,i=n.id();if(t.length>0)for(r.unshift(t);u[i];){var a=u[i];r.unshift(a.edge),r.unshift(a.node),i=(n=a.node).id()}return o.spawn(r)}}}},{kruskal:function(e){e=e||function(e){return 1};for(var t=this.byGroup(),r=t.nodes,n=t.edges,i=r.length,a=Array(i),o=function(e){for(var t=0;t<a.length;t++)if(a[t].has(e))return t},s=0;s<i;s++)a[s]=this.spawn(r[s]);for(var l=n.sort(function(t,r){return e(t)-e(r)}),u=0;u<l.length;u++){var c=l[u],d=c.source()[0],h=c.target()[0],f=o(d),p=o(h),v=a[f],g=a[p];f!==p&&(r.merge(c),v.merge(g),a.splice(p,1))}return r}},{aStar:function(e){var t,r,n=this.cy(),i=e9(e),a=i.root,o=i.goal,s=i.heuristic,l=i.directed,u=i.weight;a=n.collection(a)[0],o=n.collection(o)[0];var c=a.id(),d=o.id(),h={},f={},p={},v=new e3(function(e,t){return f[e.id()]-f[t.id()]}),g=new eQ,y={},b={},x=function(e,t){v.push(e),g.add(t)};x(a,c),h[c]=0,f[c]=s(a);for(var w=0;v.size()>0;){if(r=(t=v.pop()).id(),g.delete(r),w++,r===d){for(var E=[],k=o,_=d,C=b[_];E.unshift(k),null!=C&&E.unshift(C),null!=(k=y[_]);)C=b[_=k.id()];return{found:!0,distance:h[r],path:this.spawn(E),steps:w}}p[r]=!0;for(var T=t._private.edges,P=0;P<T.length;P++){var S=T[P];if(this.hasElementWithId(S.id())&&(!l||S.data("source")===r)){var B=S.source(),D=S.target(),A=B.id()!==r?B:D,M=A.id();if(this.hasElementWithId(M)&&!p[M]){var R=h[r]+u(S);if(!g.has(M)){h[M]=R,f[M]=R+s(A),x(A,M),y[M]=t,b[M]=S;continue}R<h[M]&&(h[M]=R,f[M]=R+s(A),y[M]=t,b[M]=S)}}}}return{found:!1,distance:void 0,path:void 0,steps:w}}},{floydWarshall:function(e){for(var t=this.cy(),r=e6(e),n=r.weight,i=r.directed,a=this.byGroup(),o=a.nodes,s=a.edges,l=o.length,u=l*l,c=function(e){return o.indexOf(e)},d=function(e){return o[e]},h=Array(u),f=0;f<u;f++){var p=f%l;(f-p)/l===p?h[f]=0:h[f]=1/0}for(var v=Array(u),g=Array(u),y=0;y<s.length;y++){var b=s[y],x=b.source()[0],w=b.target()[0];if(x!==w){var E=c(x),k=c(w),_=E*l+k,C=n(b);if(h[_]>C&&(h[_]=C,v[_]=k,g[_]=b),!i){var T=k*l+E;!i&&h[T]>C&&(h[T]=C,v[T]=E,g[T]=b)}}}for(var P=0;P<l;P++)for(var B=0;B<l;B++)for(var D=B*l+P,A=0;A<l;A++){var M=B*l+A,R=P*l+A;h[D]+h[R]<h[M]&&(h[M]=h[D]+h[R],v[M]=v[D])}var N=function(e){return c((S(e)?t.filter(e):e)[0])};return{distance:function(e,t){return h[N(e)*l+N(t)]},path:function(e,r){var n,i=N(e),a=N(r),o=d(i);if(i===a)return o.collection();if(null==v[i*l+a])return t.collection();var s=t.collection(),u=i;for(s.merge(o);i!==a;)u=i,i=v[i*l+a],n=g[u*l+i],s.merge(n),s.merge(d(i));return s}}}},{bellmanFord:function(e){var t=this,r=e7(e),n=r.weight,i=r.directed,a=r.root,o=this,s=this.cy(),l=this.byGroup(),u=l.edges,c=l.nodes,d=c.length,h=new eZ,f=!1,p=[];a=s.collection(a)[0],u.unmergeBy(function(e){return e.isLoop()});for(var v=u.length,g=function(e){var t=h.get(e.id());return t||(t={},h.set(e.id(),t)),t},y=function(e){return(S(e)?s.$(e):e)[0]},b=0;b<d;b++){var x=c[b],w=g(x);x.same(a)?w.dist=0:w.dist=1/0,w.pred=null,w.edge=null}for(var E=!1,k=function(e,t,r,n,i,a){var o=n.dist+a;o<i.dist&&!r.same(n.edge)&&(i.dist=o,i.pred=e,i.edge=r,E=!0)},_=1;_<d;_++){E=!1;for(var C=0;C<v;C++){var T=u[C],P=T.source(),B=T.target(),D=n(T),A=g(P),M=g(B);k(P,B,T,A,M,D),i||k(B,P,T,M,A,D)}if(!E)break}if(E)for(var R=[],N=0;N<v;N++){var I=u[N],L=I.source(),O=I.target(),z=n(I),j=g(L).dist,V=g(O).dist;if(j+z<V||!i&&V+z<j)if(f||(ez("Graph contains a negative weight cycle for Bellman-Ford"),f=!0),!1!==e.findNegativeWeightCycles){var F=[];j+z<V&&F.push(L),!i&&V+z<j&&F.push(O);for(var X=F.length,q=0;q<X;q++){var Y=F[q],W=[Y];W.push(g(Y).edge);for(var U=g(Y).pred;-1===W.indexOf(U);)W.push(U),W.push(g(U).edge),U=g(U).pred;for(var G=(W=W.slice(W.indexOf(U)))[0].id(),H=0,K=2;K<W.length;K+=2)W[K].id()<G&&(G=W[K].id(),H=K);(W=W.slice(H).concat(W.slice(0,H))).push(W[0]);var Z=W.map(function(e){return e.id()}).join(",");-1===R.indexOf(Z)&&(p.push(o.spawn(W)),R.push(Z))}}else break}return{distanceTo:function(e){return g(y(e)).dist},pathTo:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=y(e),i=[],s=n;;){if(null==s)return t.spawn();var l=g(s),u=l.edge,c=l.pred;if(i.unshift(s[0]),s.same(r)&&i.length>0)break;null!=u&&i.unshift(u),s=c}return o.spawn(i)},hasNegativeWeightCycle:f,negativeWeightCycles:p}}},{kargerStein:function(){var e=this,t=this.byGroup(),r=t.nodes,n=t.edges;n.unmergeBy(function(e){return e.isLoop()});var i=r.length,a=n.length,o=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),s=Math.floor(i/e8);if(i<2)return void eL("At least 2 nodes are required for Karger-Stein algorithm");for(var l=[],u=0;u<a;u++){var c=n[u];l.push([u,r.indexOf(c.source()),r.indexOf(c.target())])}for(var d=1/0,h=[],f=Array(i),p=Array(i),v=Array(i),g=function(e,t){for(var r=0;r<i;r++)t[r]=e[r]},y=0;y<=o;y++){for(var b=0;b<i;b++)p[b]=b;var x=tt(p,l.slice(),i,s),w=x.slice();g(p,v);var E=tt(p,x,s,2),k=tt(v,w,s,2);E.length<=k.length&&E.length<d?(d=E.length,h=E,g(p,f)):k.length<=E.length&&k.length<d&&(d=k.length,h=k,g(v,f))}for(var _=this.spawn(h.map(function(e){return n[e[0]]})),C=this.spawn(),T=this.spawn(),P=f[0],S=0;S<f.length;S++){var B=f[S],D=r[S];B===P?C.merge(D):T.merge(D)}var A=function(t){var r=e.spawn();return t.forEach(function(t){r.merge(t),t.connectedEdges().forEach(function(t){e.contains(t)&&!_.contains(t)&&r.merge(t)})}),r};return{cut:_,components:[A(C),A(T)],partition1:C,partition2:T}}},{pageRank:function(e){for(var t,r=t9(e),n=r.dampingFactor,i=r.precision,a=r.iterations,o=r.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,c=l.edges,d=u.length,h=d*d,f=c.length,p=Array(h),v=Array(d),g=(1-n)/d,y=0;y<d;y++){for(var b=0;b<d;b++)p[y*d+b]=0;v[y]=0}for(var x=0;x<f;x++){var w=c[x],E=w.data("source"),k=w.data("target");if(E!==k){var _=u.indexOfId(E),C=u.indexOfId(k),T=o(w),P=C*d+_;p[P]+=T,v[_]+=T}}for(var S=1/d+g,B=0;B<d;B++)if(0===v[B])for(var D=0;D<d;D++)p[D*d+B]=S;else for(var A=0;A<d;A++){var M=A*d+B;p[M]=p[M]/v[B]+g}for(var R=Array(d),N=Array(d),I=0;I<d;I++)R[I]=1;for(var L=0;L<a;L++){for(var O=0;O<d;O++)N[O]=0;for(var z=0;z<d;z++)for(var j=0;j<d;j++){var V=z*d+j;N[z]+=p[V]*R[j]}tp(N),t=R,R=N,N=t;for(var F=0,X=0;X<d;X++){var q=t[X]-R[X];F+=q*q}if(F<i)break}return{rank:function(e){return e=s.collection(e)[0],R[u.indexOf(e)]}}}},t7,re,rr,{markovClustering:rp,mcl:rp},{kMeans:function(e){var t,r=this.cy(),n=this.nodes(),i=null,a=rC(e),o=Array(a.k),s={};a.testMode?"number"==typeof a.testCentroids?(a.testCentroids,t=rP(n,a.k,a.attributes)):t="object"===b(a.testCentroids)?a.testCentroids:rP(n,a.k,a.attributes):t=rP(n,a.k,a.attributes);for(var l=!0,u=0;l&&u<a.maxIterations;){for(var c=0;c<n.length;c++)s[(i=n[c]).id()]=rS(i,t,a.distance,a.attributes,"kMeans");l=!1;for(var d=0;d<a.k;d++){var h=rB(d,n,s);if(0!==h.length){for(var f=a.attributes.length,p=t[d],v=Array(f),g=Array(f),y=0;y<f;y++){g[y]=0;for(var x,w=0;w<h.length;w++)i=h[w],g[y]+=a.attributes[y](i);v[y]=g[y]/h.length,x=v[y],Math.abs(p[y]-x)<=a.sensitivityThreshold||(l=!0)}t[d]=v,o[d]=r.collection(h)}}u++}return o},kMedoids:function(e){var t,r,n=this.cy(),i=this.nodes(),a=null,o=rC(e),s=Array(o.k),l={},u=Array(o.k);o.testMode?"number"==typeof o.testCentroids||(t="object"===b(o.testCentroids)?o.testCentroids:rM(i,o.k)):t=rM(i,o.k);for(var c=!0,d=0;c&&d<o.maxIterations;){for(var h=0;h<i.length;h++)l[(a=i[h]).id()]=rS(a,t,o.distance,o.attributes,"kMedoids");c=!1;for(var f=0;f<t.length;f++){var p=rB(f,i,l);if(0!==p.length){u[f]=rR(t[f],p,o.attributes);for(var v=0;v<p.length;v++)(r=rR(p[v],p,o.attributes))<u[f]&&(u[f]=r,t[f]=p[v],c=!0);s[f]=n.collection(p)}}d++}return s},fuzzyCMeans:rO,fcm:rO},{hierarchicalClustering:rW,hca:rW},{affinityPropagation:rJ,ap:rJ},{hierholzer:function(e){if(!A(e)){var t,r,n,i=arguments;e={root:i[0],directed:i[1]}}var a=r0(e),o=a.root,s=a.directed,l=!1;o&&(n=S(o)?this.filter(o)[0].id():o[0].id());var u={},c={};s?this.forEach(function(e){var n=e.id();if(e.isNode()){var i=e.indegree(!0),a=e.outdegree(!0),o=i-a,s=a-i;1==o?t?l=!0:t=n:1==s?r?l=!0:r=n:(s>1||o>1)&&(l=!0),u[n]=[],e.outgoers().forEach(function(e){e.isEdge()&&u[n].push(e.id())})}else c[n]=[void 0,e.target().id()]}):this.forEach(function(e){var n=e.id();e.isNode()?(e.degree(!0)%2&&(t?r?l=!0:r=n:t=n),u[n]=[],e.connectedEdges().forEach(function(e){return u[n].push(e.id())})):c[n]=[e.source().id(),e.target().id()]});var d={found:!1,trail:void 0};if(l)return d;if(r&&t)if(s){if(n&&r!=n)return d;n=r}else{if(n&&r!=n&&t!=n)return d;n||(n=r)}else n||(n=this[0].id());var h=function(e){for(var t,r,n,i=e,a=[e];u[i].length;)r=c[t=u[i].shift()][0],i!=(n=c[t][1])?(u[n]=u[n].filter(function(e){return e!=t}),i=n):s||i==r||(u[r]=u[r].filter(function(e){return e!=t}),i=r),a.unshift(t),a.unshift(i);return a},f=[],p=[];for(p=h(n);1!=p.length;)0==u[p[0]].length?(f.unshift(this.getElementById(p.shift())),f.unshift(this.getElementById(p.shift()))):p=h(p.shift()).concat(p);for(var v in f.unshift(this.getElementById(p.shift())),u)if(u[v].length)return d;return d.found=!0,d.trail=this.spawn(f,!0),d}},{hopcroftTarjanBiconnected:r1,htbc:r1,htb:r1,hopcroftTarjanBiconnectedComponents:r1},{tarjanStronglyConnected:r2,tsc:r2,tscc:r2,tarjanStronglyConnectedComponents:r2}].forEach(function(e){J(r5,e)});var r3=function(e){if(!(this instanceof r3))return new r3(e);this.id="Thenable/1.0.7",this.state=0,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},"function"==typeof e&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};r3.prototype={fulfill:function(e){return r4(this,1,"fulfillValue",e)},reject:function(e){return r4(this,2,"rejectReason",e)},then:function(e,t){var r=new r3;return this.onFulfilled.push(r7(e,r,"fulfill")),this.onRejected.push(r7(t,r,"reject")),r9(this),r.proxy}};var r4=function(e,t,r,n){return 0===e.state&&(e.state=t,e[r]=n,r9(e)),e},r9=function(e){1===e.state?r6(e,"onFulfilled",e.fulfillValue):2===e.state&&r6(e,"onRejected",e.rejectReason)},r6=function(e,t,r){if(0!==e[t].length){var n=e[t];e[t]=[];var i=function(){for(var e=0;e<n.length;e++)n[e](r)};"function"==typeof setImmediate?setImmediate(i):setTimeout(i,0)}},r7=function(e,t,r){return function(n){if("function"!=typeof e)t[r].call(t,n);else{var i;try{i=e(n)}catch(e){t.reject(e);return}r8(t,i)}}},r8=function(e,t){if(e===t||e.proxy===t)return void e.reject(TypeError("cannot resolve promise with itself"));if("object"===b(t)&&null!==t||"function"==typeof t)try{r=t.then}catch(t){e.reject(t);return}if("function"==typeof r){var r,n=!1;try{r.call(t,function(r){n||(n=!0,r===t?e.reject(TypeError("circular thenable chain")):r8(e,r))},function(t){n||(n=!0,e.reject(t))})}catch(t){n||e.reject(t)}return}e.fulfill(t)};r3.all=function(e){return new r3(function(t,r){for(var n=Array(e.length),i=0,a=function(r,a){n[r]=a,++i===e.length&&t(n)},o=0;o<e.length;o++)!function(t){var n=e[t];null!=n&&null!=n.then?n.then(function(e){a(t,e)},function(e){r(e)}):a(t,n)}(o)})},r3.resolve=function(e){return new r3(function(t,r){t(e)})},r3.reject=function(e){return new r3(function(t,r){r(e)})};var ne="undefined"!=typeof Promise?Promise:r3,nt=function(e,t,r){var n=O(e),i=this._private=J({duration:1e3},t,r);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&B(i.complete)&&i.completes.push(i.complete),!n){var a=e.position();i.startPosition=i.startPosition||{x:a.x,y:a.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(n){var o=e.pan();i.startPan={x:o.x,y:o.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},nr=nt.prototype;function nn(){return oM?oA:(oM=1,oA=Array.isArray)}function ni(){if(oH)return oG;oH=1;var e=function(){if(oY)return oq;oY=1;var e=function(){if(oL)return oI;oL=1;var e=eh(),t=eu();return oI=function(r){if(!t(r))return!1;var n=e(r);return"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n}}(),t=function(){if(oV)return oj;oV=1;var e,t=oz?oO:(oz=1,oO=ec()["__core-js_shared__"]),r=(e=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||""))?"Symbol(src)_1."+e:"";return oj=function(e){return!!r&&r in e}}(),r=eu(),n=function(){if(oX)return oF;oX=1;var e=Function.prototype.toString;return oF=function(t){if(null!=t){try{return e.call(t)}catch(e){}try{return t+""}catch(e){}}return""}}(),i=/^\[object .+?Constructor\]$/,a=Object.prototype,o=Function.prototype.toString,s=a.hasOwnProperty,l=RegExp("^"+o.call(s).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return oq=function(a){return!(!r(a)||t(a))&&(e(a)?l:i).test(n(a))}}(),t=oU?oW:(oU=1,oW=function(e,t){return null==e?void 0:e[t]});return oG=function(r,n){var i=t(r,n);return e(i)?i:void 0}}function na(){return oZ?oK:(oZ=1,oK=ni()(Object,"create"))}function no(){return sr?st:(sr=1,st=function(e,t){return e===t||e!=e&&t!=t})}function ns(){if(si)return sn;si=1;var e=no();return sn=function(t,r){for(var n=t.length;n--;)if(e(t[n][0],r))return n;return -1}}function nl(){if(sE)return sw;sE=1;var e=sx?sb:(sx=1,sb=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e});return sw=function(t,r){var n=t.__data__;return e(r)?n["string"==typeof r?"string":"hash"]:n.map}}function nu(){if(sz)return sO;sz=1;var e=function(){if(sL)return sI;sL=1;var e=function(){if(sN)return sR;sN=1;var e=function(){if(sM)return sA;sM=1;var e=function(){if(sm)return sy;sm=1;var e=function(){if(o7)return o6;o7=1;var e=function(){if(oQ)return o$;oQ=1;var e=na();return o$=function(){this.__data__=e?e(null):{},this.size=0}}(),t=o0?oJ:(o0=1,oJ=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=!!t,t}),r=function(){if(o2)return o1;o2=1;var e=na(),t=Object.prototype.hasOwnProperty;return o1=function(r){var n=this.__data__;if(e){var i=n[r];return"__lodash_hash_undefined__"===i?void 0:i}return t.call(n,r)?n[r]:void 0}}(),n=function(){if(o3)return o5;o3=1;var e=na(),t=Object.prototype.hasOwnProperty;return o5=function(r){var n=this.__data__;return e?void 0!==n[r]:t.call(n,r)}}(),i=function(){if(o9)return o4;o9=1;var e=na();return o4=function(t,r){var n=this.__data__;return this.size+=+!this.has(t),n[t]=e&&void 0===r?"__lodash_hash_undefined__":r,this}}();function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,o6=a}(),t=function(){if(sp)return sf;sp=1;var e=se?o8:(se=1,o8=function(){this.__data__=[],this.size=0}),t=function(){if(so)return sa;so=1;var e=ns(),t=Array.prototype.splice;return sa=function(r){var n=this.__data__,i=e(n,r);return!(i<0)&&(i==n.length-1?n.pop():t.call(n,i,1),--this.size,!0)}}(),r=function(){if(sl)return ss;sl=1;var e=ns();return ss=function(t){var r=this.__data__,n=e(r,t);return n<0?void 0:r[n][1]}}(),n=function(){if(sc)return su;sc=1;var e=ns();return su=function(t){return e(this.__data__,t)>-1}}(),i=function(){if(sh)return sd;sh=1;var e=ns();return sd=function(t,r){var n=this.__data__,i=e(n,t);return i<0?(++this.size,n.push([t,r])):n[i][1]=r,this}}();function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,sf=a}(),r=sg?sv:(sg=1,sv=ni()(ec(),"Map"));return sy=function(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}}(),t=function(){if(s_)return sk;s_=1;var e=nl();return sk=function(t){var r=e(this,t).delete(t);return this.size-=!!r,r}}(),r=function(){if(sT)return sC;sT=1;var e=nl();return sC=function(t){return e(this,t).get(t)}}(),n=function(){if(sS)return sP;sS=1;var e=nl();return sP=function(t){return e(this,t).has(t)}}(),i=function(){if(sD)return sB;sD=1;var e=nl();return sB=function(t,r){var n=e(this,t),i=n.size;return n.set(t,r),this.size+=+(n.size!=i),this}}();function a(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=r,a.prototype.has=n,a.prototype.set=i,sA=a}();function t(r,n){if("function"!=typeof r||null!=n&&"function"!=typeof n)throw TypeError("Expected a function");var i=function(){var e=arguments,t=n?n.apply(this,e):e[0],a=i.cache;if(a.has(t))return a.get(t);var o=r.apply(this,e);return i.cache=a.set(t,o)||a,o};return i.cache=new(t.Cache||e),i}return t.Cache=e,sR=t}();return sI=function(t){var r=e(t,function(e){return 500===n.size&&n.clear(),e}),n=r.cache;return r}}(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g;return sO=e(function(e){var n=[];return 46===e.charCodeAt(0)&&n.push(""),e.replace(t,function(e,t,i,a){n.push(i?a.replace(r,"$1"):t||e)}),n})}function nc(){return sV?sj:(sV=1,sj=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i})}function nd(){if(sY)return sq;sY=1;var e=function(){if(sX)return sF;sX=1;var e=ed(),t=nc(),r=nn(),n=ef(),i=e?e.prototype:void 0,a=i?i.toString:void 0;return sF=function e(i){if("string"==typeof i)return i;if(r(i))return t(i,e)+"";if(n(i))return a?a.call(i):"";var o=i+"";return"0"==o&&1/i==-1/0?"-0":o}}();return sq=function(t){return null==t?"":e(t)}}function nh(){if(sU)return sW;sU=1;var e=nn(),t=function(){if(oN)return oR;oN=1;var e=nn(),t=ef(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;return oR=function(i,a){if(e(i))return!1;var o=typeof i;return!!("number"==o||"symbol"==o||"boolean"==o||null==i||t(i))||n.test(i)||!r.test(i)||null!=a&&i in Object(a)}}(),r=nu(),n=nd();return sW=function(i,a){return e(i)?i:t(i,a)?[i]:r(n(i))}}function nf(){if(sH)return sG;sH=1;var e=ef();return sG=function(t){if("string"==typeof t||e(t))return t;var r=t+"";return"0"==r&&1/t==-1/0?"-0":r}}J(nr,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t=e.target._private.animation;(e.queue?t.queue:t.current).push(this),N(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return 1===e.progress&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return void 0===e?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,r=t.playing;return void 0===e?t.progress:(r&&this.pause(),t.progress=e,t.started=!1,r&&this.play(),this)},completed:function(){return 1===this._private.progress},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var r=function(t,r){var n=e[t];null!=n&&(e[t]=e[r],e[r]=n)};if(r("zoom","startZoom"),r("pan","startPan"),r("position","startPosition"),e.style)for(var n=0;n<e.style.length;n++){var i=e.style[n],a=i.name,o=e.startStyle[a];e.startStyle[a]=i,e.style[n]=o}return t&&this.play(),this},promise:function(e){var t,r=this._private;return t="frame"===e?r.frames:r.completes,new ne(function(e,r){t.push(function(){e()})})}}),nr.complete=nr.completed,nr.run=nr.play,nr.running=nr.playing;var np=el(function(){if(sQ)return s$;sQ=1;var e=function(){if(sZ)return sK;sZ=1;var e=nh(),t=nf();return sK=function(r,n){n=e(n,r);for(var i=0,a=n.length;null!=r&&i<a;)r=r[t(n[i++])];return i&&i==a?r:void 0}}();return s$=function(t,r,n){var i=null==t?void 0:e(t,r);return void 0===i?n:i}}()),nv=el(function(){if(le)return s8;le=1;var e=function(){if(s7)return s6;s7=1;var e=function(){if(s3)return s5;s3=1;var e=function(){if(s2)return s1;s2=1;var e=function(){if(s0)return sJ;s0=1;var e=ni();return sJ=function(){try{var t=e(Object,"defineProperty");return t({},"",{}),t}catch(e){}}()}();return s1=function(t,r,n){"__proto__"==r&&e?e(t,r,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[r]=n}}(),t=no(),r=Object.prototype.hasOwnProperty;return s5=function(n,i,a){var o=n[i];r.call(n,i)&&t(o,a)&&(void 0!==a||i in n)||e(n,i,a)}}(),t=nh(),r=function(){if(s9)return s4;s9=1;var e=/^(?:0|[1-9]\d*)$/;return s4=function(t,r){var n=typeof t;return!!(r=null==r?0x1fffffffffffff:r)&&("number"==n||"symbol"!=n&&e.test(t))&&t>-1&&t%1==0&&t<r}}(),n=eu(),i=nf();return s6=function(a,o,s,l){if(!n(a))return a;o=t(o,a);for(var u=-1,c=o.length,d=c-1,h=a;null!=h&&++u<c;){var f=i(o[u]),p=s;if("__proto__"===f||"constructor"===f||"prototype"===f)break;if(u!=d){var v=h[f];void 0===(p=l?l(v,f,h):void 0)&&(p=n(v)?v:r(o[u+1])?[]:{})}e(h,f,p),h=h[f]}return a}}();return s8=function(t,r,n){return null==t?t:e(t,r,n)}}()),ng=el(function(){if(li)return ln;li=1;var e=nc(),t=lr?lt:(lr=1,lt=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}),r=nn(),n=ef(),i=nu(),a=nf(),o=nd();return ln=function(s){return r(s)?e(s,a):n(s)?[s]:t(i(o(s)))}}()),ny={};[{animated:function(){return function(){var e=void 0!==this.length;if(!(this._private.cy||this).styleEnabled())return!1;var t=(e?this:[this])[0];if(t)return t._private.animation.current.length>0}},clearQueue:function(){return function(){var e=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;for(var t=0;t<e.length;t++)e[t]._private.animation.queue=[];return this}},delay:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animate({delay:e,duration:e,complete:t}):this}},delayAnimation:function(){return function(e,t){return(this._private.cy||this).styleEnabled()?this.animation({delay:e,duration:e,complete:t}):this}},animation:function(){return function(e,t){var r=void 0!==this.length,n=r?this:[this],i=this._private.cy||this,a=!r,o=!a;if(!i.styleEnabled())return this;var s=i.style();if(0===Object.keys(e=J({},e,t)).length)return new nt(n[0],e);switch(void 0===e.duration&&(e.duration=400),e.duration){case"slow":e.duration=600;break;case"fast":e.duration=200}if(o&&(e.style=s.getPropsList(e.style||e.css),e.css=void 0),o&&null!=e.renderedPosition){var l=e.renderedPosition,u=i.pan(),c=i.zoom();e.position=tn(l,c,u)}if(a&&null!=e.panBy){var d=e.panBy,h=i.pan();e.pan={x:h.x+d.x,y:h.y+d.y}}var f=e.center||e.centre;if(a&&null!=f){var p=i.getCenterPan(f.eles,e.zoom);null!=p&&(e.pan=p)}if(a&&null!=e.fit){var v=e.fit,g=i.getFitViewport(v.eles||v.boundingBox,v.padding);null!=g&&(e.pan=g.pan,e.zoom=g.zoom)}if(a&&A(e.zoom)){var y=i.getZoomedViewport(e.zoom);null!=y?(y.zoomed&&(e.zoom=y.zoom),y.panned&&(e.pan=y.pan)):e.zoom=null}return new nt(n[0],e)}},animate:function(){return function(e,t){var r=void 0!==this.length?this:[this];if(!(this._private.cy||this).styleEnabled())return this;t&&(e=J({},e,t));for(var n=0;n<r.length;n++){var i=r[n],a=i.animated()&&(void 0===e.queue||e.queue);i.animation(e,a?{queue:!0}:void 0).play()}return this}},stop:function(){return function(e,t){var r=void 0!==this.length?this:[this],n=this._private.cy||this;if(!n.styleEnabled())return this;for(var i=0;i<r.length;i++){for(var a=r[i]._private,o=a.animation.current,s=0;s<o.length;s++){var l=o[s]._private;t&&(l.duration=0)}e&&(a.animation.queue=[]),t||(a.animation.current=[])}return n.notify("draw"),this}}},{data:function(e){return e=J({},{field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(e){},beforeSet:function(e,t){},onSet:function(e){},canSet:function(e){return!0}},e),function(t,r){var n,i=e,a=void 0!==this.length,o=a?this:[this],s=a?this[0]:this;if(S(t)){var l,u=-1!==t.indexOf(".")&&ng(t);if(i.allowGetting&&void 0===r)return s&&(i.beforeGet(s),l=u&&void 0===s._private[i.field][t]?np(s._private[i.field],u):s._private[i.field][t]),l;if(i.allowSetting&&void 0!==r&&!i.immutableKeys[t]){var c=p({},t,r);i.beforeSet(this,c);for(var d=0,h=o.length;d<h;d++){var f=o[d];i.canSet(f)&&(u&&void 0===s._private[i.field][t]?nv(f._private[i.field],u,r):f._private[i.field][t]=r)}i.updateStyle&&this.updateStyle(),i.onSet(this),i.settingTriggersEvent&&this[i.triggerFnName](i.settingEvent)}}else if(i.allowSetting&&A(t)){var v,g,y=Object.keys(t);i.beforeSet(this,t);for(var b=0;b<y.length;b++)if(g=t[v=y[b]],!i.immutableKeys[v])for(var x=0;x<o.length;x++){var w=o[x];i.canSet(w)&&(w._private[i.field][v]=g)}i.updateStyle&&this.updateStyle(),i.onSet(this),i.settingTriggersEvent&&this[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&B(t))this.on(i.bindingEvent,t);else if(i.allowGetting&&void 0===t)return s&&(i.beforeGet(s),n=s._private[i.field]),n;return this}},removeData:function(e){return e=J({},{field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}},e),function(t){var r=e,n=void 0!==this.length?this:[this];if(S(t)){for(var i=t.split(/\s+/),a=i.length,o=0;o<a;o++){var s=i[o];if(!j(s)&&!r.immutableKeys[s])for(var l=0,u=n.length;l<u;l++)n[l]._private[r.field][s]=void 0}r.triggerEvent&&this[r.triggerFnName](r.event)}else if(void 0===t){for(var c=0,d=n.length;c<d;c++)for(var h=n[c]._private[r.field],f=Object.keys(h),p=0;p<f.length;p++){var v=f[p];r.immutableKeys[v]||(h[v]=void 0)}r.triggerEvent&&this[r.triggerFnName](r.event)}return this}}},{eventAliasesOn:function(e){e.addListener=e.listen=e.bind=e.on,e.unlisten=e.unbind=e.off=e.removeListener,e.trigger=e.emit,e.pon=e.promiseOn=function(e,t){var r=this,n=Array.prototype.slice.call(arguments,0);return new ne(function(e,t){var i=n.concat([function(t){r.off.apply(r,a),e(t)}]),a=i.concat([]);r.on.apply(r,i)})}}}].forEach(function(e){J(ny,e)});var nm={animate:ny.animate(),animation:ny.animation(),animated:ny.animated(),clearQueue:ny.clearQueue(),delay:ny.delay(),delayAnimation:ny.delayAnimation(),stop:ny.stop()},nb={classes:function(e){if(void 0===e){var t=[];return this[0]._private.classes.forEach(function(e){return t.push(e)}),t}D(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],n=new eQ(e),i=0;i<this.length;i++){for(var a=this[i],o=a._private,s=o.classes,l=!1,u=0;u<e.length;u++){var c=e[u];if(!s.has(c)){l=!0;break}}l||(l=s.size!==e.length),l&&(o.classes=n,r.push(a))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),this},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return null!=t&&t._private.classes.has(e)},toggleClass:function(e,t){D(e)||(e=e.match(/\S+/g)||[]);for(var r=void 0===t,n=[],i=0,a=this.length;i<a;i++)for(var o=this[i],s=o._private.classes,l=!1,u=0;u<e.length;u++){var c=e[u],d=s.has(c),h=!1;t||r&&!d?(s.add(c),h=!0):(!t||r&&d)&&(s.delete(c),h=!0),!l&&h&&(n.push(o),l=!0)}return n.length>0&&this.spawn(n).updateStyle().emit("class"),this},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var r=this;if(null==t)t=250;else if(0===t)return r;return r.addClass(e),setTimeout(function(){r.removeClass(e)},t),r}};nb.className=nb.classNames=nb.classes;var nx={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:"\"(?:\\\\\"|[^\"])*\"|'(?:\\\\'|[^'])*'",number:G,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};for(a7=0,nx.variable="(?:[\\w-.]|(?:\\\\"+nx.metaChar+"))+",nx.className="(?:[\\w-]|(?:\\\\"+nx.metaChar+"))+",nx.value=nx.string+"|"+nx.number,nx.id=nx.variable,a9=nx.comparatorOp.split("|");a7<a9.length;a7++)a6=a9[a7],nx.comparatorOp+="|@"+a6;for(a7=0,a9=nx.comparatorOp.split("|");a7<a9.length;a7++)(a6=a9[a7]).indexOf("!")>=0||"="!==a6&&(nx.comparatorOp+="|\\!"+a6);var nw=function(){return{checks:[]}},nE=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(e,t){return -1*Q(e.selector,t.selector)}),nk=function(){for(var e,t={},r=0;r<nE.length;r++)t[(e=nE[r]).selector]=e.matches;return t}(),n_="("+nE.map(function(e){return e.selector}).join("|")+")",nC=function(e){return e.replace(RegExp("\\\\("+nx.metaChar+")","g"),function(e,t){return t})},nT=function(e,t,r){e[e.length-1]=r},nP=[{name:"group",query:!0,regex:"("+nx.group+")",populate:function(e,t,r){var n=v(r,1)[0];t.checks.push({type:0,value:"*"===n?n:n+"s"})}},{name:"state",query:!0,regex:n_,populate:function(e,t,r){var n=v(r,1)[0];t.checks.push({type:7,value:n})}},{name:"id",query:!0,regex:"\\#("+nx.id+")",populate:function(e,t,r){var n=v(r,1)[0];t.checks.push({type:8,value:nC(n)})}},{name:"className",query:!0,regex:"\\.("+nx.className+")",populate:function(e,t,r){var n=v(r,1)[0];t.checks.push({type:9,value:nC(n)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+nx.variable+")\\s*\\]",populate:function(e,t,r){var n=v(r,1)[0];t.checks.push({type:4,field:nC(n)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+nx.variable+")\\s*("+nx.comparatorOp+")\\s*("+nx.value+")\\s*\\]",populate:function(e,t,r){var n=v(r,3),i=n[0],a=n[1],o=n[2];o=null!=RegExp("^"+nx.string+"$").exec(o)?o.substring(1,o.length-1):parseFloat(o),t.checks.push({type:3,field:nC(i),operator:a,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+nx.boolOp+")\\s*("+nx.variable+")\\s*\\]",populate:function(e,t,r){var n=v(r,2),i=n[0],a=n[1];t.checks.push({type:5,field:nC(a),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+nx.meta+")\\s*("+nx.comparatorOp+")\\s*("+nx.number+")\\s*\\]\\]",populate:function(e,t,r){var n=v(r,3),i=n[0],a=n[1],o=n[2];t.checks.push({type:6,field:nC(i),operator:a,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:nx.separator,populate:function(e,t){var r=e.currentSubject,n=e.edgeCount,i=e.compoundCount,a=e[e.length-1];return null!=r&&(a.subject=r,e.currentSubject=null),a.edgeCount=n,a.compoundCount=i,e.edgeCount=0,e.compoundCount=0,e[e.length++]=nw()}},{name:"directedEdge",separator:!0,regex:nx.directedEdge,populate:function(e,t){if(null==e.currentSubject){var r=nw(),n=nw();return r.checks.push({type:11,source:t,target:n}),nT(e,t,r),e.edgeCount++,n}var i=nw(),a=nw();return i.checks.push({type:12,source:t,target:a}),nT(e,t,i),e.edgeCount++,a}},{name:"undirectedEdge",separator:!0,regex:nx.undirectedEdge,populate:function(e,t){if(null==e.currentSubject){var r=nw(),n=nw();return r.checks.push({type:10,nodes:[t,n]}),nT(e,t,r),e.edgeCount++,n}var i=nw(),a=nw();return i.checks.push({type:14,node:t,neighbor:a}),nT(e,t,i),a}},{name:"child",separator:!0,regex:nx.child,populate:function(e,t){if(null==e.currentSubject){var r=nw(),n=nw(),i=e[e.length-1];return r.checks.push({type:15,parent:i,child:n}),nT(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var a=nw(),o=e[e.length-1],s=nw(),l=nw(),u=nw(),c=nw();return a.checks.push({type:19,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:20}],c.checks.push({type:20}),s.checks.push({type:17,parent:c,child:u}),nT(e,o,a),e.currentSubject=l,e.compoundCount++,u}var d=nw(),h=nw(),f=[{type:17,parent:d,child:h}];return d.checks=t.checks,t.checks=f,e.compoundCount++,h}},{name:"descendant",separator:!0,regex:nx.descendant,populate:function(e,t){if(null==e.currentSubject){var r=nw(),n=nw(),i=e[e.length-1];return r.checks.push({type:16,ancestor:i,descendant:n}),nT(e,t,r),e.compoundCount++,n}if(e.currentSubject===t){var a=nw(),o=e[e.length-1],s=nw(),l=nw(),u=nw(),c=nw();return a.checks.push({type:19,left:o,right:s,subject:l}),l.checks=t.checks,t.checks=[{type:20}],c.checks.push({type:20}),s.checks.push({type:18,ancestor:c,descendant:u}),nT(e,o,a),e.currentSubject=l,e.compoundCount++,u}var d=nw(),h=nw(),f=[{type:18,ancestor:d,descendant:h}];return d.checks=t.checks,t.checks=f,e.compoundCount++,h}},{name:"subject",modifier:!0,regex:nx.subject,populate:function(e,t){if(null!=e.currentSubject&&e.currentSubject!==t)return ez("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var r=e[e.length-1].checks[0],n=null==r?null:r.type;11===n?r.type=13:10===n&&(r.type=14,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];nP.forEach(function(e){return e.regexObj=RegExp("^"+e.regex)});var nS=function(e){for(var t,r,n,i=0;i<nP.length;i++){var a=nP[i],o=a.name,s=e.match(a.regexObj);if(null!=s){r=s,t=a,n=o;var l=s[0];e=e.substring(l.length);break}}return{expr:t,match:r,name:n,remaining:e}},nB=function(e){var t=e.match(/^\s+/);if(t){var r=t[0];e=e.substring(r.length)}return e},nD=function(e,t,r){var n,i,a,o=S(e),s=M(e),l=S(r),u=!1,c=!1,d=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),u=!0),(o||l||u)&&(i=o||s?""+e:"",a=""+r),u&&(e=i=i.toLowerCase(),r=a=a.toLowerCase()),t){case"*=":n=i.indexOf(a)>=0;break;case"$=":n=i.indexOf(a,i.length-a.length)>=0;break;case"^=":n=0===i.indexOf(a);break;case"=":n=e===r;break;case">":d=!0,n=e>r;break;case">=":d=!0,n=e>=r;break;case"<":d=!0,n=e<r;break;case"<=":d=!0,n=e<=r;break;default:n=!1}return c&&(null!=e||!d)&&(n=!n),n},nA=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return void 0===e}},nM=function(e,t){return e.data(t)},nR=[],nN=function(e,t){return e.checks.every(function(e){return nR[e.type](e,t)})};nR[0]=function(e,t){var r=e.value;return"*"===r||r===t.group()},nR[7]=function(e,t){var r;return r=e.value,nk[r](t)},nR[8]=function(e,t){var r=e.value;return t.id()===r},nR[9]=function(e,t){var r=e.value;return t.hasClass(r)},nR[6]=function(e,t){var r=e.field,n=e.operator,i=e.value;return nD(t[r](),n,i)},nR[3]=function(e,t){var r=e.field,n=e.operator,i=e.value;return nD(nM(t,r),n,i)},nR[5]=function(e,t){var r=e.field,n=e.operator;return nA(nM(t,r),n)},nR[4]=function(e,t){var r=e.field;return e.operator,void 0!==nM(t,r)},nR[10]=function(e,t){var r=e.nodes[0],n=e.nodes[1],i=t.source(),a=t.target();return nN(r,i)&&nN(n,a)||nN(n,i)&&nN(r,a)},nR[14]=function(e,t){return nN(e.node,t)&&t.neighborhood().some(function(t){return t.isNode()&&nN(e.neighbor,t)})},nR[11]=function(e,t){return nN(e.source,t.source())&&nN(e.target,t.target())},nR[12]=function(e,t){return nN(e.source,t)&&t.outgoers().some(function(t){return t.isNode()&&nN(e.target,t)})},nR[13]=function(e,t){return nN(e.target,t)&&t.incomers().some(function(t){return t.isNode()&&nN(e.source,t)})},nR[15]=function(e,t){return nN(e.child,t)&&nN(e.parent,t.parent())},nR[17]=function(e,t){return nN(e.parent,t)&&t.children().some(function(t){return nN(e.child,t)})},nR[16]=function(e,t){return nN(e.descendant,t)&&t.ancestors().some(function(t){return nN(e.ancestor,t)})},nR[18]=function(e,t){return nN(e.ancestor,t)&&t.descendants().some(function(t){return nN(e.descendant,t)})},nR[19]=function(e,t){return nN(e.subject,t)&&nN(e.left,t)&&nN(e.right,t)},nR[20]=function(){return!0},nR[1]=function(e,t){return e.value.has(t)},nR[2]=function(e,t){return(0,e.value)(t)};var nI=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,null==e||S(e)&&e.match(/^\s*$/)||(N(e)?this.addQuery({checks:[{type:1,value:e.collection()}]}):B(e)?this.addQuery({checks:[{type:2,value:e}]}):S(e)?this.parse(e)||(this.invalid=!0):eL("A selector must be created from a string; found "))},nL=nI.prototype;[{parse:function(e){var t=this.inputText=e,r=this[0]=nw();for(this.length=1,t=nB(t);;){var n=nS(t);if(null==n.expr)return ez("The selector `"+e+"`is invalid"),!1;var i=n.match.slice(1),a=n.expr.populate(this,r,i);if(!1===a)return!1;if(null!=a&&(r=a),(t=n.remaining).match(/^\s*$/))break}var o=this[this.length-1];null!=this.currentSubject&&(o.subject=this.currentSubject),o.edgeCount=this.edgeCount,o.compoundCount=this.compoundCount;for(var s=0;s<this.length;s++){var l=this[s];if(l.compoundCount>0&&l.edgeCount>0)return ez("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(l.edgeCount>1)return ez("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;1===l.edgeCount&&ez("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},toString:function(){if(null!=this.toStringCache)return this.toStringCache;for(var e=function(e){return null==e?"":e},t=function(t){return S(t)?'"'+t+'"':e(t)},r=function(e){return" "+e+" "},n=function(n,a){var o=n.type,s=n.value;switch(o){case 0:var l=e(s);return l.substring(0,l.length-1);case 3:return"["+n.field+r(e(n.operator))+t(s)+"]";case 5:var u=n.operator,c=n.field;return"["+e(u)+c+"]";case 4:return"["+n.field+"]";case 6:var d=n.operator;return"[["+n.field+r(e(d))+t(s)+"]]";case 7:return s;case 8:return"#"+s;case 9:return"."+s;case 17:case 15:return i(n.parent,a)+r(">")+i(n.child,a);case 18:case 16:return i(n.ancestor,a)+" "+i(n.descendant,a);case 19:var h=i(n.left,a),f=i(n.subject,a),p=i(n.right,a);return h+(h.length>0?" ":"")+f+p;case 20:return""}},i=function(e,t){return e.checks.reduce(function(r,i,a){return r+(t===e&&0===a?"$":"")+n(i,t)},"")},a="",o=0;o<this.length;o++){var s=this[o];a+=i(s,s.subject),this.length>1&&o<this.length-1&&(a+=", ")}return this.toStringCache=a,a}},{matches:function(e){for(var t=0;t<this.length;t++)if(nN(this[t],e))return!0;return!1},filter:function(e){var t=this;if(1===t.length&&1===t[0].checks.length&&8===t[0].checks[0].type)return e.getElementById(t[0].checks[0].value).collection();var r=function(e){for(var r=0;r<t.length;r++)if(nN(t[r],e))return!0;return!1};return null==t.text()&&(r=function(){return!0}),e.filter(r)}}].forEach(function(e){return J(nL,e)}),nL.text=function(){return this.inputText},nL.size=function(){return this.length},nL.eq=function(e){return this[e]},nL.sameText=function(e){return!this.invalid&&!e.invalid&&this.text()===e.text()},nL.addQuery=function(e){this[this.length++]=e},nL.selector=nL.toString;var nO={allAre:function(e){var t=new nI(e);return this.every(function(e){return t.matches(e)})},is:function(e){var t=new nI(e);return this.some(function(e){return t.matches(e)})},some:function(e,t){for(var r=0;r<this.length;r++)if(t?e.apply(t,[this[r],r,this]):e(this[r],r,this))return!0;return!1},every:function(e,t){for(var r=0;r<this.length;r++)if(!(t?e.apply(t,[this[r],r,this]):e(this[r],r,this)))return!1;return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length;return t===e.length&&(1===t?this[0]===e[0]:this.every(function(t){return e.hasElementWithId(t.id())}))},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(e){return t.hasElementWithId(e.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(e){return t.hasElementWithId(e.id())})}};nO.allAreNeighbours=nO.allAreNeighbors,nO.has=nO.contains,nO.equal=nO.equals=nO.same;var nz=function(e,t){return function(r,n,i,a){if(null==r?o="":N(r)&&1===r.length&&(o=r.id()),1!==this.length||!o)return e.call(this,r,n,i,a);var o,s=this[0]._private,l=s.traversalCache=s.traversalCache||{},u=l[t]=l[t]||[],c=eC(o),d=u[c];return d||(u[c]=e.call(this,r,n,i,a))}},nj={parent:function(e){var t=[];if(1===this.length){var r=this[0]._private.parent;if(r)return r}for(var n=0;n<this.length;n++){var i=this[n]._private.parent;i&&t.push(i)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],r=this.parent();r.nonempty();){for(var n=0;n<r.length;n++){var i=r[n];t.push(i)}r=r.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,r=0;r<this.length;r++){var n=this[r].parents();t=(t=t||n).intersect(n)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(e){return e.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(e){return e.isChild()}).filter(e)},children:nz(function(e){for(var t=[],r=0;r<this.length;r++)for(var n=this[r]._private.children,i=0;i<n.length;i++)t.push(n[i]);return this.spawn(t,!0).filter(e)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&0!==e._private.children.length},isChildless:function(){var e=this[0];if(e)return e.isNode()&&0===e._private.children.length},isChild:function(){var e=this[0];if(e)return e.isNode()&&null!=e._private.parent},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&null==e._private.parent},descendants:function(e){var t=[];return!function e(r){for(var n=0;n<r.length;n++){var i=r[n];t.push(i),i.children().nonempty()&&e(i.children())}}(this.children()),this.spawn(t,!0).filter(e)}};function nV(e,t,r,n){for(var i=[],a=new eQ,o=e.cy().hasCompoundNodes(),s=0;s<e.length;s++){var l=e[s];r?i.push(l):o&&n(i,a,l)}for(;i.length>0;){var u=i.shift();t(u),a.add(u.id()),o&&n(i,a,u)}return e}function nF(e,t,r){if(r.isParent())for(var n=r._private.children,i=0;i<n.length;i++){var a=n[i];t.has(a.id())||e.push(a)}}function nX(e,t,r){if(r.isChild()){var n=r._private.parent;t.has(n.id())||e.push(n)}}function nq(e,t,r){nX(e,t,r),nF(e,t,r)}nj.forEachDown=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return nV(this,e,t,nF)},nj.forEachUp=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return nV(this,e,t,nX)},nj.forEachUpAndDown=function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return nV(this,e,t,nq)},nj.ancestors=nj.parents,(la=lo={data:ny.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:ny.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:ny.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ny.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:ny.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:ny.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}}).attr=la.data,la.removeAttr=la.removeData;var nY={};function nW(e){return function(t){if(void 0===t&&(t=!0),0!==this.length)if(!this.isNode()||this.removed())return;else{for(var r=0,n=this[0],i=n._private.edges,a=0;a<i.length;a++){var o=i[a];!t&&o.isLoop()||(r+=e(n,o))}return r}}}function nU(e,t){return function(r){for(var n,i=this.nodes(),a=0;a<i.length;a++){var o=i[a][e](r);void 0!==o&&(void 0===n||t(o,n))&&(n=o)}return n}}J(nY,{degree:nW(function(e,t){return t.source().same(t.target())?2:1}),indegree:nW(function(e,t){return+!!t.target().same(e)}),outdegree:nW(function(e,t){return+!!t.source().same(e)})}),J(nY,{minDegree:nU("degree",function(e,t){return e<t}),maxDegree:nU("degree",function(e,t){return e>t}),minIndegree:nU("indegree",function(e,t){return e<t}),maxIndegree:nU("indegree",function(e,t){return e>t}),minOutdegree:nU("outdegree",function(e,t){return e<t}),maxOutdegree:nU("outdegree",function(e,t){return e>t})}),J(nY,{totalDegree:function(e){for(var t=0,r=this.nodes(),n=0;n<r.length;n++)t+=r[n].degree(e);return t}});var nG=function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n];if(!i.locked()){var a=i._private.position,o={x:null!=t.x?t.x-a.x:0,y:null!=t.y?t.y-a.y:0};i.isParent()&&(0!==o.x||0!==o.y)&&i.children().shift(o,r),i.dirtyBoundingBoxCache()}}},nH={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){nG(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};(ls=ll={position:ny.data(nH),silentPosition:ny.data(J({},nH,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){nG(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(A(e))t?this.silentPosition(e):this.position(e);else if(B(e)){var r=this.cy();r.startBatch();for(var n=0;n<this.length;n++){var i=this[n],a=void 0;(a=e(i,n))&&(t?i.silentPosition(a):i.position(a))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,r){var n;if(A(e)?(n={x:M(e.x)?e.x:0,y:M(e.y)?e.y:0},r=t):S(e)&&M(t)&&((n={x:0,y:0})[e]=t),null!=n){var i=this.cy();i.startBatch();for(var a=0;a<this.length;a++){var o=this[a];if(!(i.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var s=o.position(),l={x:s.x+n.x,y:s.y+n.y};r?o.silentPosition(l):o.position(l)}}i.endBatch()}return this},silentShift:function(e,t){return A(e)?this.shift(e,!0):S(e)&&M(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var r=this[0],n=this.cy(),i=n.zoom(),a=n.pan(),o=A(e)?e:void 0,s=void 0!==o||void 0!==t&&S(e);if(r&&r.isNode())if(!s)return(o=tr(r.position(),i,a),void 0===e)?o:o[e];else for(var l=0;l<this.length;l++){var u=this[l];void 0!==t?u.position(e,(t-a[e])/i):void 0!==o&&u.position(tn(o,i,a))}else if(!s)return;return this},relativePosition:function(e,t){var r=this[0],n=this.cy(),i=A(e)?e:void 0,a=void 0!==i||void 0!==t&&S(e),o=n.hasCompoundNodes();if(r&&r.isNode())if(a)for(var s=0;s<this.length;s++){var l=this[s],u=o?l.parent():null,c=u&&u.length>0;c&&(u=u[0]);var d=c?u.position():{x:0,y:0};void 0!==t?l.position(e,t+d[e]):void 0!==i&&l.position({x:i.x+d.x,y:i.y+d.y})}else{var h=r.position(),f=o?r.parent():null,p=f&&f.length>0;p&&(f=f[0]);var v=p?f.position():{x:0,y:0};return(i={x:h.x-v.x,y:h.y-v.y},void 0===e)?i:i[e]}else if(!a)return;return this}}).modelPosition=ls.point=ls.position,ls.modelPositions=ls.points=ls.positions,ls.renderedPoint=ls.renderedPosition,ls.relativePoint=ls.relativePosition,lu=lc={},lc.renderedBoundingBox=function(e){var t=this.boundingBox(e),r=this.cy(),n=r.zoom(),i=r.pan(),a=t.x1*n+i.x,o=t.x2*n+i.x,s=t.y1*n+i.y,l=t.y2*n+i.y;return{x1:a,x2:o,y1:s,y2:l,w:o-a,h:l-s}},lc.dirtyCompoundBoundsCache=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();return t.styleEnabled()&&t.hasCompoundNodes()&&this.forEachUp(function(t){if(t.isParent()){var r=t._private;r.compoundBoundsClean=!1,r.bbCache=null,e||t.emitAndNotify("bounds")}}),this},lc.updateCompoundBounds=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.cy();if(!t.styleEnabled()||!t.hasCompoundNodes()||!e&&t.batching())return this;for(var r=0;r<this.length;r++){var n=this[r],i=n._private;(!i.compoundBoundsClean||e)&&(!function(e){if(e.isParent()){var t=e._private,r=e.children(),n="include"===e.pstyle("compound-sizing-wrt-labels").value,i={width:{val:e.pstyle("min-width").pfValue,left:e.pstyle("min-width-bias-left"),right:e.pstyle("min-width-bias-right")},height:{val:e.pstyle("min-height").pfValue,top:e.pstyle("min-height-bias-top"),bottom:e.pstyle("min-height-bias-bottom")}},a=r.boundingBox({includeLabels:n,includeOverlays:!1,useCache:!1}),o=t.position;(0===a.w||0===a.h)&&((a={w:e.pstyle("width").pfValue,h:e.pstyle("height").pfValue}).x1=o.x-a.w/2,a.x2=o.x+a.w/2,a.y1=o.y-a.h/2,a.y2=o.y+a.h/2);var s=i.width.left.value;"px"===i.width.left.units&&i.width.val>0&&(s=100*s/i.width.val);var l=i.width.right.value;"px"===i.width.right.units&&i.width.val>0&&(l=100*l/i.width.val);var u=i.height.top.value;"px"===i.height.top.units&&i.height.val>0&&(u=100*u/i.height.val);var c=i.height.bottom.value;"px"===i.height.bottom.units&&i.height.val>0&&(c=100*c/i.height.val);var d=y(i.width.val-a.w,s,l),h=d.biasDiff,f=d.biasComplementDiff,p=y(i.height.val-a.h,u,c),v=p.biasDiff,g=p.biasComplementDiff;t.autoPadding=function(e,t,r,n){if("%"===r.units)switch(n){case"width":return e>0?r.pfValue*e:0;case"height":return t>0?r.pfValue*t:0;case"average":return e>0&&t>0?r.pfValue*(e+t)/2:0;case"min":return e>0&&t>0?e>t?r.pfValue*t:r.pfValue*e:0;case"max":return e>0&&t>0?e>t?r.pfValue*e:r.pfValue*t:0;default:return 0}return"px"===r.units?r.pfValue:0}(a.w,a.h,e.pstyle("padding"),e.pstyle("padding-relative-to").value),t.autoWidth=Math.max(a.w,i.width.val),o.x=(-h+a.x1+a.x2+f)/2,t.autoHeight=Math.max(a.h,i.height.val),o.y=(-v+a.y1+a.y2+g)/2}function y(e,t,r){var n=0,i=0,a=t+r;return e>0&&a>0&&(n=t/a*e,i=r/a*e),{biasDiff:n,biasComplementDiff:i}}}(n),t.batching()||(i.compoundBoundsClean=!0))}return this};var nK=function(e){return e===1/0||e===-1/0?0:e},nZ=function(e,t,r,n,i){n-t==0||i-r==0||null!=t&&null!=r&&null!=n&&null!=i&&(e.x1=t<e.x1?t:e.x1,e.x2=n>e.x2?n:e.x2,e.y1=r<e.y1?r:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},n$=function(e,t){return null==t?e:nZ(e,t.x1,t.y1,t.x2,t.y2)},nQ=function(e,t,r){return eG(e,t,r)},nJ=function(e,t,r){if(!t.cy().headless()){var n,i,a=t._private,o=a.rstyle,s=o.arrowWidth/2;if("none"!==t.pstyle(r+"-arrow-shape").value){"source"===r?(n=o.srcX,i=o.srcY):"target"===r?(n=o.tgtX,i=o.tgtY):(n=o.midX,i=o.midY);var l=a.arrowBounds=a.arrowBounds||{},u=l[r]=l[r]||{};u.x1=n-s,u.y1=i-s,u.x2=n+s,u.y2=i+s,u.w=u.x2-u.x1,u.h=u.y2-u.y1,tk(u,1),nZ(e,u.x1,u.y1,u.x2,u.y2)}}},n0=function(e,t,r){if(!t.cy().headless()){a=r?r+"-":"";var n=t._private,i=n.rstyle;if(t.pstyle(a+"label").strValue){var a,o,s,l,u,c=t.pstyle("text-halign"),d=t.pstyle("text-valign"),h=nQ(i,"labelWidth",r),f=nQ(i,"labelHeight",r),p=nQ(i,"labelX",r),v=nQ(i,"labelY",r),g=t.pstyle(a+"text-margin-x").pfValue,y=t.pstyle(a+"text-margin-y").pfValue,b=t.isEdge(),x=t.pstyle(a+"text-rotation"),w=t.pstyle("text-outline-width").pfValue,E=t.pstyle("text-border-width").pfValue/2,k=t.pstyle("text-background-padding").pfValue,_=h/2,C=f/2;if(b)o=p-_,s=p+_,l=v-C,u=v+C;else{switch(c.value){case"left":o=p-h,s=p;break;case"center":o=p-_,s=p+_;break;case"right":o=p,s=p+h}switch(d.value){case"top":l=v-f,u=v;break;case"center":l=v-C,u=v+C;break;case"bottom":l=v,u=v+f}}var T=g-Math.max(w,E)-k-2,P=g+Math.max(w,E)+k+2,S=y-Math.max(w,E)-k-2,B=y+Math.max(w,E)+k+2;o+=T,s+=P,l+=S,u+=B;var D=r||"main",A=n.labelBounds,M=A[D]=A[D]||{};M.x1=o,M.y1=l,M.x2=s,M.y2=u,M.w=s-o,M.h=u-l,M.leftPad=T,M.rightPad=P,M.topPad=S,M.botPad=B;var R=b&&"autorotate"===x.strValue,N=null!=x.pfValue&&0!==x.pfValue;if(R||N){var I=R?nQ(n.rstyle,"labelAngle",r):x.pfValue,L=Math.cos(I),O=Math.sin(I),z=(o+s)/2,j=(l+u)/2;if(!b){switch(c.value){case"left":z=s;break;case"right":z=o}switch(d.value){case"top":j=u;break;case"bottom":j=l}}var V=function(e,t){return{x:(e-=z)*L-(t-=j)*O+z,y:e*O+t*L+j}},F=V(o,l),X=V(o,u),q=V(s,l),Y=V(s,u);o=Math.min(F.x,X.x,q.x,Y.x),s=Math.max(F.x,X.x,q.x,Y.x),l=Math.min(F.y,X.y,q.y,Y.y),u=Math.max(F.y,X.y,q.y,Y.y)}var W=D+"Rot",U=A[W]=A[W]||{};U.x1=o,U.y1=l,U.x2=s,U.y2=u,U.w=s-o,U.h=u-l,nZ(e,o,l,s,u),nZ(n.labelBounds.all,o,l,s,u)}return e}},n1=function(e,t){if(!t.cy().headless()){var r=t.pstyle("outline-opacity").value,n=t.pstyle("outline-width").value+t.pstyle("outline-offset").value;n2(e,t,r,n,"outside",n/2)}},n2=function(e,t,r,n,i,a){if(0!==r&&!(n<=0)&&"inside"!==i){var o=t.cy(),s=t.pstyle("shape").value,l=o.renderer().nodeShapes[s],u=t.position(),c=u.x,d=u.y,h=t.width(),f=t.height();l.hasMiterBounds?("center"===i&&(n/=2),n$(e,l.miterBounds(c,d,h,f,n))):null!=a&&a>0&&t_(e,[a,a,a,a])}},n5=function(e,t){if(!t.cy().headless()){var r=t.pstyle("border-opacity").value,n=t.pstyle("border-width").pfValue,i=t.pstyle("border-position").value;n2(e,t,r,n,i)}},n3=function(e,t){var r=e._private.cy,n=r.styleEnabled(),i=r.headless(),a=tb(),o=e._private,s=e.isNode(),l=e.isEdge(),u=o.rstyle,c=s&&n?e.pstyle("bounds-expansion").pfValue:[0],d=function(e){return"none"!==e.pstyle("display").value},h=!n||d(e)&&(!l||d(e.source())&&d(e.target()));if(h){var f=0;n&&t.includeOverlays&&0!==e.pstyle("overlay-opacity").value&&(f=e.pstyle("overlay-padding").value);var p=0;n&&t.includeUnderlays&&0!==e.pstyle("underlay-opacity").value&&(p=e.pstyle("underlay-padding").value);var v=Math.max(f,p),g=0;if(n&&(g=e.pstyle("width").pfValue/2),s&&t.includeNodes){var y=e.position();C=y.x,T=y.y;var b=e.outerWidth()/2,x=e.outerHeight()/2;w=C-b,E=C+b,nZ(a,w,k=T-x,E,_=T+x),n&&n1(a,e),n&&t.includeOutlines&&!i&&n1(a,e),n&&n5(a,e)}else if(l&&t.includeEdges)if(n&&!i){var w,E,k,_,C,T,P,S=e.pstyle("curve-style").strValue;if(w=Math.min(u.srcX,u.midX,u.tgtX),E=Math.max(u.srcX,u.midX,u.tgtX),k=Math.min(u.srcY,u.midY,u.tgtY),_=Math.max(u.srcY,u.midY,u.tgtY),w-=g,E+=g,nZ(a,w,k-=g,E,_+=g),"haystack"===S){var B=u.haystackPts;if(B&&2===B.length){if(w=B[0].x,k=B[0].y,E=B[1].x,_=B[1].y,w>E){var D=w;w=E,E=D}if(k>_){var A=k;k=_,_=A}nZ(a,w-g,k-g,E+g,_+g)}}else if("bezier"===S||"unbundled-bezier"===S||U(S,"segments")||U(S,"taxi")){switch(S){case"bezier":case"unbundled-bezier":P=u.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":P=u.linePts}if(null!=P)for(var M=0;M<P.length;M++){var R=P[M];w=R.x-g,E=R.x+g,nZ(a,w,k=R.y-g,E,_=R.y+g)}}}else{var N=e.source().position(),I=e.target().position();if(w=N.x,E=I.x,k=N.y,_=I.y,w>E){var L=w;w=E,E=L}if(k>_){var O=k;k=_,_=O}w-=g,E+=g,nZ(a,w,k-=g,E,_+=g)}if(n&&t.includeEdges&&l&&(nJ(a,e,"mid-source"),nJ(a,e,"mid-target"),nJ(a,e,"source"),nJ(a,e,"target")),n&&"yes"===e.pstyle("ghost").value){var z=e.pstyle("ghost-offset-x").pfValue,j=e.pstyle("ghost-offset-y").pfValue;nZ(a,a.x1+z,a.y1+j,a.x2+z,a.y2+j)}var V=o.bodyBounds=o.bodyBounds||{};tC(V,a),t_(V,c),tk(V,1),n&&(w=a.x1,E=a.x2,k=a.y1,_=a.y2,nZ(a,w-v,k-v,E+v,_+v));var F=o.overlayBounds=o.overlayBounds||{};tC(F,a),t_(F,c),tk(F,1);var X=o.labelBounds=o.labelBounds||{};null!=X.all?tx(X.all):X.all=tb(),n&&t.includeLabels&&(t.includeMainLabels&&n0(a,e,null),l&&(t.includeSourceLabels&&n0(a,e,"source"),t.includeTargetLabels&&n0(a,e,"target")))}return a.x1=nK(a.x1),a.y1=nK(a.y1),a.x2=nK(a.x2),a.y2=nK(a.y2),a.w=nK(a.x2-a.x1),a.h=nK(a.y2-a.y1),a.w>0&&a.h>0&&h&&(t_(a,c),tk(a,1)),a},n4=function(e){var t=0,r=function(e){return!!e<<t++};return 0+r(e.incudeNodes)+r(e.includeEdges)+r(e.includeLabels)+r(e.includeMainLabels)+r(e.includeSourceLabels)+r(e.includeTargetLabels)+r(e.includeOverlays)+r(e.includeOutlines)},n9=function(e){var t=function(e){return Math.round(e)};if(e.isEdge()){var r=e.source().position(),n=e.target().position();return e_([t(r.x),t(r.y),t(n.x),t(n.y)])}var i=e.position();return e_([t(i.x),t(i.y)])},n6=function(e,t){var r,n=e._private,i=e.isEdge(),a=null==t?n8:n4(t);if(null==n.bbCache?(n.bbCache=r=n3(e,n7),n.bbCachePosKey=n9(e)):r=n.bbCache,a!==n8){var o=e.isNode();r=tb(),(t.includeNodes&&o||t.includeEdges&&!o)&&(t.includeOverlays?n$(r,n.overlayBounds):n$(r,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?n$(r,n.labelBounds.all):(t.includeMainLabels&&n$(r,n.labelBounds.mainRot),t.includeSourceLabels&&n$(r,n.labelBounds.sourceRot),t.includeTargetLabels&&n$(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},n7={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},n8=n4(n7),ie=eq(n7);lc.boundingBox=function(e){var t,r=void 0===e||void 0===e.useCache||!0===e.useCache,n=F(function(e){var t=e._private;return null==t.bbCache||t.styleDirty||t.bbCachePosKey!==n9(e)},function(e){return e.id()});if(r&&1===this.length&&!n(this[0]))e=void 0===e?n7:ie(e),t=n6(this[0],e);else{t=tb();var i=ie(e=e||n7),a=this.cy().styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),a&&this.recalculateRenderedStyle(r),this.updateCompoundBounds(!r);for(var o=0;o<this.length;o++){var s=this[o];n(s)&&s.dirtyBoundingBoxCache(),n$(t,n6(s,i))}}return t.x1=nK(t.x1),t.y1=nK(t.y1),t.x2=nK(t.x2),t.y2=nK(t.y2),t.w=nK(t.x2-t.x1),t.h=nK(t.y2-t.y1),t},lc.dirtyBoundingBoxCache=function(){for(var e=0;e<this.length;e++){var t=this[e]._private;t.bbCache=null,t.bbCachePosKey=null,t.bodyBounds=null,t.overlayBounds=null,t.labelBounds.all=null,t.labelBounds.source=null,t.labelBounds.target=null,t.labelBounds.main=null,t.labelBounds.sourceRot=null,t.labelBounds.targetRot=null,t.labelBounds.mainRot=null,t.arrowBounds.source=null,t.arrowBounds.target=null,t.arrowBounds["mid-source"]=null,t.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this},lc.boundingBoxAt=function(e){var t,r=this.nodes(),n=this.cy(),i=n.hasCompoundNodes(),a=n.collection();if(i&&(a=r.filter(function(e){return e.isParent()}),r=r.not(a)),A(e)){var o=e;e=function(){return o}}n.startBatch(),r.forEach(function(t,r){return t._private.bbAtOldPos=e(t,r)}).silentPositions(e),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var s={x1:(t=this.boundingBox({useCache:!1})).x1,x2:t.x2,w:t.w,y1:t.y1,y2:t.y2,h:t.h};return r.silentPositions(function(e){return e._private.bbAtOldPos}),i&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),n.endBatch(),s},lu.boundingbox=lu.bb=lu.boundingBox,lu.renderedBoundingbox=lu.renderedBoundingBox,ld=lh={};var it=function(e){e.uppercaseName=W(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=W(e.outerName),ld[e.name]=function(){var t=this[0],r=t._private,n=r.cy._private.styleEnabled;if(t)if(!n)return 1;else{if(t.isParent())return t.updateCompoundBounds(),r[e.autoName]||0;var i=t.pstyle(e.name);return"label"===i.strValue?(t.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):i.pfValue}},ld["outer"+e.uppercaseName]=function(){var t=this[0],r=t._private.cy._private.styleEnabled;if(t)if(!r)return 1;else{var n=t[e.name](),i=t.pstyle("border-position").value;return n+("center"===i?t.pstyle("border-width").pfValue:"outside"===i?2*t.pstyle("border-width").pfValue:0)+2*t.padding()}},ld["rendered"+e.uppercaseName]=function(){var t=this[0];if(t)return t[e.name]()*this.cy().zoom()},ld["rendered"+e.uppercaseOuterName]=function(){var t=this[0];if(t)return t[e.outerName]()*this.cy().zoom()}};it({name:"width"}),it({name:"height"}),lh.padding=function(){var e=this[0],t=e._private;return e.isParent()&&(e.updateCompoundBounds(),void 0!==t.autoPadding)?t.autoPadding:e.pstyle("padding").pfValue},lh.paddedHeight=function(){var e=this[0];return e.height()+2*e.padding()},lh.paddedWidth=function(){var e=this[0];return e.width()+2*e.padding()};var ir=function(e,t){if(e.isEdge()&&e.takesUpSpace())return t(e)},ii=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy();return tr(t(e),r.zoom(),r.pan())}},ia=function(e,t){if(e.isEdge()&&e.takesUpSpace()){var r=e.cy(),n=r.pan(),i=r.zoom();return t(e).map(function(e){return tr(e,i,n)})}},io={controlPoints:{get:function(e){return e.renderer().getControlPoints(e)},mult:!0},segmentPoints:{get:function(e){return e.renderer().getSegmentPoints(e)},mult:!0},sourceEndpoint:{get:function(e){return e.renderer().getSourceEndpoint(e)}},targetEndpoint:{get:function(e){return e.renderer().getTargetEndpoint(e)}},midpoint:{get:function(e){return e.renderer().getEdgeMidpoint(e)}}},is=J({},ll,lc,lh,Object.keys(io).reduce(function(e,t){var r=io[t],n="rendered"+t[0].toUpperCase()+t.substr(1);return e[t]=function(){return ir(this,r.get)},r.mult?e[n]=function(){return ia(this,r.get)}:e[n]=function(){return ii(this,r.get)},e},{})),il=function(e,t){this.recycle(e,t)};function iu(){return!1}function ic(){return!0}il.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=iu,null!=e&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ic:iu):null!=e&&e.type?t=e:this.type=e,null!=t&&(this.originalEvent=t.originalEvent,this.type=null!=t.type?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),null!=this.cy&&null!=this.position&&null==this.renderedPosition){var r=this.position,n=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:r.x*n+i.x,y:r.y*n+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ic;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ic;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ic,this.stopPropagation()},isDefaultPrevented:iu,isPropagationStopped:iu,isImmediatePropagationStopped:iu};var id=/^([^.]+)(\.(?:[^.]+))?$/,ih={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},ip=Object.keys(ih),iv={};function ig(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iv,t=arguments.length>1?arguments[1]:void 0,r=0;r<ip.length;r++){var n=ip[r];this[n]=e[n]||ih[n]}this.context=t||this.context,this.listeners=[],this.emitting=0}var iy=ig.prototype,im=function(e,t,r,n,i,a,o){B(n)&&(i=n,n=null),o&&(a=null==a?o:J({},a,o));for(var s=D(r)?r:r.split(/\s+/),l=0;l<s.length;l++){var u=s[l];if(!j(u)){var c=u.match(id);if(c&&!1===t(e,u,c[1],c[2]?c[2]:null,n,i,a))break}}},ib=function(e,t){return e.addEventFields(e.context,t),new il(t.type,t)},ix=function(e,t,r){if("event"===P(r))return void t(e,r);if(A(r))return void t(e,ib(e,r));for(var n=D(r)?r:r.split(/\s+/),i=0;i<n.length;i++){var a=n[i];if(!j(a)){var o=a.match(id);if(o){var s=ib(e,{type:o[1],namespace:o[2]?o[2]:null,target:e.context});t(e,s)}}}};iy.on=iy.addListener=function(e,t,r,n,i){return im(this,function(e,t,r,n,i,a,o){B(a)&&e.listeners.push({event:t,callback:a,type:r,namespace:n,qualifier:i,conf:o})},e,t,r,n,i),this},iy.one=function(e,t,r,n){return this.on(e,t,r,n,{one:!0})},iy.removeListener=iy.off=function(e,t,r,n){var i=this;0!==this.emitting&&(this.listeners=this.listeners.slice());for(var a=this.listeners,o=function(o){var s=a[o];im(i,function(t,r,n,i,l,u){if((s.type===n||"*"===e)&&(!i&&".*"!==s.namespace||s.namespace===i)&&(!l||t.qualifierCompare(s.qualifier,l))&&(!u||s.callback===u))return a.splice(o,1),!1},e,t,r,n)},s=a.length-1;s>=0;s--)o(s);return this},iy.removeAllListeners=function(){return this.removeListener("*")},iy.emit=iy.trigger=function(e,t,r){var n=this.listeners,i=n.length;return this.emitting++,D(t)||(t=[t]),ix(this,function(e,a){null!=r&&(i=(n=[{event:a.event,type:a.type,namespace:a.namespace,callback:r}]).length);for(var o=0;o<i;o++)!function(){var r=n[o];if(r.type===a.type&&(!r.namespace||r.namespace===a.namespace||".*"===r.namespace)&&e.eventMatches(e.context,r,a)){var i=[a];null!=t&&eU(i,t),e.beforeEmit(e.context,r,a),r.conf&&r.conf.one&&(e.listeners=e.listeners.filter(function(e){return e!==r}));var s=e.callbackContext(e.context,r,a),l=r.callback.apply(s,i);e.afterEmit(e.context,r,a),!1===l&&(a.stopPropagation(),a.preventDefault())}}();e.bubble(e.context)&&!a.isPropagationStopped()&&e.parent(e.context).emit(a,t)},e),this.emitting--,this};var iw={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&I(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},iE=function(e){return S(e)?new nI(e):e},ik={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],r=t._private;r.emitter||(r.emitter=new ig(iw,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,r){for(var n=iE(t),i=0;i<this.length;i++)this[i].emitter().on(e,n,r);return this},removeListener:function(e,t,r){for(var n=iE(t),i=0;i<this.length;i++)this[i].emitter().removeListener(e,n,r);return this},removeAllListeners:function(){for(var e=0;e<this.length;e++)this[e].emitter().removeAllListeners();return this},one:function(e,t,r){for(var n=iE(t),i=0;i<this.length;i++)this[i].emitter().one(e,n,r);return this},once:function(e,t,r){for(var n=iE(t),i=0;i<this.length;i++)this[i].emitter().on(e,n,r,{once:!0,onceCollection:this})},emit:function(e,t){for(var r=0;r<this.length;r++)this[r].emitter().emit(e,t);return this},emitAndNotify:function(e,t){if(0!==this.length)return this.cy().notify(e,this),this.emit(e,t),this}};ny.eventAliasesOn(ik);var i_={nodes:function(e){return this.filter(function(e){return e.isNode()}).filter(e)},edges:function(e){return this.filter(function(e){return e.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),r=0;r<this.length;r++){var n=this[r];n.isNode()?e.push(n):t.push(n)}return{nodes:e,edges:t}},filter:function(e,t){if(void 0===e)return this;if(S(e)||N(e))return new nI(e).filter(this);if(B(e)){for(var r=this.spawn(),n=0;n<this.length;n++){var i=this[n];(t?e.apply(t,[i,n,this]):e(i,n,this))&&r.push(i)}return r}return this.spawn()},not:function(e){if(!e)return this;S(e)&&(e=this.filter(e));for(var t=this.spawn(),r=0;r<this.length;r++){var n=this[r];e.has(n)||t.push(n)}return t},absoluteComplement:function(){return this.cy().mutableElements().not(this)},intersect:function(e){if(S(e))return this.filter(e);for(var t=this.spawn(),r=this.length<e.length,n=r?this:e,i=r?e:this,a=0;a<n.length;a++){var o=n[a];i.has(o)&&t.push(o)}return t},xor:function(e){var t=this._private.cy;S(e)&&(e=t.$(e));var r=this.spawn(),n=e,i=function(e,t){for(var n=0;n<e.length;n++){var i=e[n],a=i._private.data.id;t.hasElementWithId(a)||r.push(i)}};return i(this,n),i(n,this),r},diff:function(e){var t=this._private.cy;S(e)&&(e=t.$(e));var r=this.spawn(),n=this.spawn(),i=this.spawn(),a=e,o=function(e,t,r){for(var n=0;n<e.length;n++){var a=e[n],o=a._private.data.id;t.hasElementWithId(o)?i.merge(a):r.push(a)}};return o(this,a,r),o(a,this,n),{left:r,right:n,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(S(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=this.spawnSelf(),i=0;i<e.length;i++){var a=e[i];this.has(a)||n.push(a)}return n},merge:function(e){var t=this._private,r=t.cy;if(!e)return this;if(e&&S(e)){var n=e;e=r.mutableElements().filter(n)}for(var i=t.map,a=0;a<e.length;a++){var o=e[a],s=o._private.data.id;if(!i.has(s)){var l=this.length++;this[l]=o,i.set(s,{ele:o,index:l})}}return this},unmergeAt:function(e){var t=this[e].id(),r=this._private.map;this[e]=void 0,r.delete(t);var n=e===this.length-1;if(this.length>1&&!n){var i=this.length-1,a=this[i],o=a._private.data.id;this[i]=void 0,this[e]=a,r.set(o,{ele:a,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,r=e._private.data.id,n=t.map.get(r);if(!n)return this;var i=n.index;return this.unmergeAt(i),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&S(e)){var r=e;e=t.mutableElements().filter(r)}for(var n=0;n<e.length;n++)this.unmergeOne(e[n]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--)e(this[t])&&this.unmergeAt(t);return this},map:function(e,t){for(var r=[],n=0;n<this.length;n++){var i=this[n],a=t?e.apply(t,[i,n,this]):e(i,n,this);r.push(a)}return r},reduce:function(e,t){for(var r=t,n=0;n<this.length;n++)r=e(r,this[n],n,this);return r},max:function(e,t){for(var r,n=-1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o>n&&(n=o,r=a)}return{value:n,ele:r}},min:function(e,t){for(var r,n=1/0,i=0;i<this.length;i++){var a=this[i],o=t?e.apply(t,[a,i,this]):e(a,i,this);o<n&&(n=o,r=a)}return{value:n,ele:r}}};i_.u=i_["|"]=i_["+"]=i_.union=i_.or=i_.add,i_["\\"]=i_["!"]=i_["-"]=i_.difference=i_.relativeComplement=i_.subtract=i_.not,i_.n=i_["&"]=i_["."]=i_.and=i_.intersection=i_.intersect,i_["^"]=i_["(+)"]=i_["(-)"]=i_.symmetricDifference=i_.symdiff=i_.xor,i_.fnFilter=i_.filterFn=i_.stdFilter=i_.filter,i_.complement=i_.abscomp=i_.absoluteComplement;var iC=function(e,t){var r=e.cy().hasCompoundNodes();function n(e){var t=e.pstyle("z-compound-depth");return"auto"===t.value?r?e.zDepth():0:"bottom"===t.value?-1:"top"===t.value?eA:0}var i=n(e)-n(t);if(0!==i)return i;function a(e){return"auto"===e.pstyle("z-index-compare").value?+!!e.isNode():0}var o=a(e)-a(t);if(0!==o)return o;var s=e.pstyle("z-index").value-t.pstyle("z-index").value;return 0!==s?s:e.poolIndex()-t.poolIndex()},iT={forEach:function(e,t){if(B(e))for(var r=this.length,n=0;n<r;n++){var i=this[n];if(!1===(t?e.apply(t,[i,n,this]):e(i,n,this)))break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var r=[],n=this.length;null==t&&(t=n),null==e&&(e=0),e<0&&(e=n+e),t<0&&(t=n+t);for(var i=e;i>=0&&i<t&&i<n;i++)r.push(this[i]);return this.spawn(r)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return 0===this.length},nonempty:function(){return!this.empty()},sort:function(e){if(!B(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(iC)},zDepth:function(){var e=this[0];if(e){var t=e._private;if("nodes"===t.group){var r=t.data.parent?e.parents().size():0;return e.isParent()?r:eA-1}var n=t.source,i=t.target;return Math.max(n.zDepth(),i.zDepth(),0)}}};iT.each=iT.forEach,("undefined"==typeof Symbol?"undefined":b(Symbol))!="undefined"&&"undefined"!=b(Symbol.iterator)&&(iT[Symbol.iterator]=function(){var e=this,t={value:void 0,done:!1},r=0,n=this.length;return p({next:function(){return r<n?t.value=e[r++]:(t.value=void 0,t.done=!0),t}},Symbol.iterator,function(){return this})});var iP=eq({nodeDimensionsIncludeLabels:!1}),iS={layoutDimensions:function(e){if(e=iP(e),this.takesUpSpace())if(e.nodeDimensionsIncludeLabels){var t,r=this.boundingBox();t={w:r.w,h:r.h}}else t={w:this.outerWidth(),h:this.outerHeight()};else t={w:0,h:0};return(0===t.w||0===t.h)&&(t.w=t.h=1),t},layoutPositions:function(e,t,r){var n=this.nodes().filter(function(e){return!e.isParent()}),i=this.cy(),a=t.eles,o=function(e){return e.id()},s=F(r,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var l=function(e,t,r){var n={x:t.x1+t.w/2,y:t.y1+t.h/2},i={x:(r.x-n.x)*e,y:(r.y-n.y)*e};return{x:n.x+i.x,y:n.y+i.y}},u=t.spacingFactor&&1!==t.spacingFactor,c=function(){if(!u)return null;for(var e=tb(),t=0;t<n.length;t++){var r=s(n[t],t);tE(e,r.x,r.y)}return e}(),d=F(function(e,r){var n=s(e,r);return u&&(n=l(Math.abs(t.spacingFactor),c,n)),null!=t.transform&&(n=t.transform(e,n)),n},o);if(t.animate){for(var h=0;h<n.length;h++){var f=n[h],p=d(f,h);if(null==t.animateFilter||t.animateFilter(f,h)){var v=f.animation({position:p,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(v)}else f.position(p)}if(t.fit){var g=i.animation({fit:{boundingBox:a.boundingBoxAt(d),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(g)}else if(void 0!==t.zoom&&void 0!==t.pan){var y=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}e.animations.forEach(function(e){return e.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),ne.all(e.animations.map(function(e){return e.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else n.positions(d),t.fit&&i.fit(t.eles,t.padding),null!=t.zoom&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){return this.cy().makeLayout(J({},e,{eles:this}))}};function iB(e,t,r){var n,i=r._private,a=i.styleCache=i.styleCache||[];return null!=(n=a[e])?n:n=a[e]=t(r)}function iD(e,t){return e=eC(e),function(r){return iB(e,t,r)}}function iA(e,t){e=eC(e);var r=function(e){return t.call(e)};return function(){var t=this[0];if(t)return iB(e,r,t)}}iS.createLayout=iS.makeLayout=iS.layout;var iM={recalculateRenderedStyle:function(e){var t=this.cy(),r=t.renderer(),n=t.styleEnabled();return r&&n&&r.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e,t=this.cy(),r=function(e){return e._private.styleCache=null};return t.hasCompoundNodes()?((e=this.spawnSelf().merge(this.descendants()).merge(this.parents())).merge(e.connectedEdges()),e.forEach(r)):this.forEach(function(e){r(e),e.connectedEdges().forEach(r)}),this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching())return t._private.batchStyleEles.merge(this),this;var r=t.hasCompoundNodes(),n=this;e=!!e||void 0===e,r&&(n=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=n;return e?i.emitAndNotify("style"):i.emit("style"),n.forEach(function(e){return e._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var t=0;t<this.length;t++){var r=this[t];r._private.styleDirty&&(r._private.styleDirty=!1,e.style().apply(r))}},parsedStyle:function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this[0],n=r.cy();if(n.styleEnabled()&&r){r._private.styleDirty&&(r._private.styleDirty=!1,n.style().apply(r));var i=r._private.style[e];return null!=i?i:t?n.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(t.cy().styleEnabled()&&t){var r=t.pstyle(e);return void 0!==r.pfValue?r.pfValue:r.value}},numericStyleUnits:function(e){var t=this[0];if(t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=this[0];if(r)return t.style().getRenderedStyle(r,e)},style:function(e,t){var r=this.cy();if(!r.styleEnabled())return this;var n=r.style();if(A(e))n.applyBypass(this,e,!1),this.emitAndNotify("style");else if(S(e))if(void 0===t){var i=this[0];return i?n.getStylePropertyValue(i,e):void 0}else n.applyBypass(this,e,t,!1),this.emitAndNotify("style");else if(void 0===e){var a=this[0];return a?n.getRawStyle(a):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var r=t.style();if(void 0===e)for(var n=0;n<this.length;n++){var i=this[n];r.removeAllBypasses(i,!1)}else{e=e.split(/\s+/);for(var a=0;a<this.length;a++){var o=this[a];r.removeBypasses(o,e,!1)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),r=this[0];if(r){var n=r._private,i=r.pstyle("opacity").value;if(!t)return i;var a=n.data.parent?r.parents():null;if(a)for(var o=0;o<a.length;o++)i*=a[o].pstyle("opacity").value;return i}},transparent:function(){if(!this.cy().styleEnabled())return!1;var e=this[0],t=e.cy().hasCompoundNodes();if(e)if(!t)return 0===e.pstyle("opacity").value;else return 0===e.effectiveOpacity()},backgrounding:function(){return!!this.cy().styleEnabled()&&!!this[0]._private.backgrounding}};function iR(e,t){var r=e._private.data.parent?e.parents():null;if(r){for(var n=0;n<r.length;n++)if(!t(r[n]))return!1}return!0}function iN(e){var t=e.ok,r=e.edgeOkViaNode||e.ok,n=e.parentOk||e.ok;return function(){var e=this.cy();if(!e.styleEnabled())return!0;var i=this[0],a=e.hasCompoundNodes();if(i){var o=i._private;if(!t(i))return!1;if(i.isNode())return!a||iR(i,n);var s=o.source,l=o.target;return r(s)&&(!a||iR(s,r))&&(s===l||r(l)&&(!a||iR(l,r)))}}}var iI=iD("eleTakesUpSpace",function(e){return"element"===e.pstyle("display").value&&0!==e.width()&&(!e.isNode()||0!==e.height())});iM.takesUpSpace=iA("takesUpSpace",iN({ok:iI})),iM.interactive=iA("interactive",iN({ok:iD("eleInteractive",function(e){return"yes"===e.pstyle("events").value&&"visible"===e.pstyle("visibility").value&&iI(e)}),parentOk:iD("parentInteractive",function(e){return"visible"===e.pstyle("visibility").value&&iI(e)}),edgeOkViaNode:iI})),iM.noninteractive=function(){var e=this[0];if(e)return!e.interactive()},iM.visible=iA("visible",iN({ok:iD("eleVisible",function(e){return"visible"===e.pstyle("visibility").value&&0!==e.pstyle("opacity").pfValue&&iI(e)}),edgeOkViaNode:iI})),iM.hidden=function(){var e=this[0];if(e)return!e.visible()},iM.isBundledBezier=iA("isBundledBezier",function(){return!!this.cy().styleEnabled()&&!this.removed()&&"bezier"===this.pstyle("curve-style").value&&this.takesUpSpace()}),iM.bypass=iM.css=iM.style,iM.renderedCss=iM.renderedStyle,iM.removeBypass=iM.removeCss=iM.removeStyle,iM.pstyle=iM.parsedStyle;var iL={};function iO(e){return function(){var t=arguments,r=[];if(2===t.length){var n=t[0],i=t[1];this.on(e.event,n,i)}else if(1===t.length&&B(t[0])){var a=t[0];this.on(e.event,a)}else if(0===t.length||1===t.length&&D(t[0])){for(var o=1===t.length?t[0]:null,s=0;s<this.length;s++){var l=this[s],u=!e.ableField||l._private[e.ableField],c=l._private[e.field]!=e.value;if(e.overrideAble){var d=e.overrideAble(l);if(void 0!==d&&(u=d,!d))return this}u&&(l._private[e.field]=e.value,c&&r.push(l))}var h=this.spawn(r);h.updateStyle(),h.emit(e.event),o&&h.emit(o)}return this}}function iz(e){iL[e.field]=function(){var t=this[0];if(t){if(e.overrideField){var r=e.overrideField(t);if(void 0!==r)return r}return t._private[e.field]}},iL[e.on]=iO({event:e.on,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!0}),iL[e.off]=iO({event:e.off,field:e.field,ableField:e.ableField,overrideAble:e.overrideAble,value:!1})}iz({field:"locked",overrideField:function(e){return!!e.cy().autolock()||void 0},on:"lock",off:"unlock"}),iz({field:"grabbable",overrideField:function(e){return!(e.cy().autoungrabify()||e.pannable())&&void 0},on:"grabify",off:"ungrabify"}),iz({field:"selected",ableField:"selectable",overrideAble:function(e){return!e.cy().autounselectify()&&void 0},on:"select",off:"unselect"}),iz({field:"selectable",overrideField:function(e){return!e.cy().autounselectify()&&void 0},on:"selectify",off:"unselectify"}),iL.deselect=iL.unselect,iL.grabbed=function(){var e=this[0];if(e)return e._private.grabbed},iz({field:"active",on:"activate",off:"unactivate"}),iz({field:"pannable",on:"panify",off:"unpanify"}),iL.inactive=function(){var e=this[0];if(e)return!e._private.active};var ij={},iV=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode()){for(var a=!1,o=i.connectedEdges(),s=0;s<o.length;s++){var l=o[s],u=l.source(),c=l.target();if(e.noIncomingEdges&&c===i&&u!==i||e.noOutgoingEdges&&u===i&&c!==i){a=!0;break}}a||r.push(i)}}return this.spawn(r,!0).filter(t)}},iF=function(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n];if(i.isNode())for(var a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target();e.outgoing&&l===i?(r.push(s),r.push(u)):e.incoming&&u===i&&(r.push(s),r.push(l))}}return this.spawn(r,!0).filter(t)}},iX=function(e){return function(t){for(var r=this,n=[],i={};;){var a=e.outgoing?r.outgoers():r.incomers();if(0===a.length)break;for(var o=!1,s=0;s<a.length;s++){var l=a[s],u=l.id();i[u]||(i[u]=!0,n.push(l),o=!0)}if(!o)break;r=a}return this.spawn(n,!0).filter(t)}};function iq(e){return function(t){for(var r=[],n=0;n<this.length;n++){var i=this[n]._private[e.attr];i&&r.push(i)}return this.spawn(r,!0).filter(t)}}function iY(e){return function(t){var r=[],n=this._private.cy,i=e||{};S(t)&&(t=n.$(t));for(var a=0;a<t.length;a++)for(var o=t[a]._private.edges,s=0;s<o.length;s++){var l=o[s],u=l._private.data,c=this.hasElementWithId(u.source)&&t.hasElementWithId(u.target),d=t.hasElementWithId(u.source)&&this.hasElementWithId(u.target);if(c||d){if((i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!d))continue;r.push(l)}}return this.spawn(r,!0)}}function iW(e){return e=J({},{codirected:!1},e),function(t){for(var r=[],n=this.edges(),i=e,a=0;a<n.length;a++)for(var o=n[a]._private,s=o.source,l=s._private.data.id,u=o.data.target,c=s._private.edges,d=0;d<c.length;d++){var h=c[d],f=h._private.data,p=f.target,v=f.source,g=p===u&&v===l,y=l===p&&u===v;(i.codirected&&g||!i.codirected&&(g||y))&&r.push(h)}return this.spawn(r,!0).filter(t)}}ij.clearTraversalCache=function(){for(var e=0;e<this.length;e++)this[e]._private.traversalCache=null},J(ij,{roots:iV({noIncomingEdges:!0}),leaves:iV({noOutgoingEdges:!0}),outgoers:nz(iF({outgoing:!0}),"outgoers"),successors:iX({outgoing:!0}),incomers:nz(iF({incoming:!0}),"incomers"),predecessors:iX({})}),J(ij,{neighborhood:nz(function(e){for(var t=[],r=this.nodes(),n=0;n<r.length;n++)for(var i=r[n],a=i.connectedEdges(),o=0;o<a.length;o++){var s=a[o],l=s.source(),u=s.target(),c=i===l?u:l;c.length>0&&t.push(c[0]),t.push(s[0])}return this.spawn(t,!0).filter(e)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}}),ij.neighbourhood=ij.neighborhood,ij.closedNeighbourhood=ij.closedNeighborhood,ij.openNeighbourhood=ij.openNeighborhood,J(ij,{source:nz(function(e){var t,r=this[0];return r&&(t=r._private.source||r.cy().collection()),t&&e?t.filter(e):t},"source"),target:nz(function(e){var t,r=this[0];return r&&(t=r._private.target||r.cy().collection()),t&&e?t.filter(e):t},"target"),sources:iq({attr:"source"}),targets:iq({attr:"target"})}),J(ij,{edgesWith:nz(iY(),"edgesWith"),edgesTo:nz(iY({thisIsSrc:!0}),"edgesTo")}),J(ij,{connectedEdges:nz(function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];if(n.isNode())for(var i=n._private.edges,a=0;a<i.length;a++){var o=i[a];t.push(o)}}return this.spawn(t,!0).filter(e)},"connectedEdges"),connectedNodes:nz(function(e){for(var t=[],r=0;r<this.length;r++){var n=this[r];n.isEdge()&&(t.push(n.source()[0]),t.push(n.target()[0]))}return this.spawn(t,!0).filter(e)},"connectedNodes"),parallelEdges:nz(iW(),"parallelEdges"),codirectedEdges:nz(iW({codirected:!0}),"codirectedEdges")}),J(ij,{components:function(e){var t=this,r=t.cy(),n=r.collection(),i=null==e?t.nodes():e.nodes(),a=[];null!=e&&i.empty()&&(i=e.sources());var o=function(e,t){n.merge(e),i.unmerge(e),t.merge(e)};if(i.empty())return t.spawn();do!function(){var e=r.collection();a.push(e);var n=i[0];o(n,e),t.bfs({directed:!1,roots:n,visit:function(t){return o(t,e)}}),e.forEach(function(r){r.connectedEdges().forEach(function(r){t.has(r)&&e.has(r.source())&&e.has(r.target())&&e.merge(r)})})}();while(i.length>0)return a},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}}),ij.componentsOf=ij.components;var iU=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(void 0===e)return void eL("A collection must have a reference to the core");var i=new eZ,a=!1;if(t){if(t.length>0&&A(t[0])&&!I(t[0])){a=!0;for(var o=[],s=new eQ,l=0,u=t.length;l<u;l++){var c=t[l];null==c.data&&(c.data={});var d=c.data;if(null==d.id)d.id=eV();else if(e.hasElementWithId(d.id)||s.has(d.id))continue;var h=new eJ(e,c,!1);o.push(h),s.add(d.id)}t=o}}else t=[];this.length=0;for(var f=0,p=t.length;f<p;f++){var v=t[f][0];if(null!=v){var g=v._private.data.id;(!r||!i.has(g))&&(r&&i.set(g,{index:this.length,ele:v}),this[this.length]=v,this.length++)}}this._private={eles:this,cy:e,get map(){return null==this.lazyMap&&this.rebuildMap(),this.lazyMap},set map(m){this.lazyMap=m},rebuildMap:function(){for(var e=this.lazyMap=new eZ,t=this.eles,r=0;r<t.length;r++){var n=t[r];e.set(n.id(),{index:r,ele:n})}}},r&&(this._private.map=i),a&&!n&&this.restore()},iG=eJ.prototype=iU.prototype=Object.create(Array.prototype);iG.instanceString=function(){return"collection"},iG.spawn=function(e,t){return new iU(this.cy(),e,t)},iG.spawnSelf=function(){return this.spawn(this)},iG.cy=function(){return this._private.cy},iG.renderer=function(){return this._private.cy.renderer()},iG.element=function(){return this[0]},iG.collection=function(){return L(this)?this:new iU(this._private.cy,[this])},iG.unique=function(){return new iU(this._private.cy,this,!0)},iG.hasElementWithId=function(e){return e=""+e,this._private.map.has(e)},iG.getElementById=function(e){e=""+e;var t=this._private.cy,r=this._private.map.get(e);return r?r.ele:new iU(t)},iG.$id=iG.getElementById,iG.poolIndex=function(){var e=this._private.cy._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index},iG.indexOf=function(e){var t=e[0]._private.data.id;return this._private.map.get(t).index},iG.indexOfId=function(e){return e=""+e,this._private.map.get(e).index},iG.json=function(e){var t=this.element(),r=this.cy();if(null==t&&e)return this;if(null!=t){var n=t._private;if(A(e)){if(r.startBatch(),e.data){t.data(e.data);var i=n.data;if(t.isEdge()){var a=!1,o={},s=e.data.source,l=e.data.target;null!=s&&s!=i.source&&(o.source=""+s,a=!0),null!=l&&l!=i.target&&(o.target=""+l,a=!0),a&&(t=t.move(o))}else{var u="parent"in e.data,c=e.data.parent;u&&(null!=c||null!=i.parent)&&c!=i.parent&&(void 0===c&&(c=null),null!=c&&(c=""+c),t=t.move({parent:c}))}}e.position&&t.position(e.position);var d=function(r,i,a){var o=e[r];null!=o&&o!==n[r]&&(o?t[i]():t[a]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),null!=e.classes&&t.classes(e.classes),r.endBatch(),this}if(void 0===e){var h={data:ej(n.data),position:ej(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};h.classes="";var f=0;return n.classes.forEach(function(e){return h.classes+=0==f++?e:" "+e}),h}}},iG.jsons=function(){for(var e=[],t=0;t<this.length;t++){var r=this[t].json();e.push(r)}return e},iG.clone=function(){for(var e=this.cy(),t=[],r=0;r<this.length;r++){var n=new eJ(e,this[r].json(),!1);t.push(n)}return new iU(e,t)},iG.copy=iG.clone,iG.restore=function(){for(var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=this.cy(),n=r._private,i=[],a=[],o=0,s=this.length;o<s;o++){var l=this[o];(!t||l.removed())&&(l.isNode()?i.push(l):a.push(l))}R=i.concat(a);var u=function(){R.splice(N,1),N--};for(N=0;N<R.length;N++){var c=R[N],d=c._private,h=d.data;if(c.clearTraversalCache(),t||d.removed){if(void 0===h.id)h.id=eV();else if(M(h.id))h.id=""+h.id;else if(j(h.id)||!S(h.id)){eL("Can not create element with invalid string ID `"+h.id+"`"),u();continue}else if(r.hasElementWithId(h.id)){eL("Can not create second element with ID `"+h.id+"`"),u();continue}}var f=h.id;if(c.isNode()){var p=d.position;null==p.x&&(p.x=0),null==p.y&&(p.y=0)}if(c.isEdge()){for(var v=["source","target"],g=v.length,y=!1,b=0;b<g;b++){var x=v[b],w=h[x];M(w)&&(w=h[x]=""+h[x]),null==w||""===w?(eL("Can not create edge `"+f+"` with unspecified "+x),y=!0):r.hasElementWithId(w)||(eL("Can not create edge `"+f+"` with nonexistant "+x+" `"+w+"`"),y=!0)}if(y){u();continue}var E=r.getElementById(h.source),k=r.getElementById(h.target);E.same(k)?E._private.edges.push(c):(E._private.edges.push(c),k._private.edges.push(c)),c._private.source=E,c._private.target=k}d.map=new eZ,d.map.set(f,{ele:c,index:0}),d.removed=!1,t&&r.addToPool(c)}for(var _=0;_<i.length;_++){var C=i[_],T=C._private.data;M(T.parent)&&(T.parent=""+T.parent);var P=T.parent;if(null!=P||C._private.parent){var B=C._private.parent?r.collection().merge(C._private.parent):r.getElementById(P);if(B.empty())T.parent=void 0;else if(B[0].removed())ez("Node added with missing parent, reference to parent removed"),T.parent=void 0,C._private.parent=null;else{for(var D=!1,A=B;!A.empty();){if(C.same(A)){D=!0,T.parent=void 0;break}A=A.parent()}D||(B[0]._private.children.push(C),C._private.parent=B[0],n.hasCompoundNodes=!0)}}}if(R.length>0){for(var R,N,I,L=R.length===this.length?this:new iU(r,R),O=0;O<L.length;O++){var z=L[O];z.isNode()||(z.parallelEdges().clearTraversalCache(),z.source().clearTraversalCache(),z.target().clearTraversalCache())}(n.hasCompoundNodes?r.collection().merge(L).merge(L.connectedNodes()).merge(L.parent()):L).dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(e),e?L.emitAndNotify("add"):t&&L.emit("add")}return this},iG.removed=function(){var e=this[0];return e&&e._private.removed},iG.inside=function(){var e=this[0];return e&&!e._private.removed},iG.remove=function(){for(var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=[],n={},i=this._private.cy,a=0,o=this.length;a<o;a++)!function e(i){var a=n[i.id()];if(!(t&&i.removed())&&!a)if(n[i.id()]=!0,i.isNode()){r.push(i);for(var o=i._private.edges,s=0;s<o.length;s++)e(o[s]);for(var l=i._private.children,u=0;u<l.length;u++)e(l[u])}else r.unshift(i)}(this[a]);function s(e,t){eY(e._private.edges,t),e.clearTraversalCache()}var l=[];l.ids={},this.dirtyCompoundBoundsCache(),t&&i.removeFromPool(r);for(var u=0;u<r.length;u++){var c=r[u];if(c.isEdge()){var d=c.source()[0],h=c.target()[0];s(d,c),s(h,c);for(var f=c.parallelEdges(),p=0;p<f.length;p++){var v=f[p];v.clearTraversalCache(),v.isBundledBezier()&&v.dirtyBoundingBoxCache()}}else{var g=c.parent();0!==g.length&&function(e,t){t=t[0];var r=(e=e[0])._private.children,n=e.id();eY(r,t),t._private.parent=null,l.ids[n]||(l.ids[n]=!0,l.push(e))}(g,c)}t&&(c._private.removed=!0)}var y=i._private.elements;i._private.hasCompoundNodes=!1;for(var b=0;b<y.length;b++)if(y[b].isParent()){i._private.hasCompoundNodes=!0;break}var x=new iU(this.cy(),r);x.size()>0&&(e?x.emitAndNotify("remove"):t&&x.emit("remove"));for(var w=0;w<l.length;w++){var E=l[w];t&&E.removed()||E.updateStyle()}return x},iG.move=function(e){var t=this._private.cy,r=this,n=function(e){return null==e?e:""+e};if(void 0!==e.source||void 0!==e.target){var i=n(e.source),a=n(e.target),o=null!=i&&t.hasElementWithId(i),s=null!=a&&t.hasElementWithId(a);(o||s)&&(t.batch(function(){r.remove(!1,!1),r.emitAndNotify("moveout");for(var e=0;e<r.length;e++){var t=r[e],n=t._private.data;t.isEdge()&&(o&&(n.source=i),s&&(n.target=a))}r.restore(!1,!1)}),r.emitAndNotify("move"))}else if(void 0!==e.parent){var l=n(e.parent);if(null===l||t.hasElementWithId(l)){var u=null===l?void 0:l;t.batch(function(){var e=r.remove(!1,!1);e.emitAndNotify("moveout");for(var t=0;t<r.length;t++){var n=r[t],i=n._private.data;n.isNode()&&(i.parent=u)}e.restore(!1,!1)}),r.emitAndNotify("move")}}return this},[r5,nm,nb,nO,nj,lo,nY,is,ik,i_,{isNode:function(){return"nodes"===this.group()},isEdge:function(){return"edges"===this.group()},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},iT,iS,iM,iL,ij].forEach(function(e){J(iG,e)});var iH=function(){function e(e){return-e.tension*e.x-e.friction*e.v}function t(t,r,n){var i={x:t.x+n.dx*r,v:t.v+n.dv*r,tension:t.tension,friction:t.friction};return{dx:i.v,dv:e(i)}}return function r(n,i,a){var o,s,l,u,c,d,h,f,p,v,g,y={x:-1,v:0,tension:null,friction:null},b=[0],x=0;for(n=parseFloat(n)||500,i=parseFloat(i)||20,a=a||null,y.tension=n,y.friction=i,v=(p=null!==a)?(x=r(n,i))/a*.016:.016;o=g||y,s=v,l={dx:o.v,dv:e(o)},u=t(o,.5*s,l),c=t(o,.5*s,u),d=t(o,s,c),h=1/6*(l.dx+2*(u.dx+c.dx)+d.dx),f=1/6*(l.dv+2*(u.dv+c.dv)+d.dv),o.x=o.x+h*s,o.v=o.v+f*s,g=o,b.push(1+g.x),x+=16,Math.abs(g.x)>1e-4&&Math.abs(g.v)>1e-4;);return p?function(e){return b[e*(b.length-1)|0]}:x}}(),iK=function(e,t,r,n){var i=function(e,t,r,n){var i="undefined"!=typeof Float32Array;if(4!=arguments.length)return!1;for(var a=0;a<4;++a)if("number"!=typeof arguments[a]||isNaN(arguments[a])||!isFinite(arguments[a]))return!1;e=Math.min(e,1),r=Math.min(r,1),e=Math.max(e,0),r=Math.max(r,0);var o=i?new Float32Array(11):Array(11);function s(e,t,r){return(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e}function l(e,t,r){return 3*(1-3*r+3*t)*e*e+2*(3*r-6*t)*e+3*t}var u=!1,c=function(i){return(u||(u=!0,(e!==t||r!==n)&&function(){for(var t=0;t<11;++t)o[t]=s(.1*t,e,r)}()),e===t&&r===n)?i:0===i?0:1===i?1:s(function(t){for(var n=0,i=1;10!==i&&o[i]<=t;++i)n+=.1;var a=n+(t-o[--i])/(o[i+1]-o[i])*.1,u=l(a,e,r);if(u>=.001){for(var c=a,d=0;d<4;++d){var h=l(c,e,r);if(0===h)break;var f=s(c,e,r)-t;c-=f/h}return c}return 0===u?a:function(t,n,i){var a,o,l=0;do(a=s(o=n+(i-n)/2,e,r)-t)>0?i=o:n=o;while(Math.abs(a)>1e-7&&++l<10)return o}(t,n,n+.1)}(i),t,n)};c.getControlPoints=function(){return[{x:e,y:t},{x:r,y:n}]};var d="generateBezier("+[e,t,r,n]+")";return c.toString=function(){return d},c}(e,t,r,n);return function(e,t,r){return e+(t-e)*i(r)}},iZ={linear:function(e,t,r){return e+(t-e)*r},ease:iK(.25,.1,.25,1),"ease-in":iK(.42,0,1,1),"ease-out":iK(0,0,.58,1),"ease-in-out":iK(.42,0,.58,1),"ease-in-sine":iK(.47,0,.745,.715),"ease-out-sine":iK(.39,.575,.565,1),"ease-in-out-sine":iK(.445,.05,.55,.95),"ease-in-quad":iK(.55,.085,.68,.53),"ease-out-quad":iK(.25,.46,.45,.94),"ease-in-out-quad":iK(.455,.03,.515,.955),"ease-in-cubic":iK(.55,.055,.675,.19),"ease-out-cubic":iK(.215,.61,.355,1),"ease-in-out-cubic":iK(.645,.045,.355,1),"ease-in-quart":iK(.895,.03,.685,.22),"ease-out-quart":iK(.165,.84,.44,1),"ease-in-out-quart":iK(.77,0,.175,1),"ease-in-quint":iK(.755,.05,.855,.06),"ease-out-quint":iK(.23,1,.32,1),"ease-in-out-quint":iK(.86,0,.07,1),"ease-in-expo":iK(.95,.05,.795,.035),"ease-out-expo":iK(.19,1,.22,1),"ease-in-out-expo":iK(1,0,0,1),"ease-in-circ":iK(.6,.04,.98,.335),"ease-out-circ":iK(.075,.82,.165,1),"ease-in-out-circ":iK(.785,.135,.15,.86),spring:function(e,t,r){if(0===r)return iZ.linear;var n=iH(e,t,r);return function(e,t,r){return e+(t-e)*n(r)}},"cubic-bezier":iK};function i$(e,t,r,n,i){if(1===n||t===r)return r;var a=i(t,r,n);return null==e||((e.roundValue||e.color)&&(a=Math.round(a)),void 0!==e.min&&(a=Math.max(a,e.min)),void 0!==e.max&&(a=Math.min(a,e.max))),a}function iQ(e,t){return null==e.pfValue&&null==e.value?e:null!=e.pfValue&&(null==t||"%"!==t.type.units)?e.pfValue:e.value}function iJ(e,t,r,n,i){var a=null!=i?i.type:null;r<0?r=0:r>1&&(r=1);var o=iQ(e,i),s=iQ(t,i);if(M(o)&&M(s))return i$(a,o,s,r,n);if(D(o)&&D(s)){for(var l=[],u=0;u<s.length;u++){var c=o[u],d=s[u];if(null!=c&&null!=d){var h=i$(a,c,d,r,n);l.push(h)}else l.push(d)}return l}}function i0(e,t){return null!=e&&null!=t&&(!!(M(e)&&M(t))||!!e&&!!t)}function i1(e,t){var r=t._private.aniEles,n=[];function i(t,r){var i=t._private,a=i.animation.current,o=i.animation.queue,s=!1;if(0===a.length){var l=o.shift();l&&a.push(l)}for(var u=function(e){for(var t=e.length-1;t>=0;t--)(0,e[t])();e.splice(0,e.length)},c=a.length-1;c>=0;c--){var d=a[c],h=d._private;if(h.stopped){a.splice(c,1),h.hooked=!1,h.playing=!1,h.started=!1,u(h.frames);continue}(h.playing||h.applying)&&(h.playing&&h.applying&&(h.applying=!1),h.started||function(e,t,r,n){var i=t._private;i.started=!0,i.startTime=r-i.progress*i.duration}(0,d,e),function(e,t,r,n){var i,a,o,s,l=!n,u=e._private,c=t._private,d=c.easing,h=c.startTime,f=(n?e:e.cy()).style();c.easingImpl||(null==d?c.easingImpl=iZ.linear:(i=S(d)?f.parse("transition-timing-function",d).value:d,S(i)?(a=i,o=[]):(a=i[1],o=i.slice(2).map(function(e){return+e})),o.length>0?("spring"===a&&o.push(c.duration),c.easingImpl=iZ[a].apply(null,o)):c.easingImpl=iZ[a]));var p=c.easingImpl;if(s=0===c.duration?1:(r-h)/c.duration,c.applying&&(s=c.progress),s<0?s=0:s>1&&(s=1),null==c.delay){var v=c.startPosition,g=c.position;if(g&&l&&!e.locked()){var y={};i0(v.x,g.x)&&(y.x=iJ(v.x,g.x,s,p)),i0(v.y,g.y)&&(y.y=iJ(v.y,g.y,s,p)),e.position(y)}var b=c.startPan,x=c.pan,w=u.pan,E=null!=x&&n;E&&(i0(b.x,x.x)&&(w.x=iJ(b.x,x.x,s,p)),i0(b.y,x.y)&&(w.y=iJ(b.y,x.y,s,p)),e.emit("pan"));var k=c.startZoom,_=c.zoom,C=null!=_&&n;C&&(i0(k,_)&&(u.zoom=tm(u.minZoom,iJ(k,_,s,p),u.maxZoom)),e.emit("zoom")),(E||C)&&e.emit("viewport");var T=c.style;if(T&&T.length>0&&l){for(var P=0;P<T.length;P++){var B=T[P],D=B.name,A=c.startStyle[D],M=f.properties[A.name],R=iJ(A,B,s,p,M);f.overrideBypass(e,D,R)}e.emit("style")}}c.progress=s}(t,d,e,r),h.applying&&(h.applying=!1),u(h.frames),null!=h.step&&h.step(e),d.completed()&&(a.splice(c,1),h.hooked=!1,h.playing=!1,h.started=!1,u(h.completes)),s=!0)}return r||0!==a.length||0!==o.length||n.push(t),s}for(var a=!1,o=0;o<r.length;o++){var s=i(r[o]);a=a||s}var l=i(t,!0);(a||l)&&(r.length>0?t.notify("draw",r):t.notify("draw")),r.unmerge(n),t.emit("step")}var i2={animate:ny.animate(),animation:ny.animation(),animated:ny.animated(),clearQueue:ny.clearQueue(),delay:ny.delay(),delayAnimation:ny.delayAnimation(),stop:ny.stop(),addToAnimationPool:function(e){this.styleEnabled()&&this._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,e.styleEnabled()){var t=e.renderer();t&&t.beforeRender?t.beforeRender(function(t,r){i1(r,e)},t.beforeRenderPriorities.animations):function t(){e._private.animationsRunning&&em(function(r){i1(r,e),t()})}()}}},i5={qualifierCompare:function(e,t){return null==e||null==t?null==e&&null==t:e.sameText(t)},eventMatches:function(e,t,r){var n=t.qualifier;return null==n||e!==r.target&&I(r.target)&&n.matches(r.target)},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,r){return null!=t.qualifier?r.target:e}},i3=function(e){return S(e)?new nI(e):e},i4={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new ig(i5,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,r){return this.emitter().on(e,i3(t),r),this},removeListener:function(e,t,r){return this.emitter().removeListener(e,i3(t),r),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,r){return this.emitter().one(e,i3(t),r),this},once:function(e,t,r){return this.emitter().one(e,i3(t),r),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};ny.eventAliasesOn(i4);var i9={png:function(e){return e=e||{},this._private.renderer.png(e)},jpg:function(e){var t=this._private.renderer;return(e=e||{}).bg=e.bg||"#fff",t.jpg(e)}};i9.jpeg=i9.jpg;var i6={layout:function(e){if(null==e)return void eL("Layout options must be specified to make a layout");if(null==e.name)return void eL("A `name` must be specified to make a layout");var t,r=e.name,n=this.extension("layout",r);return null==n?void eL("No such layout `"+r+"` found.  Did you forget to import it and `cytoscape.use()` it?"):(t=S(e.eles)?this.$(e.eles):null!=e.eles?e.eles:this.$(),new n(J({},e,{cy:this,eles:t})))}};i6.createLayout=i6.makeLayout=i6.layout;var i7=eq({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),i8={renderTo:function(e,t,r,n){return this._private.renderer.renderTo(e,t,r,n),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this.extension("renderer",e.name);if(null==t)return void eL("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));void 0!==e.wheelSensitivity&&ez("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=i7(e);r.cy=this,this._private.renderer=new t(r),this.notify("init")},destroyRenderer:function(){this.notify("destroy");var e=this.container();if(e)for(e._cyreg=null;e.childNodes.length>0;)e.removeChild(e.childNodes[0]);this._private.renderer=null,this.mutableElements().forEach(function(e){var t=e._private;t.rscratch={},t.rstyle={},t.animation.current=[],t.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};i8.invalidateDimensions=i8.resize;var ae={collection:function(e,t){return S(e)?this.$(e):N(e)?e.collection():D(e)?(t||(t={}),new iU(this,e,t.unique,t.removed)):new iU(this)},nodes:function(e){var t=this.$(function(e){return e.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(e){return e.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};ae.elements=ae.filter=ae.$;var at={};at.apply=function(e){for(var t=this._private.cy.collection(),r=0;r<e.length;r++){var n=e[r],i=this.getContextMeta(n);if(!i.empty){var a=this.getContextStyle(i),o=this.applyContextStyle(i,a,n);n._private.appliedInitStyle?this.updateTransitions(n,o.diffProps):n._private.appliedInitStyle=!0,this.updateStyleHints(n)&&t.push(n)}}return t},at.getPropertiesDiff=function(e,t){var r=this._private.propDiffs=this._private.propDiffs||{},n=e+"-"+t,i=r[n];if(i)return i;for(var a=[],o={},s=0;s<this.length;s++){var l=this[s],u="t"===e[s],c="t"===t[s],d=u!==c,h=l.mappedProperties.length>0;if(d||c&&h){var f=void 0;d&&h||d?f=l.properties:h&&(f=l.mappedProperties);for(var p=0;p<f.length;p++){for(var v=f[p],g=v.name,y=!1,b=s+1;b<this.length;b++){var x=this[b];if("t"===t[b]&&(y=null!=x.properties[v.name]))break}o[g]||y||(o[g]=!0,a.push(g))}}}return r[n]=a,a},at.getContextMeta=function(e){for(var t,r="",n=e._private.styleCxtKey||"",i=0;i<this.length;i++){var a=this[i];a.selector&&a.selector.matches(e)?r+="t":r+="f"}return t=this.getPropertiesDiff(n,r),e._private.styleCxtKey=r,{key:r,diffPropNames:t,empty:0===t.length}},at.getContextStyle=function(e){var t=e.key,r=this._private.contextStyles=this._private.contextStyles||{};if(r[t])return r[t];for(var n={_private:{key:t}},i=0;i<this.length;i++){var a=this[i];if("t"===t[i])for(var o=0;o<a.properties.length;o++){var s=a.properties[o];n[s.name]=s}}return r[t]=n,n},at.applyContextStyle=function(e,t,r){for(var n=e.diffPropNames,i={},a=this.types,o=0;o<n.length;o++){var s=n[o],l=t[s],u=r.pstyle(s);if(!l)if(!u)continue;else l=u.bypass?{name:s,deleteBypassed:!0}:{name:s,delete:!0};if(u!==l){if(l.mapped===a.fn&&null!=u&&null!=u.mapping&&u.mapping.value===l.value){var c=u.mapping;if((c.fnValue=l.value(r))===c.prevFnValue)continue}var d=i[s]={prev:u};this.applyParsedProperty(r,l),d.next=r.pstyle(s),d.next&&d.next.bypass&&(d.next=d.next.bypassed)}}return{diffProps:i}},at.updateStyleHints=function(e){var t=e._private,r=this,n=r.propertyGroupNames,i=r.propertyGroupKeys,a=function(e,t,n){return r.getPropertiesHash(e,t,n)},o=t.styleKey;if(e.removed())return!1;var s="nodes"===t.group,l=e._private.style;n=Object.keys(l);for(var u=0;u<i.length;u++){var c=i[u];t.styleKeys[c]=[9261,5381]}for(var d=function(e,r){return t.styleKeys[r][0]=ex(e,t.styleKeys[r][0])},h=function(e,r){return t.styleKeys[r][1]=ew(e,t.styleKeys[r][1])},f=function(e,t){for(var r=0;r<e.length;r++){var n=e.charCodeAt(r);d(n,t),h(n,t)}},p=0;p<n.length;p++){var v=n[p],g=l[v];if(null!=g){var y,b,x=this.properties[v],w=x.type,E=x.groupKey,k=void 0;null!=x.hashOverride?k=x.hashOverride(e,g):null!=g.pfValue&&(k=g.pfValue);var _=null==x.enums?g.value:null,C=null!=k,T=null!=_,P=C||T,S=g.units;w.number&&P&&!w.multiple?(d(b=-128<(y=C?k:_)&&y<128&&Math.floor(y)!==y?2e9-(1024*y|0):y,E),h(b,E),C||null==S||f(S,E)):f(g.strValue,E)}}for(var B=[9261,5381],D=0;D<i.length;D++){var A=i[D],M=t.styleKeys[A];B[0]=ex(M[0],B[0]),B[1]=ew(M[1],B[1])}t.styleKey=2097152*B[0]+B[1];var R=t.styleKeys;t.labelDimsKey=eE(R.labelDimensions);var N=a(e,["label"],R.labelDimensions);if(t.labelKey=eE(N),t.labelStyleKey=eE(ek(R.commonLabel,N)),!s){var I=a(e,["source-label"],R.labelDimensions);t.sourceLabelKey=eE(I),t.sourceLabelStyleKey=eE(ek(R.commonLabel,I));var L=a(e,["target-label"],R.labelDimensions);t.targetLabelKey=eE(L),t.targetLabelStyleKey=eE(ek(R.commonLabel,L))}if(s){var O=t.styleKeys,z=O.nodeBody,j=O.nodeBorder,V=O.nodeOutline,F=O.backgroundImage,X=O.compound,q=O.pie,Y=O.stripe;t.nodeKey=eE([z,j,V,F,X,q,Y].filter(function(e){return null!=e}).reduce(ek,[9261,5381])),t.hasPie=null!=q&&9261!==q[0]&&5381!==q[1],t.hasStripe=null!=Y&&9261!==Y[0]&&5381!==Y[1]}return o!==t.styleKey},at.clearStyleHints=function(e){var t=e._private;t.styleCxtKey="",t.styleKeys={},t.styleKey=null,t.labelKey=null,t.labelStyleKey=null,t.sourceLabelKey=null,t.sourceLabelStyleKey=null,t.targetLabelKey=null,t.targetLabelStyleKey=null,t.nodeKey=null,t.hasPie=null,t.hasStripe=null},at.applyParsedProperty=function(e,t){var r=this,n=t,i=e._private.style,a=r.types,o=r.properties[n.name].type,s=n.bypass,l=i[n.name],u=l&&l.bypass,c=e._private,d="mapping",h=function(e){return null==e?null:null!=e.pfValue?e.pfValue:e.value},f=function(){var t=h(l),i=h(n);r.checkTriggers(e,n.name,t,i)};if("curve-style"===t.name&&e.isEdge()&&("bezier"!==t.value&&e.isLoop()||"haystack"===t.value&&(e.source().isParent()||e.target().isParent()))&&(n=t=this.parse(t.name,"bezier",s)),n.delete)return i[n.name]=void 0,f(),!0;if(n.deleteBypassed)if(!l)return f(),!0;else if(l.bypass)return l.bypassed=void 0,f(),!0;else return!1;if(n.deleteBypass)if(!l)return f(),!0;else if(l.bypass)return i[n.name]=l.bypassed,f(),!0;else return!1;var p=function(){ez("Do not assign mappings to elements without corresponding data (i.e. ele `"+e.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case a.mapData:for(var v,g,y=n.field.split("."),b=c.data,x=0;x<y.length&&b;x++)b=b[y[x]];if(null==b)return p(),!1;if(!M(b))return ez("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+b+"` for `"+e.id()+"` is non-numeric)"),!1;var w=n.fieldMax-n.fieldMin;if((g=0===w?0:(b-n.fieldMin)/w)<0?g=0:g>1&&(g=1),o.color){var E=n.valueMin[0],k=n.valueMax[0],_=n.valueMin[1],C=n.valueMax[1],T=n.valueMin[2],P=n.valueMax[2],S=null==n.valueMin[3]?1:n.valueMin[3],B=[Math.round(E+(k-E)*g),Math.round(_+(C-_)*g),Math.round(T+(P-T)*g),Math.round(S+((null==n.valueMax[3]?1:n.valueMax[3])-S)*g)];v={bypass:n.bypass,name:n.name,value:B,strValue:"rgb("+B[0]+", "+B[1]+", "+B[2]+")"}}else{if(!o.number)return!1;var D=n.valueMin+(n.valueMax-n.valueMin)*g;v=this.parse(n.name,D,n.bypass,d)}if(!v)return p(),!1;v.mapping=n,n=v;break;case a.data:for(var A=n.field.split("."),R=c.data,N=0;N<A.length&&R;N++)R=R[A[N]];if(null!=R&&(v=this.parse(n.name,R,n.bypass,d)),!v)return p(),!1;v.mapping=n,n=v;break;case a.fn:var I=n.value,L=null!=n.fnValue?n.fnValue:I(e);if(n.prevFnValue=L,null==L)return ez("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+e.id()+"` is null)"),!1;if(!(v=this.parse(n.name,L,n.bypass,d)))return ez("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+e.id()+"` is invalid)"),!1;v.mapping=ej(n),n=v;break;case void 0:break;default:return!1}return s?(u?n.bypassed=l.bypassed:n.bypassed=l,i[n.name]=n):u?l.bypassed=n:i[n.name]=n,f(),!0},at.cleanElements=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),t)for(var i=n._private.style,a=Object.keys(i),o=0;o<a.length;o++){var s=a[o],l=i[s];null!=l&&(l.bypass?l.bypassed=null:i[s]=null)}else n._private.style={}}},at.update=function(){this._private.cy.mutableElements().updateStyle()},at.updateTransitions=function(e,t){var r=this,n=e._private,i=e.pstyle("transition-property").value,a=e.pstyle("transition-duration").pfValue,o=e.pstyle("transition-delay").pfValue;if(i.length>0&&a>0){for(var s={},l=!1,u=0;u<i.length;u++){var c=i[u],d=e.pstyle(c),h=t[c];if(h){var f=h.prev,p=null!=h.next?h.next:d,v=!1,g=void 0;f&&(M(f.pfValue)&&M(p.pfValue)?(v=p.pfValue-f.pfValue,g=f.pfValue+1e-6*v):M(f.value)&&M(p.value)?(v=p.value-f.value,g=f.value+1e-6*v):D(f.value)&&D(p.value)&&(v=f.value[0]!==p.value[0]||f.value[1]!==p.value[1]||f.value[2]!==p.value[2],g=f.strValue),v&&(s[c]=p.strValue,this.applyBypass(e,c,g),l=!0))}}if(!l)return;n.transitioning=!0,new ne(function(t){o>0?e.delayAnimation(o).play().promise().then(t):t()}).then(function(){return e.animation({style:s,duration:a,easing:e.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){r.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(e,i),e.emitAndNotify("style"),n.transitioning=!1)},at.checkTrigger=function(e,t,r,n,i,a){var o=this.properties[t],s=i(o);!e.removed()&&null!=s&&s(r,n,e)&&a(o)},at.checkZOrderTrigger=function(e,t,r,n){var i=this;this.checkTrigger(e,t,r,n,function(e){return e.triggersZOrder},function(){i._private.cy.notify("zorder",e)})},at.checkBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(e){return e.triggersBounds},function(t){e.dirtyCompoundBoundsCache(),e.dirtyBoundingBoxCache()})},at.checkConnectedEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(e){return e.triggersBoundsOfConnectedEdges},function(t){e.connectedEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},at.checkParallelEdgesBoundsTrigger=function(e,t,r,n){this.checkTrigger(e,t,r,n,function(e){return e.triggersBoundsOfParallelEdges},function(t){e.parallelEdges().forEach(function(e){e.dirtyBoundingBoxCache()})})},at.checkTriggers=function(e,t,r,n){e.dirtyStyleCache(),this.checkZOrderTrigger(e,t,r,n),this.checkBoundsTrigger(e,t,r,n),this.checkConnectedEdgesBoundsTrigger(e,t,r,n),this.checkParallelEdgesBoundsTrigger(e,t,r,n)};var ar={};ar.applyBypass=function(e,t,r,n){var i=[];if("*"===t||"**"===t){if(void 0!==r)for(var a=0;a<this.properties.length;a++){var o=this.properties[a].name,s=this.parse(o,r,!0);s&&i.push(s)}}else if(S(t)){var l=this.parse(t,r,!0);l&&i.push(l)}else{if(!A(t))return!1;n=r;for(var u=Object.keys(t),c=0;c<u.length;c++){var d=u[c],h=t[d];if(void 0===h&&(h=t[q(d)]),void 0!==h){var f=this.parse(d,h,!0);f&&i.push(f)}}}if(0===i.length)return!1;for(var p=!1,v=0;v<e.length;v++){for(var g=e[v],y={},b=void 0,x=0;x<i.length;x++){var w=i[x];if(n){var E=g.pstyle(w.name);b=y[w.name]={prev:E}}p=this.applyParsedProperty(g,ej(w))||p,n&&(b.next=g.pstyle(w.name))}p&&this.updateStyleHints(g),n&&this.updateTransitions(g,y,!0)}return p},ar.overrideBypass=function(e,t,r){t=X(t);for(var n=0;n<e.length;n++){var i=e[n],a=i._private.style[t],o=this.properties[t].type,s=o.color,l=o.mutiple,u=a?null!=a.pfValue?a.pfValue:a.value:null;a&&a.bypass?(a.value=r,null!=a.pfValue&&(a.pfValue=r),s?a.strValue="rgb("+r.join(",")+")":l?a.strValue=r.join(" "):a.strValue=""+r,this.updateStyleHints(i)):this.applyBypass(i,t,r),this.checkTriggers(i,t,u,r)}},ar.removeAllBypasses=function(e,t){return this.removeBypasses(e,this.propertyNames,t)},ar.removeBypasses=function(e,t,r){for(var n=0;n<e.length;n++){for(var i=e[n],a={},o=0;o<t.length;o++){var s=t[o],l=this.properties[s],u=i.pstyle(l.name);if(u&&u.bypass){var c=this.parse(s,"",!0),d=a[l.name]={prev:u};this.applyParsedProperty(i,c),d.next=i.pstyle(l.name)}}this.updateStyleHints(i),r&&this.updateTransitions(i,a,!0)}};var an={};an.getEmSizeInPixels=function(){var e=this.containerCss("font-size");return null!=e?parseFloat(e):1},an.containerCss=function(e){var t=this._private.cy,r=t.container(),n=t.window();if(n&&r&&n.getComputedStyle)return n.getComputedStyle(r).getPropertyValue(e)};var ai={};ai.getRenderedStyle=function(e,t){return t?this.getStylePropertyValue(e,t,!0):this.getRawStyle(e,!0)},ai.getRawStyle=function(e,t){if(e=e[0]){for(var r={},n=0;n<this.properties.length;n++){var i=this.properties[n],a=this.getStylePropertyValue(e,i.name,t);null!=a&&(r[i.name]=a,r[q(i.name)]=a)}return r}},ai.getIndexedStyle=function(e,t,r,n){var i=e.pstyle(t)[r][n];return null!=i?i:e.cy().style().getDefaultProperty(t)[r][0]},ai.getStylePropertyValue=function(e,t,r){if(e=e[0]){var n=this.properties[t];n.alias&&(n=n.pointsTo);var i=n.type,a=e.pstyle(n.name);if(a){var o=a.value,s=a.units,l=a.strValue;if(r&&i.number&&null!=o&&M(o)){var u=e.cy().zoom(),c=function(e){return e*u},d=function(e,t){return c(e)+t},h=D(o);if(h?s.every(function(e){return null!=e}):null!=s)if(h)return o.map(function(e,t){return d(e,s[t])}).join(" ");else return d(o,s);return h?o.map(function(e){return S(e)?e:""+c(e)}).join(" "):""+c(o)}if(null!=l)return l}return null}},ai.getAnimationStartStyle=function(e,t){for(var r={},n=0;n<t.length;n++){var i=t[n].name,a=e.pstyle(i);void 0!==a&&(a=A(a)?this.parse(i,a.strValue):this.parse(i,a)),a&&(r[i]=a)}return r},ai.getPropsList=function(e){var t=[],r=this.properties;if(e)for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a],s=r[a]||r[X(a)],l=this.parse(s.name,o);l&&t.push(l)}return t},ai.getNonDefaultPropertiesHash=function(e,t,r){var n,i,a,o,s,l,u=r.slice();for(s=0;s<t.length;s++)if(n=t[s],null!=(i=e.pstyle(n,!1)))if(null!=i.pfValue)u[0]=ex(o,u[0]),u[1]=ew(o,u[1]);else for(l=0,a=i.strValue;l<a.length;l++)o=a.charCodeAt(l),u[0]=ex(o,u[0]),u[1]=ew(o,u[1]);return u},ai.getPropertiesHash=ai.getNonDefaultPropertiesHash;var aa={};aa.appendFromJson=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r.selector,i=r.style||r.css,a=Object.keys(i);this.selector(n);for(var o=0;o<a.length;o++){var s=a[o],l=i[s];this.css(s,l)}}return this},aa.fromJson=function(e){return this.resetToDefault(),this.appendFromJson(e),this},aa.json=function(){for(var e=[],t=this.defaultLength;t<this.length;t++){for(var r=this[t],n=r.selector,i=r.properties,a={},o=0;o<i.length;o++){var s=i[o];a[s.name]=s.strValue}e.push({selector:n?n.toString():"core",style:a})}return e};var ao={};ao.appendFromString=function(e){var t,r,n,i=""+e;function a(){i=i.length>t.length?i.substr(t.length):""}function o(){r=r.length>n.length?r.substr(n.length):""}for(i=i.replace(/[/][*](\s|.)+?[*][/]/g,"");!i.match(/^\s*$/);){var s=i.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!s){ez("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+i);break}t=s[0];var l=s[1];if("core"!==l&&new nI(l).invalid){ez("Skipping parsing of block: Invalid selector found in string stylesheet: "+l),a();continue}var u=s[2],c=!1;r=u;for(var d=[];!r.match(/^\s*$/);){var h=r.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!h){ez("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+u),c=!0;break}n=h[0];var f=h[1],p=h[2];if(!this.properties[f]){ez("Skipping property: Invalid property name in: "+n),o();continue}if(!this.parse(f,p)){ez("Skipping property: Invalid property definition in: "+n),o();continue}d.push({name:f,val:p}),o()}if(c){a();break}this.selector(l);for(var v=0;v<d.length;v++){var g=d[v];this.css(g.name,g.val)}a()}return this},ao.fromString=function(e){return this.resetToDefault(),this.appendFromString(e),this};var as={};!function(){var e=function(e){return"^"+e+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},t=function(e){var t=G+"|\\w+|"+K+"|"+$+"|\\#[0-9a-fA-F]{3}|\\#[0-9a-fA-F]{6}";return"^"+e+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+G+")\\s*\\,\\s*("+G+")\\s*,\\s*("+t+")\\s*\\,\\s*("+t+")\\)$"},r=["^url\\s*\\(\\s*['\"]?(.+?)['\"]?\\s*\\)$","^(none)$","^(.+)$"];as.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:e("data")},layoutData:{mapping:!0,regex:e("layoutData")},scratch:{mapping:!0,regex:e("scratch")},mapData:{mapping:!0,regex:t("mapData")},mapLayoutData:{mapping:!0,regex:t("mapLayoutData")},mapScratch:{mapping:!0,regex:t("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:r,singleRegexMatchValue:!0},urls:{regexes:r,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(e,t){switch(e.length){case 2:return"deg"!==t[0]&&"rad"!==t[0]&&"deg"!==t[1]&&"rad"!==t[1];case 1:return S(e[0])||"deg"===t[0]||"rad"===t[0];default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+G+")\\s*,\\s*("+G+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+G+")\\s*,\\s*("+G+")\\s*,\\s*("+G+")\\s*,\\s*("+G+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(e){var t=e.length;return 1===t||2===t||4===t}}};var n=function(e,t){return(null==e||null==t)&&e!==t||0==e&&0!=t||0!=e&&0==t},i=function(e,t){return e!=t},a=as.types,o=[{name:"label",type:a.text,triggersBounds:i,triggersZOrder:function(e,t){var r=j(e),n=j(t);return r&&!n||!r&&n}},{name:"text-rotation",type:a.textRotation,triggersBounds:i},{name:"text-margin-x",type:a.bidirectionalSize,triggersBounds:i},{name:"text-margin-y",type:a.bidirectionalSize,triggersBounds:i}],s=[{name:"source-label",type:a.text,triggersBounds:i},{name:"source-text-rotation",type:a.textRotation,triggersBounds:i},{name:"source-text-margin-x",type:a.bidirectionalSize,triggersBounds:i},{name:"source-text-margin-y",type:a.bidirectionalSize,triggersBounds:i},{name:"source-text-offset",type:a.size,triggersBounds:i}],l=[{name:"target-label",type:a.text,triggersBounds:i},{name:"target-text-rotation",type:a.textRotation,triggersBounds:i},{name:"target-text-margin-x",type:a.bidirectionalSize,triggersBounds:i},{name:"target-text-margin-y",type:a.bidirectionalSize,triggersBounds:i},{name:"target-text-offset",type:a.size,triggersBounds:i}],u=[{name:"font-family",type:a.fontFamily,triggersBounds:i},{name:"font-style",type:a.fontStyle,triggersBounds:i},{name:"font-weight",type:a.fontWeight,triggersBounds:i},{name:"font-size",type:a.size,triggersBounds:i},{name:"text-transform",type:a.textTransform,triggersBounds:i},{name:"text-wrap",type:a.textWrap,triggersBounds:i},{name:"text-overflow-wrap",type:a.textOverflowWrap,triggersBounds:i},{name:"text-max-width",type:a.size,triggersBounds:i},{name:"text-outline-width",type:a.size,triggersBounds:i},{name:"line-height",type:a.positiveNumber,triggersBounds:i}],c=[{name:"text-valign",type:a.valign,triggersBounds:i},{name:"text-halign",type:a.halign,triggersBounds:i},{name:"color",type:a.color},{name:"text-outline-color",type:a.color},{name:"text-outline-opacity",type:a.zeroOneNumber},{name:"text-background-color",type:a.color},{name:"text-background-opacity",type:a.zeroOneNumber},{name:"text-background-padding",type:a.size,triggersBounds:i},{name:"text-border-opacity",type:a.zeroOneNumber},{name:"text-border-color",type:a.color},{name:"text-border-width",type:a.size,triggersBounds:i},{name:"text-border-style",type:a.borderStyle,triggersBounds:i},{name:"text-background-shape",type:a.textBackgroundShape,triggersBounds:i},{name:"text-justification",type:a.justification},{name:"box-select-labels",type:a.bool,triggersBounds:i}],d=[{name:"events",type:a.bool,triggersZOrder:i},{name:"text-events",type:a.bool,triggersZOrder:i},{name:"box-selection",type:a.boxSelection,triggersZOrder:i}],h=[{name:"display",type:a.display,triggersZOrder:i,triggersBounds:i,triggersBoundsOfConnectedEdges:i,triggersBoundsOfParallelEdges:function(e,t,r){return e!==t&&"bezier"===r.pstyle("curve-style").value}},{name:"visibility",type:a.visibility,triggersZOrder:i},{name:"opacity",type:a.zeroOneNumber,triggersZOrder:n},{name:"text-opacity",type:a.zeroOneNumber},{name:"min-zoomed-font-size",type:a.size},{name:"z-compound-depth",type:a.zCompoundDepth,triggersZOrder:i},{name:"z-index-compare",type:a.zIndexCompare,triggersZOrder:i},{name:"z-index",type:a.number,triggersZOrder:i}],f=[{name:"overlay-padding",type:a.size,triggersBounds:i},{name:"overlay-color",type:a.color},{name:"overlay-opacity",type:a.zeroOneNumber,triggersBounds:n},{name:"overlay-shape",type:a.overlayShape,triggersBounds:i},{name:"overlay-corner-radius",type:a.cornerRadius}],p=[{name:"underlay-padding",type:a.size,triggersBounds:i},{name:"underlay-color",type:a.color},{name:"underlay-opacity",type:a.zeroOneNumber,triggersBounds:n},{name:"underlay-shape",type:a.overlayShape,triggersBounds:i},{name:"underlay-corner-radius",type:a.cornerRadius}],v=[{name:"transition-property",type:a.propList},{name:"transition-duration",type:a.time},{name:"transition-delay",type:a.time},{name:"transition-timing-function",type:a.easing}],g=function(e,t){return"label"===t.value?-e.poolIndex():t.pfValue},y=[{name:"height",type:a.nodeSize,triggersBounds:i,hashOverride:g},{name:"width",type:a.nodeSize,triggersBounds:i,hashOverride:g},{name:"shape",type:a.nodeShape,triggersBounds:i},{name:"shape-polygon-points",type:a.polygonPointList,triggersBounds:i},{name:"corner-radius",type:a.cornerRadius},{name:"background-color",type:a.color},{name:"background-fill",type:a.fill},{name:"background-opacity",type:a.zeroOneNumber},{name:"background-blacken",type:a.nOneOneNumber},{name:"background-gradient-stop-colors",type:a.colors},{name:"background-gradient-stop-positions",type:a.percentages},{name:"background-gradient-direction",type:a.gradientDirection},{name:"padding",type:a.sizeMaybePercent,triggersBounds:i},{name:"padding-relative-to",type:a.paddingRelativeTo,triggersBounds:i},{name:"bounds-expansion",type:a.boundsExpansion,triggersBounds:i}],b=[{name:"border-color",type:a.color},{name:"border-opacity",type:a.zeroOneNumber},{name:"border-width",type:a.size,triggersBounds:i},{name:"border-style",type:a.borderStyle},{name:"border-cap",type:a.lineCap},{name:"border-join",type:a.lineJoin},{name:"border-dash-pattern",type:a.numbers},{name:"border-dash-offset",type:a.number},{name:"border-position",type:a.linePosition}],x=[{name:"outline-color",type:a.color},{name:"outline-opacity",type:a.zeroOneNumber},{name:"outline-width",type:a.size,triggersBounds:i},{name:"outline-style",type:a.borderStyle},{name:"outline-offset",type:a.size,triggersBounds:i}],w=[{name:"background-image",type:a.urls},{name:"background-image-crossorigin",type:a.bgCrossOrigin},{name:"background-image-opacity",type:a.zeroOneNumbers},{name:"background-image-containment",type:a.bgContainment},{name:"background-image-smoothing",type:a.bools},{name:"background-position-x",type:a.bgPos},{name:"background-position-y",type:a.bgPos},{name:"background-width-relative-to",type:a.bgRelativeTo},{name:"background-height-relative-to",type:a.bgRelativeTo},{name:"background-repeat",type:a.bgRepeat},{name:"background-fit",type:a.bgFit},{name:"background-clip",type:a.bgClip},{name:"background-width",type:a.bgWH},{name:"background-height",type:a.bgWH},{name:"background-offset-x",type:a.bgPos},{name:"background-offset-y",type:a.bgPos}],E=[{name:"position",type:a.position,triggersBounds:i},{name:"compound-sizing-wrt-labels",type:a.compoundIncludeLabels,triggersBounds:i},{name:"min-width",type:a.size,triggersBounds:i},{name:"min-width-bias-left",type:a.sizeMaybePercent,triggersBounds:i},{name:"min-width-bias-right",type:a.sizeMaybePercent,triggersBounds:i},{name:"min-height",type:a.size,triggersBounds:i},{name:"min-height-bias-top",type:a.sizeMaybePercent,triggersBounds:i},{name:"min-height-bias-bottom",type:a.sizeMaybePercent,triggersBounds:i}],k=[{name:"line-style",type:a.lineStyle},{name:"line-color",type:a.color},{name:"line-fill",type:a.fill},{name:"line-cap",type:a.lineCap},{name:"line-opacity",type:a.zeroOneNumber},{name:"line-dash-pattern",type:a.numbers},{name:"line-dash-offset",type:a.number},{name:"line-outline-width",type:a.size},{name:"line-outline-color",type:a.color},{name:"line-gradient-stop-colors",type:a.colors},{name:"line-gradient-stop-positions",type:a.percentages},{name:"curve-style",type:a.curveStyle,triggersBounds:i,triggersBoundsOfParallelEdges:function(e,t){return e!==t&&("bezier"===e||"bezier"===t)}},{name:"haystack-radius",type:a.zeroOneNumber,triggersBounds:i},{name:"source-endpoint",type:a.edgeEndpoint,triggersBounds:i},{name:"target-endpoint",type:a.edgeEndpoint,triggersBounds:i},{name:"control-point-step-size",type:a.size,triggersBounds:i},{name:"control-point-distances",type:a.bidirectionalSizes,triggersBounds:i},{name:"control-point-weights",type:a.numbers,triggersBounds:i},{name:"segment-distances",type:a.bidirectionalSizes,triggersBounds:i},{name:"segment-weights",type:a.numbers,triggersBounds:i},{name:"segment-radii",type:a.numbers,triggersBounds:i},{name:"radius-type",type:a.radiusType,triggersBounds:i},{name:"taxi-turn",type:a.bidirectionalSizeMaybePercent,triggersBounds:i},{name:"taxi-turn-min-distance",type:a.size,triggersBounds:i},{name:"taxi-direction",type:a.axisDirection,triggersBounds:i},{name:"taxi-radius",type:a.number,triggersBounds:i},{name:"edge-distances",type:a.edgeDistances,triggersBounds:i},{name:"arrow-scale",type:a.positiveNumber,triggersBounds:i},{name:"loop-direction",type:a.angle,triggersBounds:i},{name:"loop-sweep",type:a.angle,triggersBounds:i},{name:"source-distance-from-node",type:a.size,triggersBounds:i},{name:"target-distance-from-node",type:a.size,triggersBounds:i}],_=[{name:"ghost",type:a.bool,triggersBounds:i},{name:"ghost-offset-x",type:a.bidirectionalSize,triggersBounds:i},{name:"ghost-offset-y",type:a.bidirectionalSize,triggersBounds:i},{name:"ghost-opacity",type:a.zeroOneNumber}],C=[{name:"selection-box-color",type:a.color},{name:"selection-box-opacity",type:a.zeroOneNumber},{name:"selection-box-border-color",type:a.color},{name:"selection-box-border-width",type:a.size},{name:"active-bg-color",type:a.color},{name:"active-bg-opacity",type:a.zeroOneNumber},{name:"active-bg-size",type:a.size},{name:"outside-texture-bg-color",type:a.color},{name:"outside-texture-bg-opacity",type:a.zeroOneNumber}],T=[];as.pieBackgroundN=16,T.push({name:"pie-size",type:a.sizeMaybePercent}),T.push({name:"pie-hole",type:a.sizeMaybePercent}),T.push({name:"pie-start-angle",type:a.angle});for(var P=1;P<=as.pieBackgroundN;P++)T.push({name:"pie-"+P+"-background-color",type:a.color}),T.push({name:"pie-"+P+"-background-size",type:a.percent}),T.push({name:"pie-"+P+"-background-opacity",type:a.zeroOneNumber});var B=[];as.stripeBackgroundN=16,B.push({name:"stripe-size",type:a.sizeMaybePercent}),B.push({name:"stripe-direction",type:a.axisDirectionPrimary});for(var D=1;D<=as.stripeBackgroundN;D++)B.push({name:"stripe-"+D+"-background-color",type:a.color}),B.push({name:"stripe-"+D+"-background-size",type:a.percent}),B.push({name:"stripe-"+D+"-background-opacity",type:a.zeroOneNumber});var A=[],M=as.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:a.arrowShape,triggersBounds:i},{name:"arrow-color",type:a.color},{name:"arrow-fill",type:a.arrowFill},{name:"arrow-width",type:a.arrowWidth}].forEach(function(e){M.forEach(function(t){var r=t+"-"+e.name,n=e.type,i=e.triggersBounds;A.push({name:r,type:n,triggersBounds:i})})},{});var R=as.properties=[].concat(d,v,h,f,p,_,c,u,o,s,l,y,b,x,w,T,B,E,k,A,C),N=as.propertyGroups={behavior:d,transition:v,visibility:h,overlay:f,underlay:p,ghost:_,commonLabel:c,labelDimensions:u,mainLabel:o,sourceLabel:s,targetLabel:l,nodeBody:y,nodeBorder:b,nodeOutline:x,backgroundImage:w,pie:T,stripe:B,compound:E,edgeLine:k,edgeArrow:A,core:C},I=as.propertyGroupNames={};(as.propertyGroupKeys=Object.keys(N)).forEach(function(e){I[e]=N[e].map(function(e){return e.name}),N[e].forEach(function(t){return t.groupKey=e})});var L=as.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];as.propertyNames=R.map(function(e){return e.name});for(var O=0;O<R.length;O++){var z=R[O];R[z.name]=z}for(var V=0;V<L.length;V++){var F=L[V],X=R[F.pointsTo],q={name:F.name,alias:!0,pointsTo:X};R.push(q),R[F.name]=q}}(),as.getDefaultProperty=function(e){return this.getDefaultProperties()[e]},as.getDefaultProperties=function(){var e=this._private;if(null!=e.defaultProperties)return e.defaultProperties;for(var t=J({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var r=1;r<=as.pieBackgroundN;r++){var n=t.name.replace("{{i}}",r),i=t.value;e[n]=i}return e},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(e,t){for(var r=1;r<=as.stripeBackgroundN;r++){var n=t.name.replace("{{i}}",r),i=t.value;e[n]=i}return e},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(e,t){return as.arrowPrefixes.forEach(function(r){var n=r+"-"+t.name,i=t.value;e[n]=i}),e},{})),r={},n=0;n<this.properties.length;n++){var i=this.properties[n];if(!i.pointsTo){var a=i.name,o=t[a],s=this.parse(a,o);r[a]=s}}return e.defaultProperties=r,e.defaultProperties},as.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var al={};al.parse=function(e,t,r,n){if(B(t))return this.parseImplWarn(e,t,r,n);var i,a=eT(e,""+t,r?"t":"f","mapping"===n||!0===n||!1===n||null==n?"dontcare":n),o=this.propCache=this.propCache||[];return(i=o[a])||(i=o[a]=this.parseImplWarn(e,t,r,n)),(r||"mapping"===n)&&(i=ej(i))&&(i.value=ej(i.value)),i},al.parseImplWarn=function(e,t,r,n){var i=this.parseImpl(e,t,r,n);return i||null==t||ez("The style property `".concat(e,": ").concat(t,"` is invalid")),i&&("width"===i.name||"height"===i.name)&&"label"===t&&ez("The style value of `label` is deprecated for `"+i.name+"`"),i},al.parseImpl=function(e,t,r,n){e=X(e);var i=this.properties[e],a=t,o=this.types;if(!i||void 0===t)return null;i.alias&&(e=(i=i.pointsTo).name);var s=S(t);s&&(t=t.trim());var l=i.type;if(!l)return null;if(r&&(""===t||null===t))return{name:e,value:t,bypass:!0,deleteBypass:!0};if(B(t))return{name:e,value:t,strValue:"fn",mapped:o.fn,bypass:r};if(!s||n||t.length<7||"a"!==t[1]);else if(t.length>=7&&"d"===t[0]&&(v=new RegExp(o.data.regex).exec(t))){if(r)return!1;var u=o.data;return{name:e,value:v,strValue:""+t,mapped:u,field:v[1],bypass:r}}else if(t.length>=10&&"m"===t[0]&&(g=new RegExp(o.mapData.regex).exec(t))){if(r||l.multiple)return!1;var c=o.mapData;if(!(l.color||l.number))return!1;var d=this.parse(e,g[4]);if(!d||d.mapped)return!1;var h=this.parse(e,g[5]);if(!h||h.mapped)return!1;if(d.pfValue===h.pfValue||d.strValue===h.strValue)return ez("`"+e+": "+t+"` is not a valid mapper because the output range is zero; converting to `"+e+": "+d.strValue+"`"),this.parse(e,d.strValue);if(l.color){var f=d.value,p=h.value;if(f[0]===p[0]&&f[1]===p[1]&&f[2]===p[2]&&(f[3]===p[3]||(null==f[3]||1===f[3])&&(null==p[3]||1===p[3])))return!1}return{name:e,value:g,strValue:""+t,mapped:c,field:g[1],fieldMin:parseFloat(g[2]),fieldMax:parseFloat(g[3]),valueMin:d.value,valueMax:h.value,bypass:r}}if(l.multiple&&"multiple"!==n){if(y=s?t.split(/\s+/):D(t)?t:[t],l.evenMultiple&&y.length%2!=0)return null;for(var v,g,y,b=[],x=[],w=[],E="",k=!1,_=0;_<y.length;_++){var C=this.parse(e,y[_],r,"multiple");k=k||S(C.value),b.push(C.value),w.push(null!=C.pfValue?C.pfValue:C.value),x.push(C.units),E+=(_>0?" ":"")+C.strValue}if(l.validate&&!l.validate(b,x))return null;if(l.singleEnum&&k)if(1===b.length&&S(b[0]))return{name:e,value:b[0],strValue:b[0],bypass:r};else return null;return{name:e,value:b,pfValue:w,strValue:E,bypass:r,units:x}}var T=function(){for(var n=0;n<l.enums.length;n++)if(l.enums[n]===t)return{name:e,value:t,strValue:""+t,bypass:r};return null};if(l.number){var P,A,R="px";if(l.units&&(A=l.units),l.implicitUnits&&(R=l.implicitUnits),!l.unitless)if(s){var N="px|em"+(l.allowPercent?"|\\%":"");A&&(N=A);var I=t.match("^("+G+")("+N+")?$");I&&(t=I[1],A=I[2]||R)}else(!A||l.implicitUnits)&&(A=R);if(isNaN(t=parseFloat(t))&&void 0===l.enums)return null;if(isNaN(t)&&void 0!==l.enums)return t=a,T();if(l.integer&&!(M(P=t)&&Math.floor(P)===P)||void 0!==l.min&&(t<l.min||l.strictMin&&t===l.min)||void 0!==l.max&&(t>l.max||l.strictMax&&t===l.max))return null;var L={name:e,value:t,strValue:""+t+(A||""),units:A,bypass:r};return l.unitless||"px"!==A&&"em"!==A?L.pfValue=t:L.pfValue="px"!==A&&A?this.getEmSizeInPixels()*t:t,("ms"===A||"s"===A)&&(L.pfValue="ms"===A?t:1e3*t),("deg"===A||"rad"===A)&&(L.pfValue="rad"===A?t:Math.PI*t/180),"%"===A&&(L.pfValue=t/100),L}if(l.propList){var O=[],z=""+t;if("none"===z);else{for(var j=z.split(/\s*,\s*|\s+/),V=0;V<j.length;V++){var F=j[V].trim();this.properties[F]?O.push(F):ez("`"+F+"` is not a valid property name")}if(0===O.length)return null}return{name:e,value:O,strValue:0===O.length?"none":O.join(" "),bypass:r}}if(l.color){var q=en(t);return q?{name:e,value:q,pfValue:q,strValue:"rgb("+q[0]+","+q[1]+","+q[2]+")",bypass:r}:null}if(l.regex||l.regexes){if(l.enums){var Y=T();if(Y)return Y}for(var W=l.regexes?l.regexes:[l.regex],U=0;U<W.length;U++){var H=new RegExp(W[U]).exec(t);if(H)return{name:e,value:l.singleRegexMatchValue?H[1]:H,strValue:""+t,bypass:r}}return null}if(l.string)return{name:e,value:""+t,strValue:""+t,bypass:r};else if(l.enums)return T();else return null};var au=function(e){return this instanceof au?O(e)?void(this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()):void eL("A style must have a core reference"):new au(e)},ac=au.prototype;ac.instanceString=function(){return"style"},ac.clear=function(){for(var e=this._private,t=e.cy.elements(),r=0;r<this.length;r++)this[r]=void 0;return this.length=0,e.contextStyles={},e.propDiffs={},this.cleanElements(t,!0),t.forEach(function(e){var t=e[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1}),this},ac.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this},ac.core=function(e){return this._private.coreStyle[e]||this.getDefaultProperty(e)},ac.selector=function(e){var t="core"===e?null:new nI(e),r=this.length++;return this[r]={selector:t,properties:[],mappedProperties:[],index:r},this},ac.css=function(){var e=arguments;if(1===e.length)for(var t=e[0],r=0;r<this.properties.length;r++){var n=this.properties[r],i=t[n.name];void 0===i&&(i=t[q(n.name)]),void 0!==i&&this.cssRule(n.name,i)}else 2===e.length&&this.cssRule(e[0],e[1]);return this},ac.style=ac.css,ac.cssRule=function(e,t){var r=this.parse(e,t);if(r){var n=this.length-1;this[n].properties.push(r),this[n].properties[r.name]=r,r.name.match(/pie-(\d+)-background-size/)&&r.value&&(this._private.hasPie=!0),r.name.match(/stripe-(\d+)-background-size/)&&r.value&&(this._private.hasStripe=!0),r.mapped&&this[n].mappedProperties.push(r),this[n].selector||(this._private.coreStyle[r.name]=r)}return this},ac.append=function(e){return z(e)?e.appendToStyle(this):D(e)?this.appendFromJson(e):S(e)&&this.appendFromString(e),this},au.fromJson=function(e,t){var r=new au(e);return r.fromJson(t),r},au.fromString=function(e,t){return new au(e).fromString(t)},[at,ar,an,ai,aa,ao,as,al].forEach(function(e){J(ac,e)}),au.types=ac.types,au.properties=ac.properties,au.propertyGroups=ac.propertyGroups,au.propertyGroupNames=ac.propertyGroupNames,au.propertyGroupKeys=ac.propertyGroupKeys;var ad={autolock:function(e){return void 0===e?this._private.autolock:(this._private.autolock=!!e,this)},autoungrabify:function(e){return void 0===e?this._private.autoungrabify:(this._private.autoungrabify=!!e,this)},autounselectify:function(e){return void 0===e?this._private.autounselectify:(this._private.autounselectify=!!e,this)},selectionType:function(e){var t=this._private;return(null==t.selectionType&&(t.selectionType="single"),void 0===e)?t.selectionType:(("additive"===e||"single"===e)&&(t.selectionType=e),this)},panningEnabled:function(e){return void 0===e?this._private.panningEnabled:(this._private.panningEnabled=!!e,this)},userPanningEnabled:function(e){return void 0===e?this._private.userPanningEnabled:(this._private.userPanningEnabled=!!e,this)},zoomingEnabled:function(e){return void 0===e?this._private.zoomingEnabled:(this._private.zoomingEnabled=!!e,this)},userZoomingEnabled:function(e){return void 0===e?this._private.userZoomingEnabled:(this._private.userZoomingEnabled=!!e,this)},boxSelectionEnabled:function(e){return void 0===e?this._private.boxSelectionEnabled:(this._private.boxSelectionEnabled=!!e,this)},pan:function(){var e,t,r,n,i,a=arguments,o=this._private.pan;switch(a.length){case 0:return o;case 1:if(S(a[0]))return o[e=a[0]];if(A(a[0])){if(!this._private.panningEnabled)return this;n=(r=a[0]).x,i=r.y,M(n)&&(o.x=n),M(i)&&(o.y=i),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;e=a[0],t=a[1],("x"===e||"y"===e)&&M(t)&&(o[e]=t),this.emit("pan viewport")}return this.notify("viewport"),this},panBy:function(e,t){var r,n,i,a=arguments,o=this._private.pan;if(!this._private.panningEnabled)return this;switch(a.length){case 1:A(e)&&(n=(r=a[0]).x,i=r.y,M(n)&&(o.x+=n),M(i)&&(o.y+=i),this.emit("pan viewport"));break;case 2:("x"===e||"y"===e)&&M(t)&&(o[e]+=t),this.emit("pan viewport")}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,t){var r=this.getFitViewport(e,t);if(r){var n=this._private;n.zoom=r.zoom,n.pan=r.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(M(e)&&void 0===t&&(t=e,e=void 0),this._private.panningEnabled&&this._private.zoomingEnabled){if(S(e)){var r,n,i,a=e;e=this.$(a)}else if(A(r=e)&&M(r.x1)&&M(r.x2)&&M(r.y1)&&M(r.y2)){var o=e;(n={x1:o.x1,y1:o.y1,x2:o.x2,y2:o.y2}).w=n.x2-n.x1,n.h=n.y2-n.y1}else N(e)||(e=this.mutableElements());if(!(N(e)&&e.empty())){n=n||e.boundingBox();var s=this.width(),l=this.height();if(t=M(t)?t:0,!isNaN(s)&&!isNaN(l)&&s>0&&l>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){i=(i=(i=Math.min((s-2*t)/n.w,(l-2*t)/n.h))>this._private.maxZoom?this._private.maxZoom:i)<this._private.minZoom?this._private.minZoom:i;var u={x:(s-i*(n.x1+n.x2))/2,y:(l-i*(n.y1+n.y2))/2};return{zoom:i,pan:u}}}}},zoomRange:function(e,t){var r=this._private;if(null==t){var n=e;e=n.min,t=n.max}return M(e)&&M(t)&&e<=t?(r.minZoom=e,r.maxZoom=t):M(e)&&void 0===t&&e<=r.maxZoom?r.minZoom=e:M(t)&&void 0===e&&t>=r.minZoom&&(r.maxZoom=t),this},minZoom:function(e){return void 0===e?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return void 0===e?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t,r,n=this._private,i=n.pan,a=n.zoom,o=!1;if(n.zoomingEnabled||(o=!0),M(e)?r=e:A(e)&&(r=e.level,null!=e.position?t=tr(e.position,a,i):null!=e.renderedPosition&&(t=e.renderedPosition),null==t||n.panningEnabled||(o=!0)),r=(r=r>n.maxZoom?n.maxZoom:r)<n.minZoom?n.minZoom:r,o||!M(r)||r===a||null!=t&&(!M(t.x)||!M(t.y)))return null;if(null==t)return{zoomed:!0,panned:!1,zoom:r,pan:i};var s=r,l={x:-s/a*(t.x-i.x)+t.x,y:-s/a*(t.y-i.y)+t.y};return{zoomed:!0,panned:!0,zoom:s,pan:l}},zoom:function(e){if(void 0===e)return this._private.zoom;var t=this.getZoomedViewport(e),r=this._private;return null!=t&&t.zoomed&&(r.zoom=t.zoom,t.panned&&(r.pan.x=t.pan.x,r.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport")),this},viewport:function(e){var t=this._private,r=!0,n=!0,i=[],a=!1;if(!e||(M(e.zoom)||(r=!1),A(e.pan)||(n=!1),!r&&!n))return this;if(r){var o=e.zoom;o<t.minZoom||o>t.maxZoom||!t.zoomingEnabled?a=!0:(t.zoom=o,i.push("zoom"))}if(n&&(!a||!e.cancelOnFailedZoom)&&t.panningEnabled){var s=e.pan;M(s.x)&&(t.pan.x=s.x),M(s.y)&&(t.pan.y=s.y),i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(this._private.panningEnabled){if(S(e)){var r=e;e=this.mutableElements().filter(r)}else N(e)||(e=this.mutableElements());if(0!==e.length){var n=e.boundingBox(),i=this.width(),a=this.height();return{x:(i-(t=void 0===t?this._private.zoom:t)*(n.x1+n.x2))/2,y:(a-t*(n.y1+n.y2))/2}}}},reset:function(){return this._private.panningEnabled&&this._private.zoomingEnabled&&this.viewport({pan:{x:0,y:0},zoom:1}),this},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e,t,r=this._private,n=r.container;return r.sizeCache=r.sizeCache||(n?(e=this.window().getComputedStyle(n),t=function(t){return parseFloat(e.getPropertyValue(t))},{width:n.clientWidth-t("padding-left")-t("padding-right"),height:n.clientHeight-t("padding-top")-t("padding-bottom")}):{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,r=this.renderedExtent(),n={x1:(r.x1-e.x)/t,x2:(r.x2-e.x)/t,y1:(r.y1-e.y)/t,y2:(r.y2-e.y)/t};return n.w=n.x2-n.x1,n.h=n.y2-n.y1,n},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){return e?(this._private.multiClickDebounceTime=e,this):this._private.multiClickDebounceTime}};ad.centre=ad.center,ad.autolockNodes=ad.autolock,ad.autoungrabifyNodes=ad.autoungrabify;var ah={data:ny.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:ny.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:ny.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:ny.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};ah.attr=ah.data,ah.removeAttr=ah.removeData;var af=function(e){var t=this,r=(e=J({},e)).container;r&&!R(r)&&R(r[0])&&(r=r[0]);var n=r?r._cyreg:null;(n=n||{}).cy&&(n.cy.destroy(),n={});var i=n.readies=n.readies||[];r&&(r._cyreg=n),n.cy=t;var a=void 0!==w&&void 0!==r&&!e.headless,o=e;o.layout=J({name:a?"grid":"null"},o.layout),o.renderer=J({name:a?"canvas":"null"},o.renderer);var s=function(e,t,r){return void 0!==t?t:void 0!==r?r:e},l=this._private={container:r,ready:!1,options:o,elements:new iU(this),listeners:[],aniEles:new iU(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:s(!0,o.zoomingEnabled),userZoomingEnabled:s(!0,o.userZoomingEnabled),panningEnabled:s(!0,o.panningEnabled),userPanningEnabled:s(!0,o.userPanningEnabled),boxSelectionEnabled:s(!0,o.boxSelectionEnabled),autolock:s(!1,o.autolock,o.autolockNodes),autoungrabify:s(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:s(!1,o.autounselectify),styleEnabled:void 0===o.styleEnabled?a:o.styleEnabled,zoom:M(o.zoom)?o.zoom:1,pan:{x:A(o.pan)&&M(o.pan.x)?o.pan.x:0,y:A(o.pan)&&M(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:s(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom}),l.styleEnabled&&t.setStyle([]);var u=J({},o,o.renderer);t.initRenderer(u);var c=function(e,r,n){t.notifications(!1);var i=t.mutableElements();i.length>0&&i.remove(),null!=e&&(A(e)||D(e))&&t.add(e),t.one("layoutready",function(e){t.notifications(!0),t.emit(e),t.one("load",r),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",n),t.emit("done")});var a=J({},t._private.options.layout);a.eles=t.elements(),t.layout(a).run()};!function(e,t){if(e.some(V))return ne.all(e).then(t);t(e)}([o.style,o.elements],function(e){var r=e[0],a=e[1];l.styleEnabled&&t.style().append(r),c(a,function(){t.startAnimationLoop(),l.ready=!0,B(o.ready)&&t.on("ready",o.ready);for(var e=0;e<i.length;e++){var r=i[e];t.on("ready",r)}n&&(n.readies=[]),t.emit("ready")},o.done)})},ap=af.prototype;J(ap,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){if(!this.destroyed())return this.stopAnimationLoop(),this.destroyRenderer(),this.emit("destroy"),this._private.destroyed=!0,this},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){if(null==this._private.container)return w;var e=this._private.container.ownerDocument;return void 0===e||null==e?w:e.defaultView||w},mount:function(e){if(null!=e){var t=this._private,r=t.options;return!R(e)&&R(e[0])&&(e=e[0]),this.stopAnimationLoop(),this.destroyRenderer(),t.container=e,t.styleEnabled=!0,this.invalidateSize(),this.initRenderer(J({},r,r.renderer,{name:"null"===r.renderer.name?"canvas":r.renderer.name})),this.startAnimationLoop(),this.style(r.style),this.emit("mount"),this}},unmount:function(){return this.stopAnimationLoop(),this.destroyRenderer(),this.initRenderer({name:"null"}),this.emit("unmount"),this},options:function(){return ej(this._private.options)},json:function(e){var t=this,r=t._private,n=t.mutableElements();if(A(e)){if(t.startBatch(),e.elements){var i={},a=function(e,r){for(var n=[],a=[],o=0;o<e.length;o++){var s=e[o];if(!s.data.id){ez("cy.json() cannot handle elements without an ID attribute");continue}var l=""+s.data.id,u=t.getElementById(l);i[l]=!0,0!==u.length?a.push({ele:u,json:s}):(r&&(s.group=r),n.push(s))}t.add(n);for(var c=0;c<a.length;c++){var d=a[c],h=d.ele,f=d.json;h.json(f)}};if(D(e.elements))a(e.elements);else for(var o=["nodes","edges"],s=0;s<o.length;s++){var l=o[s],u=e.elements[l];D(u)&&a(u,l)}var c=t.collection();n.filter(function(e){return!i[e.id()]}).forEach(function(e){e.isParent()?c.merge(e):e.remove()}),c.forEach(function(e){return e.children().move({parent:null})}),c.forEach(function(e){return t.getElementById(e.id()).remove()})}e.style&&t.style(e.style),null!=e.zoom&&e.zoom!==r.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==r.pan.x||e.pan.y!==r.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var d=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<d.length;h++){var f=d[h];null!=e[f]&&t[f](e[f])}return t.endBatch(),this}var p={};e?p.elements=this.elements().map(function(e){return e.json()}):(p.elements={},n.forEach(function(e){var t=e.group();p.elements[t]||(p.elements[t]=[]),p.elements[t].push(e.json())})),this._private.styleEnabled&&(p.style=t.style().json()),p.data=ej(t.data());var v=r.options;return p.zoomingEnabled=r.zoomingEnabled,p.userZoomingEnabled=r.userZoomingEnabled,p.zoom=r.zoom,p.minZoom=r.minZoom,p.maxZoom=r.maxZoom,p.panningEnabled=r.panningEnabled,p.userPanningEnabled=r.userPanningEnabled,p.pan=ej(r.pan),p.boxSelectionEnabled=r.boxSelectionEnabled,p.renderer=ej(v.renderer),p.hideEdgesOnViewport=v.hideEdgesOnViewport,p.textureOnViewport=v.textureOnViewport,p.wheelSensitivity=v.wheelSensitivity,p.motionBlur=v.motionBlur,p.multiClickDebounceTime=v.multiClickDebounceTime,p}}),ap.$id=ap.getElementById,[{add:function(e){var t;if(N(e))if(e._private.cy===this)t=e.restore();else{for(var r=[],n=0;n<e.length;n++){var i=e[n];r.push(i.json())}t=new iU(this,r)}else if(D(e))t=new iU(this,e);else if(A(e)&&(D(e.nodes)||D(e.edges))){for(var a=[],o=["nodes","edges"],s=0,l=o.length;s<l;s++){var u=o[s],c=e[u];if(D(c))for(var d=0,h=c.length;d<h;d++){var f=J({group:u},c[d]);a.push(f)}}t=new iU(this,a)}else t=new eJ(this,e).collection();return t},remove:function(e){if(N(e));else if(S(e)){var t=e;e=this.$(t)}return e.remove()}},i2,i4,i9,i6,{notify:function(e,t){var r=this._private;if(this.batching()){r.batchNotifications=r.batchNotifications||{};var n=r.batchNotifications[e]=r.batchNotifications[e]||this.collection();null!=t&&n.merge(t);return}if(r.notificationsEnabled){var i=this.renderer();!this.destroyed()&&i&&i.notify(e,t)}},notifications:function(e){var t=this._private;return void 0===e?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return null==e.batchCount&&(e.batchCount=0),0===e.batchCount&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(0===e.batchCount)return this;if(e.batchCount--,0===e.batchCount){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(r){var n=e.batchNotifications[r];n.empty()?t.notify(r):t.notify(r,n)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var r=Object.keys(e),n=0;n<r.length;n++){var i=r[n],a=e[i];t.getElementById(i).data(a)}})}},i8,ae,{style:function(e){return e&&this.setStyle(e).update(),this._private.style},setStyle:function(e){var t=this._private;return z(e)?t.style=e.generateStyle(this):D(e)?t.style=au.fromJson(this,e):S(e)?t.style=au.fromString(this,e):t.style=au(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},ad,ah].forEach(function(e){J(ap,e)});var av={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},ag={maximal:!1,acyclic:!1},ay=function(e){return e.scratch("breadthfirst")},am=function(e,t){return e.scratch("breadthfirst",t)};function ab(e){this.options=J({},av,ag,e)}ab.prototype.run=function(){var e,t=this.options,r=t.cy,n=t.eles,i=n.nodes().filter(function(e){return e.isChildless()}),a=t.directed,o=t.acyclic||t.maximal||t.maximalAdjustments>0,s=!!t.boundingBox,l=tb(s?t.boundingBox:structuredClone(r.extent()));if(N(t.roots))e=t.roots;else if(D(t.roots)){for(var u=[],c=0;c<t.roots.length;c++){var d=t.roots[c],h=r.getElementById(d);u.push(h)}e=r.collection(u)}else if(S(t.roots))e=r.$(t.roots);else if(a)e=i.roots();else{var f=n.components();e=r.collection();for(var p=0;p<f.length;p++)!function(){var t=f[p],r=t.maxDegree(!1),n=t.filter(function(e){return e.degree(!1)===r});e=e.add(n)}()}var v=[],g={},y=function(e,t){null==v[t]&&(v[t]=[]);var r=v[t].length;v[t].push(e),am(e,{index:r,depth:t})},b=function(e,t){var r=ay(e),n=r.depth,i=r.index;v[n][i]=null,e.isChildless()&&y(e,t)};n.bfs({roots:e,directed:t.directed,visit:function(e,t,r,n,i){var a=e[0],o=a.id();a.isChildless()&&y(a,i),g[o]=!0}});for(var x=[],w=0;w<i.length;w++){var E=i[w];g[E.id()]||x.push(E)}var k=function(e){for(var t=v[e],r=0;r<t.length;r++){var n=t[r];if(null==n){t.splice(r,1),r--;continue}am(n,{depth:e,index:r})}};if(a&&o){var _=[],C={},T=function(e){return _.push(e)};for(i.forEach(function(e){return _.push(e)});_.length>0;){var P=_.shift(),B=function(e,r){for(var i=ay(e),a=e.incomers().filter(function(e){return e.isNode()&&n.has(e)}),o=-1,s=e.id(),l=0;l<a.length;l++)o=Math.max(o,ay(a[l]).depth);if(i.depth<=o){if(!t.acyclic&&r[s])return null;var u=o+1;return b(e,u),r[s]=u,!0}return!1}(P,C);if(B)P.outgoers().filter(function(e){return e.isNode()&&n.has(e)}).forEach(T);else if(null===B){ez("Detected double maximal shift for node `"+P.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var A=0;if(t.avoidOverlap)for(var M=0;M<i.length;M++){var R=i[M].layoutDimensions(t),I=R.w,L=R.h;A=Math.max(A,I,L)}var O={},z=function(e){if(O[e.id()])return O[e.id()];for(var t=ay(e).depth,r=e.neighborhood(),n=0,a=0,o=0;o<r.length;o++){var s=r[o];if(!(s.isEdge()||s.isParent())&&i.has(s)){var l=ay(s);if(null!=l){var u=l.index,c=l.depth;if(null!=u&&null!=c){var d=v[c].length;c<t&&(n+=u/d,a++)}}}}return n/=a=Math.max(1,a),0===a&&(n=0),O[e.id()]=n,n},j=function(e,t){var r=z(e)-z(t);return 0===r?Q(e.id(),t.id()):r};void 0!==t.depthSort&&(j=t.depthSort);for(var V=v.length,F=0;F<V;F++)v[F].sort(j),k(F);for(var X=[],q=0;q<x.length;q++)X.push(x[q]);if(X.length){v.unshift(X),V=v.length;for(var Y=0;Y<V;Y++)k(Y)}for(var W=0,U=0;U<V;U++)W=Math.max(v[U].length,W);var G={x:l.x1+l.w/2,y:l.y1+l.h/2},H=i.reduce(function(e,r){var n;return n=r.boundingBox({includeLabels:t.nodeDimensionsIncludeLabels}),{w:-1===e.w?n.w:(e.w+n.w)/2,h:-1===e.h?n.h:(e.h+n.h)/2}},{w:-1,h:-1}),K=Math.max(1===V?0:s?(l.h-2*t.padding-H.h)/(V-1):(l.h-2*t.padding-H.h)/(V+1),A),Z=v.reduce(function(e,t){return Math.max(e,t.length)},0),$=function(e){var r=ay(e),n=r.depth,i=r.index;if(t.circle){var a=Math.min(l.w/2/V,l.h/2/V),o=(a=Math.max(a,A))*n+a-(V>0&&v[0].length<=3?a/2:0),u=2*Math.PI/v[n].length*i;return 0===n&&1===v[0].length&&(o=1),{x:G.x+o*Math.cos(u),y:G.y+o*Math.sin(u)}}var c=v[n].length,d=Math.max(1===c?0:s?(l.w-2*t.padding-H.w)/((t.grid?Z:c)-1):(l.w-2*t.padding-H.w)/((t.grid?Z:c)+1),A);return{x:G.x+(i+1-(c+1)/2)*d,y:G.y+(n+1-(V+1)/2)*K}},J={downward:0,leftward:90,upward:180,rightward:-90};return -1===Object.keys(J).indexOf(t.direction)&&eL("Invalid direction '".concat(t.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys(J).join(", "))),n.nodes().layoutPositions(this,t,function(e){return function(e,t,r){if(0===r)return e;var n,i,a,o,s=(t.x1+t.x2)/2,l=(t.y1+t.y2)/2,u=t.w/t.h,c=(n=e.x,i=e.y,{x:Math.cos(a=r*Math.PI/180)*(n-s)-Math.sin(a)*(i-l)+s,y:Math.sin(a)*(n-s)+Math.cos(a)*(i-l)+l}),d=(o=c.x,{x:(o-s)*u+s,y:(c.y-l)*(1/u)+l});return{x:d.x,y:d.y}}($(e),l,J[t.direction])}),this};var ax={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function aw(e){this.options=J({},ax,e)}aw.prototype.run=function(){var e,t=this.options,r=t.cy,n=t.eles,i=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise,a=n.nodes().not(":parent");t.sort&&(a=a.sort(t.sort));for(var o=tb(t.boundingBox?t.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=(void 0===t.sweep?2*Math.PI-2*Math.PI/a.length:t.sweep)/Math.max(1,a.length-1),u=0,c=0;c<a.length;c++){var d=a[c].layoutDimensions(t);u=Math.max(u,d.w,d.h)}if(e=M(t.radius)?t.radius:a.length<=1?0:Math.min(o.h,o.w)/2-u,a.length>1&&t.avoidOverlap){var h=Math.cos(l)-1,f=Math.sin(l)-0;e=Math.max(Math.sqrt((u*=1.75)*u/(h*h+f*f)),e)}return n.nodes().layoutPositions(this,t,function(r,n){var a=t.startAngle+n*l*(i?1:-1),o=e*Math.cos(a),u=e*Math.sin(a);return{x:s.x+o,y:s.y+u}}),this};var aE={fit:!0,padding:30,startAngle:1.5*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function ak(e){this.options=J({},aE,e)}ak.prototype.run=function(){for(var e=this.options,t=void 0!==e.counterclockwise?!e.counterclockwise:e.clockwise,r=e.cy,n=e.eles,i=n.nodes().not(":parent"),a=tb(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:r.width(),h:r.height()}),o={x:a.x1+a.w/2,y:a.y1+a.h/2},s=[],l=0,u=0;u<i.length;u++){var c=i[u],d=void 0;d=e.concentric(c),s.push({value:d,node:c}),c._private.scratch.concentric=d}i.updateStyle();for(var h=0;h<i.length;h++){var f=i[h].layoutDimensions(e);l=Math.max(l,f.w,f.h)}s.sort(function(e,t){return t.value-e.value});for(var p=e.levelWidth(i),v=[[]],g=v[0],y=0;y<s.length;y++){var b=s[y];g.length>0&&Math.abs(g[0].value-b.value)>=p&&(g=[],v.push(g)),g.push(b)}var x=l+e.minNodeSpacing;if(!e.avoidOverlap){var w=v.length>0&&v[0].length>1,E=(Math.min(a.w,a.h)/2-x)/(v.length+w?1:0);x=Math.min(x,E)}for(var k=0,_=0;_<v.length;_++){var C=v[_],T=void 0===e.sweep?2*Math.PI-2*Math.PI/C.length:e.sweep,P=C.dTheta=T/Math.max(1,C.length-1);if(C.length>1&&e.avoidOverlap){var S=Math.cos(P)-1,B=Math.sin(P)-0;k=Math.max(Math.sqrt(x*x/(S*S+B*B)),k)}C.r=k,k+=x}if(e.equidistant){for(var D=0,A=0,M=0;M<v.length;M++)D=Math.max(D,v[M].r-A);A=0;for(var R=0;R<v.length;R++){var N=v[R];0===R&&(A=N.r),N.r=A,A+=D}}for(var I={},L=0;L<v.length;L++)for(var O=v[L],z=O.dTheta,j=O.r,V=0;V<O.length;V++){var F=O[V],X=e.startAngle+(t?1:-1)*z*V,q={x:o.x+j*Math.cos(X),y:o.y+j*Math.sin(X)};I[F.node.id()]=q}return n.nodes().layoutPositions(this,e,function(e){return I[e.id()]}),this};var a_={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function aC(e){this.options=J({},a_,e),this.options.layout=this;var t=this.options.eles.nodes(),r=this.options.eles.edges().filter(function(e){var r=e.source().data("id"),n=e.target().data("id"),i=t.some(function(e){return e.data("id")===r}),a=t.some(function(e){return e.data("id")===n});return!i||!a});this.options.eles=this.options.eles.not(r)}aC.prototype.run=function(){var e=this.options,t=e.cy,r=this;r.stopped=!1,(!0===e.animate||!1===e.animate)&&r.emit({type:"layoutstart",layout:r}),lf=!0===e.debug;var n=aT(t,r,e);lf&&lp(n),e.randomize&&aB(n);var i=eg(),a=function(){aA(n,t,e),!0===e.fit&&t.fit(e.padding)},o=function(t){return!r.stopped&&!(t>=e.numIter)&&(aM(n,e),n.temperature=n.temperature*e.coolingFactor,!(n.temperature<e.minTemp))},s=function(){if(!0===e.animate||!1===e.animate)a(),r.one("layoutstop",e.stop),r.emit({type:"layoutstop",layout:r});else{var t=e.eles.nodes(),i=aD(n,e,t);t.layoutPositions(r,e,i)}},l=0,u=!0;if(!0===e.animate){var c=function(){for(var t=0;u&&t<e.refresh;)u=o(l),l++,t++;u?(eg()-i>=e.animationThreshold&&a(),em(c)):(aY(n,e),s())};c()}else{for(;u;)u=o(l),l++;aY(n,e),s()}return this},aC.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this},aC.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var aT=function(e,t,r){for(var n=r.eles.edges(),i=r.eles.nodes(),a=tb(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:n.size(),temperature:r.initialTemp,clientWidth:a.w,clientHeight:a.h,boundingBox:a},s=r.eles.components(),l={},u=0;u<s.length;u++)for(var c=s[u],d=0;d<c.length;d++){var h=c[d];l[h.id()]=u}for(var u=0;u<o.nodeSize;u++){var f=i[u],p=f.layoutDimensions(r),v={};v.isLocked=f.locked(),v.id=f.data("id"),v.parentId=f.data("parent"),v.cmptId=l[f.id()],v.children=[],v.positionX=f.position("x"),v.positionY=f.position("y"),v.offsetX=0,v.offsetY=0,v.height=p.w,v.width=p.h,v.maxX=v.positionX+v.width/2,v.minX=v.positionX-v.width/2,v.maxY=v.positionY+v.height/2,v.minY=v.positionY-v.height/2,v.padLeft=parseFloat(f.style("padding")),v.padRight=parseFloat(f.style("padding")),v.padTop=parseFloat(f.style("padding")),v.padBottom=parseFloat(f.style("padding")),v.nodeRepulsion=B(r.nodeRepulsion)?r.nodeRepulsion(f):r.nodeRepulsion,o.layoutNodes.push(v),o.idToIndex[v.id]=u}for(var g=[],y=0,b=-1,x=[],u=0;u<o.nodeSize;u++){var f=o.layoutNodes[u],w=f.parentId;null!=w?o.layoutNodes[o.idToIndex[w]].children.push(f.id):(g[++b]=f.id,x.push(f.id))}for(o.graphSet.push(x);y<=b;){var E=g[y++],k=o.idToIndex[E],h=o.layoutNodes[k],_=h.children;if(_.length>0){o.graphSet.push(_);for(var u=0;u<_.length;u++)g[++b]=_[u]}}for(var u=0;u<o.graphSet.length;u++)for(var C=o.graphSet[u],d=0;d<C.length;d++){var T=o.idToIndex[C[d]];o.indexToGraph[T]=u}for(var u=0;u<o.edgeSize;u++){var P=n[u],S={};S.id=P.data("id"),S.sourceId=P.data("source"),S.targetId=P.data("target");var D=B(r.idealEdgeLength)?r.idealEdgeLength(P):r.idealEdgeLength,A=B(r.edgeElasticity)?r.edgeElasticity(P):r.edgeElasticity,M=o.idToIndex[S.sourceId],R=o.idToIndex[S.targetId];if(o.indexToGraph[M]!=o.indexToGraph[R]){for(var N=aP(S.sourceId,S.targetId,o),I=o.graphSet[N],L=0,v=o.layoutNodes[M];-1===I.indexOf(v.id);)v=o.layoutNodes[o.idToIndex[v.parentId]],L++;for(v=o.layoutNodes[R];-1===I.indexOf(v.id);)v=o.layoutNodes[o.idToIndex[v.parentId]],L++;D*=L*r.nestingFactor}S.idealLength=D,S.elasticity=A,o.layoutEdges.push(S)}return o},aP=function(e,t,r){var n=aS(e,t,0,r);return 2>n.count?0:n.graph},aS=function(e,t,r,n){var i=n.graphSet[r];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:r};for(var a=0,o=0;o<i.length;o++){var s=i[o],l=n.idToIndex[s],u=n.layoutNodes[l].children;if(0!==u.length){var c=aS(e,t,n.indexToGraph[n.idToIndex[u[0]]],n);if(0===c.count)continue;if(1!==c.count)return c;if(2==++a)break}}return{count:a,graph:r}},aB=function(e,t){for(var r=e.clientWidth,n=e.clientHeight,i=0;i<e.nodeSize;i++){var a=e.layoutNodes[i];0!==a.children.length||a.isLocked||(a.positionX=Math.random()*r,a.positionY=Math.random()*n)}},aD=function(e,t,r){var n=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(r.forEach(function(t){var r=e.layoutNodes[e.idToIndex[t.data("id")]];i.x1=Math.min(i.x1,r.positionX),i.x2=Math.max(i.x2,r.positionX),i.y1=Math.min(i.y1,r.positionY),i.y2=Math.max(i.y2,r.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(r,a){var o=e.layoutNodes[e.idToIndex[r.data("id")]];if(!t.boundingBox)return{x:o.positionX,y:o.positionY};var s=0===i.w?.5:(o.positionX-i.x1)/i.w,l=0===i.h?.5:(o.positionY-i.y1)/i.h;return{x:n.x1+s*n.w,y:n.y1+l*n.h}}},aA=function(e,t,r){var n=r.layout,i=r.eles.nodes(),a=aD(e,r,i);i.positions(a),!0!==e.ready&&(e.ready=!0,n.one("layoutready",r.ready),n.emit({type:"layoutready",layout:this}))},aM=function(e,t,r){aR(e,t),az(e),aj(e,t),aV(e),aF(e)},aR=function(e,t){for(var r=0;r<e.graphSet.length;r++)for(var n=e.graphSet[r],i=n.length,a=0;a<i;a++)for(var o=e.layoutNodes[e.idToIndex[n[a]]],s=a+1;s<i;s++)aI(o,e.layoutNodes[e.idToIndex[n[s]]],e,t)},aN=function(e){return -1+2*e*Math.random()},aI=function(e,t,r,n){if(e.cmptId===t.cmptId||r.isCompound){var i=t.positionX-e.positionX,a=t.positionY-e.positionY;0===i&&0===a&&(i=aN(1),a=aN(1));var o=aL(e,t,i,a);if(o>0)var s=n.nodeOverlap*o,l=Math.sqrt(i*i+a*a),u=s*i/l,c=s*a/l;else var d=aO(e,i,a),h=aO(t,-1*i,-1*a),f=h.x-d.x,p=h.y-d.y,v=f*f+p*p,l=Math.sqrt(v),s=(e.nodeRepulsion+t.nodeRepulsion)/v,u=s*f/l,c=s*p/l;e.isLocked||(e.offsetX-=u,e.offsetY-=c),t.isLocked||(t.offsetX+=u,t.offsetY+=c)}},aL=function(e,t,r,n){if(r>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(n>0)var a=e.maxY-t.minY;else var a=t.maxY-e.minY;return i>=0&&a>=0?Math.sqrt(i*i+a*a):0},aO=function(e,t,r){var n=e.positionX,i=e.positionY,a=e.height||1,o=e.width||1,s=r/t,l=a/o,u={};return 0===t&&0<r||0===t&&0>r?(u.x=n,u.y=i+a/2):0<t&&-1*l<=s&&s<=l?(u.x=n+o/2,u.y=i+o*r/2/t):0>t&&-1*l<=s&&s<=l?(u.x=n-o/2,u.y=i-o*r/2/t):0<r&&(s<=-1*l||s>=l)?(u.x=n+a*t/2/r,u.y=i+a/2):0>r&&(s<=-1*l||s>=l)&&(u.x=n-a*t/2/r,u.y=i-a/2),u},az=function(e,t){for(var r=0;r<e.edgeSize;r++){var n=e.layoutEdges[r],i=e.idToIndex[n.sourceId],a=e.layoutNodes[i],o=e.idToIndex[n.targetId],s=e.layoutNodes[o],l=s.positionX-a.positionX,u=s.positionY-a.positionY;if(0!==l||0!==u){var c=aO(a,l,u),d=aO(s,-1*l,-1*u),h=d.x-c.x,f=d.y-c.y,p=Math.sqrt(h*h+f*f),v=Math.pow(n.idealLength-p,2)/n.elasticity;if(0!==p)var g=v*h/p,y=v*f/p;else var g=0,y=0;a.isLocked||(a.offsetX+=g,a.offsetY+=y),s.isLocked||(s.offsetX-=g,s.offsetY-=y)}}},aj=function(e,t){if(0!==t.gravity)for(var r=0;r<e.graphSet.length;r++){var n=e.graphSet[r],i=n.length;if(0===r)var a=e.clientHeight/2,o=e.clientWidth/2;else var s=e.layoutNodes[e.idToIndex[n[0]]],l=e.layoutNodes[e.idToIndex[s.parentId]],a=l.positionX,o=l.positionY;for(var u=0;u<i;u++){var c=e.layoutNodes[e.idToIndex[n[u]]];if(!c.isLocked){var d=a-c.positionX,h=o-c.positionY,f=Math.sqrt(d*d+h*h);if(f>1){var p=t.gravity*d/f,v=t.gravity*h/f;c.offsetX+=p,c.offsetY+=v}}}}},aV=function(e,t){var r=[],n=0,i=-1;for(r.push.apply(r,e.graphSet[0]),i+=e.graphSet[0].length;n<=i;){var a=r[n++],o=e.idToIndex[a],s=e.layoutNodes[o],l=s.children;if(0<l.length&&!s.isLocked){for(var u=s.offsetX,c=s.offsetY,d=0;d<l.length;d++){var h=e.layoutNodes[e.idToIndex[l[d]]];h.offsetX+=u,h.offsetY+=c,r[++i]=l[d]}s.offsetX=0,s.offsetY=0}}},aF=function(e,t){for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];0<n.children.length&&(n.maxX=void 0,n.minX=void 0,n.maxY=void 0,n.minY=void 0)}for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];if(!(0<n.children.length)&&!n.isLocked){var i=aX(n.offsetX,n.offsetY,e.temperature);n.positionX+=i.x,n.positionY+=i.y,n.offsetX=0,n.offsetY=0,n.minX=n.positionX-n.width,n.maxX=n.positionX+n.width,n.minY=n.positionY-n.height,n.maxY=n.positionY+n.height,aq(n,e)}}for(var r=0;r<e.nodeSize;r++){var n=e.layoutNodes[r];0<n.children.length&&!n.isLocked&&(n.positionX=(n.maxX+n.minX)/2,n.positionY=(n.maxY+n.minY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY)}},aX=function(e,t,r){var n=Math.sqrt(e*e+t*t);if(n>r)var i={x:r*e/n,y:r*t/n};else var i={x:e,y:t};return i},aq=function(e,t){var r=e.parentId;if(null!=r){var n=t.layoutNodes[t.idToIndex[r]],i=!1;if((null==n.maxX||e.maxX+n.padRight>n.maxX)&&(n.maxX=e.maxX+n.padRight,i=!0),(null==n.minX||e.minX-n.padLeft<n.minX)&&(n.minX=e.minX-n.padLeft,i=!0),(null==n.maxY||e.maxY+n.padBottom>n.maxY)&&(n.maxY=e.maxY+n.padBottom,i=!0),(null==n.minY||e.minY-n.padTop<n.minY)&&(n.minY=e.minY-n.padTop,i=!0),i)return aq(n,t)}},aY=function(e,t){for(var r=e.layoutNodes,n=[],i=0;i<r.length;i++){var a=r[i],o=a.cmptId;(n[o]=n[o]||[]).push(a)}for(var s=0,i=0;i<n.length;i++){var l=n[i];if(l){l.x1=1/0,l.x2=-1/0,l.y1=1/0,l.y2=-1/0;for(var u=0;u<l.length;u++){var c=l[u];l.x1=Math.min(l.x1,c.positionX-c.width/2),l.x2=Math.max(l.x2,c.positionX+c.width/2),l.y1=Math.min(l.y1,c.positionY-c.height/2),l.y2=Math.max(l.y2,c.positionY+c.height/2)}l.w=l.x2-l.x1,l.h=l.y2-l.y1,s+=l.w*l.h}}n.sort(function(e,t){return t.w*t.h-e.w*e.h});for(var d=0,h=0,f=0,p=0,v=Math.sqrt(s)*e.clientWidth/e.clientHeight,i=0;i<n.length;i++){var l=n[i];if(l){for(var u=0;u<l.length;u++){var c=l[u];c.isLocked||(c.positionX+=d-l.x1,c.positionY+=h-l.y1)}d+=l.w+t.componentSpacing,f+=l.w+t.componentSpacing,p=Math.max(p,l.h),f>v&&(h+=p+t.componentSpacing,d=0,f=0,p=0)}}},aW={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function aU(e){this.options=J({},aW,e)}aU.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=r.nodes().not(":parent");e.sort&&(n=n.sort(e.sort));var i=tb(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(0===i.h||0===i.w)r.nodes().layoutPositions(this,e,function(e){return{x:i.x1,y:i.y1}});else{var a=n.size(),o=Math.sqrt(a*i.h/i.w),s=Math.round(o),l=Math.round(i.w/i.h*o),u=function(e){if(null==e)return Math.min(s,l);Math.min(s,l)==s?s=e:l=e},c=function(e){if(null==e)return Math.max(s,l);Math.max(s,l)==s?s=e:l=e},d=e.rows,h=null!=e.cols?e.cols:e.columns;if(null!=d&&null!=h)s=d,l=h;else if(null!=d&&null==h)l=Math.ceil(a/(s=d));else if(null==d&&null!=h)s=Math.ceil(a/(l=h));else if(l*s>a){var f=u(),p=c();(f-1)*p>=a?u(f-1):(p-1)*f>=a&&c(p-1)}else for(;l*s<a;){var v=u(),g=c();(g+1)*v>=a?c(g+1):u(v+1)}var y=i.w/l,b=i.h/s;if(e.condense&&(y=0,b=0),e.avoidOverlap)for(var x=0;x<n.length;x++){var w=n[x],E=w._private.position;(null==E.x||null==E.y)&&(E.x=0,E.y=0);var k=w.layoutDimensions(e),_=e.avoidOverlapPadding,C=k.w+_,T=k.h+_;y=Math.max(y,C),b=Math.max(b,T)}for(var P={},S=function(e,t){return!!P["c-"+e+"-"+t]},B=function(e,t){P["c-"+e+"-"+t]=!0},D=0,A=0,M=function(){++A>=l&&(A=0,D++)},R={},N=0;N<n.length;N++){var I=n[N],L=e.position(I);if(L&&(void 0!==L.row||void 0!==L.col)){var O={row:L.row,col:L.col};if(void 0===O.col)for(O.col=0;S(O.row,O.col);)O.col++;else if(void 0===O.row)for(O.row=0;S(O.row,O.col);)O.row++;R[I.id()]=O,B(O.row,O.col)}}n.layoutPositions(this,e,function(e,t){if(e.locked()||e.isParent())return!1;var r,n,a=R[e.id()];if(a)r=a.col*y+y/2+i.x1,n=a.row*b+b/2+i.y1;else{for(;S(D,A);)M();r=A*y+y/2+i.x1,n=D*b+b/2+i.y1,B(D,A),M()}return{x:r,y:n}})}return this};var aG={ready:function(){},stop:function(){}};function aH(e){this.options=J({},aG,e)}aH.prototype.run=function(){var e=this.options,t=e.eles;return e.cy,this.emit("layoutstart"),t.nodes().positions(function(){return{x:0,y:0}}),this.one("layoutready",e.ready),this.emit("layoutready"),this.one("layoutstop",e.stop),this.emit("layoutstop"),this},aH.prototype.stop=function(){return this};var aK={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function aZ(e){this.options=J({},aK,e)}aZ.prototype.run=function(){var e=this.options,t=e.eles.nodes(),r=B(e.positions);return t.layoutPositions(this,e,function(t,n){var i=function(t){if(null==e.positions){var n;return{x:(n=t.position()).x,y:n.y}}if(r)return e.positions(t);var i=e.positions[t._private.data.id];return null==i?null:i}(t);return!t.locked()&&null!=i&&i}),this};var a$={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function aQ(e){this.options=J({},a$,e)}aQ.prototype.run=function(){var e=this.options,t=e.cy,r=e.eles,n=tb(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});return r.nodes().layoutPositions(this,e,function(e,t){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}}),this};var aJ=[{name:"breadthfirst",impl:ab},{name:"circle",impl:aw},{name:"concentric",impl:ak},{name:"cose",impl:aC},{name:"grid",impl:aU},{name:"null",impl:aH},{name:"preset",impl:aZ},{name:"random",impl:aQ}];function a0(e){this.options=e,this.notifications=0}var a1=function(){},a2=function(){throw Error("A headless instance can not render images")};a0.prototype={recalculateRenderedStyle:a1,notify:function(){this.notifications++},init:a1,isHeadless:function(){return!0},png:a2,jpg:a2};var a5={};a5.arrowShapeWidth=.3,a5.registerArrowShapes=function(){var e=this.arrowShapes={},t=this,r=function(e,t,r,n,i,a,o){var s=i.x-r/2-o,l=i.x+r/2+o,u=i.y-r/2-o,c=i.y+r/2+o;return s<=e&&e<=l&&u<=t&&t<=c},n=function(e,t,r,n,i){var a=e*Math.cos(n)-t*Math.sin(n),o=e*Math.sin(n)+t*Math.cos(n);return{x:a*r+i.x,y:o*r+i.y}},i=function(e,t,r,i){for(var a=[],o=0;o<e.length;o+=2){var s=e[o],l=e[o+1];a.push(n(s,l,t,r,i))}return a},a=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];t.push(n.x,n.y)}return t},o=function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").pfValue*2},s=function(n,s){S(s)&&(s=e[s]),e[n]=J({name:n,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(e,t,r,n,o,s){return tz(e,t,a(i(this.points,r+2*s,n,o)))},roughCollide:r,draw:function(e,r,n,a){var o=i(this.points,r,n,a);t.arrowShapeImpl("polygon")(e,o)},spacing:function(e){return 0},gap:o},s)};s("none",{collide:eR,roughCollide:eR,draw:eI,spacing:eN,gap:eN}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:e.triangle.points,controlPoint:[0,-.15],roughCollide:r,draw:function(e,r,a,o,s){var l=i(this.points,r,a,o),u=this.controlPoint,c=n(u[0],u[1],r,a,o);t.arrowShapeImpl(this.name)(e,l,c)},gap:function(e){return .8*o(e)}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(e,t,r,n,o,s,l){var u=a(i(this.points,r+2*l,n,o)),c=a(i(this.pointsTee,r+2*l,n,o));return tz(e,t,u)||tz(e,t,c)},draw:function(e,r,n,a,o){var s=i(this.points,r,n,a),l=i(this.pointsTee,r,n,a);t.arrowShapeImpl(this.name)(e,s,l)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(e,t,r,n,o,s,l){var u=Math.pow(o.x-e,2)+Math.pow(o.y-t,2)<=Math.pow((r+2*l)*this.radius,2);return tz(e,t,a(i(this.points,r+2*l,n,o)))||u},draw:function(e,r,n,a,o){var s=i(this.pointsTr,r,n,a);t.arrowShapeImpl(this.name)(e,s,a.x,a.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(e,t){var r=this.baseCrossLinePts.slice(),n=t/e;return r[3]=r[3]-n,r[5]=r[5]-n,r},collide:function(e,t,r,n,o,s,l){var u=a(i(this.points,r+2*l,n,o)),c=a(i(this.crossLinePts(r,s),r+2*l,n,o));return tz(e,t,u)||tz(e,t,c)},draw:function(e,r,n,a,o){var s=i(this.points,r,n,a),l=i(this.crossLinePts(r,o),r,n,a);t.arrowShapeImpl(this.name)(e,s,l)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(e){return .525*o(e)}}),s("circle",{radius:.15,collide:function(e,t,r,n,i,a,o){return Math.pow(i.x-e,2)+Math.pow(i.y-t,2)<=Math.pow((r+2*o)*this.radius,2)},draw:function(e,r,n,i,a){t.arrowShapeImpl(this.name)(e,i.x,i.y,this.radius*r)},spacing:function(e){return t.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(e){return 1},gap:function(e){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(e){return e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(e){return .95*e.pstyle("width").pfValue*e.pstyle("arrow-scale").value}})};var a3={};a3.projectIntoViewport=function(e,t){var r=this.cy,n=this.findContainerClientCoords(),i=n[0],a=n[1],o=n[4],s=r.pan(),l=r.zoom();return[((e-i)/o-s.x)/l,((t-a)/o-s.y)/l]},a3.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var e=this.container,t=e.getBoundingClientRect(),r=this.cy.window().getComputedStyle(e),n=function(e){return parseFloat(r.getPropertyValue(e))},i={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},a={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=e.clientWidth,s=e.clientHeight,l=i.left+i.right,u=i.top+i.bottom,c=a.left+a.right,d=t.width/(o+c),h=t.left+i.left+a.left,f=t.top+i.top+a.top;return this.containerBB=[h,f,o-l,s-u,d]},a3.invalidateContainerClientCoordsCache=function(){this.containerBB=null},a3.findNearestElement=function(e,t,r,n){return this.findNearestElements(e,t,r,n)[0]},a3.findNearestElements=function(e,t,r,n){var i,a,o=this,s=this,l=s.getCachedZSortedEles(),u=[],c=s.cy.zoom(),d=s.cy.hasCompoundNodes(),h=(n?24:8)/c,f=(n?8:2)/c,p=(n?8:2)/c,v=1/0;function g(e,t){if(e.isNode())if(a)return;else a=e,u.push(e);if(e.isEdge()&&(null==t||t<v))if(i){if(i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value&&i.pstyle("z-compound-depth").value===e.pstyle("z-compound-depth").value){for(var r=0;r<u.length;r++)if(u[r].isEdge()){u[r]=e,i=e,v=null!=t?t:v;break}}}else u.push(e),i=e,v=null!=t?t:v}function y(r){var n=r.outerWidth()+2*f,i=r.outerHeight()+2*f,a=n/2,l=i/2,u=r.position(),c="auto"===r.pstyle("corner-radius").value?"auto":r.pstyle("corner-radius").pfValue,d=r._private.rscratch;if(u.x-a<=e&&e<=u.x+a&&u.y-l<=t&&t<=u.y+l&&s.nodeShapes[o.getNodeShape(r)].checkPoint(e,t,0,n,i,u.x,u.y,c,d))return g(r,0),!0}r&&(l=l.interactive);function b(r,n){var i,a=r._private;i=n?n+"-":"",r.boundingBox();var o=a.labelBounds[n||"main"],s=r.pstyle(i+"label").value;if("yes"===r.pstyle("text-events").strValue&&s){var l=eG(a.rscratch,"labelX",n),u=eG(a.rscratch,"labelY",n),c=eG(a.rscratch,"labelAngle",n),d=r.pstyle(i+"text-margin-x").pfValue,h=r.pstyle(i+"text-margin-y").pfValue,f=o.x1-p-d,v=o.x2+p-d,y=o.y1-p-h,b=o.y2+p-h;if(c){var x=Math.cos(c),w=Math.sin(c),E=function(e,t){return{x:(e-=l)*x-(t-=u)*w+l,y:e*w+t*x+u}},k=E(f,y),_=E(f,b),C=E(v,y),T=E(v,b);if(tz(e,t,[k.x+d,k.y+h,C.x+d,C.y+h,T.x+d,T.y+h,_.x+d,_.y+h]))return g(r),!0}else if(tP(o,e,t))return g(r),!0}}for(var x=l.length-1;x>=0;x--){var w=l[x];w.isNode()?y(w)||b(w):function(r){var n,i=r._private,a=i.rscratch,l=r.pstyle("width").pfValue,c=r.pstyle("arrow-scale").value,f=l/2+h,p=f*f,v=2*f,b=i.source,x=i.target;if("segments"===a.edgeType||"straight"===a.edgeType||"haystack"===a.edgeType){for(var w=a.allpts,E=0;E+3<w.length;E+=2)if(tM(e,t,w[E],w[E+1],w[E+2],w[E+3],v)&&p>(n=tO(e,t,w[E],w[E+1],w[E+2],w[E+3])))return g(r,n),!0}else if("bezier"===a.edgeType||"multibezier"===a.edgeType||"self"===a.edgeType||"compound"===a.edgeType){for(var w=a.allpts,E=0;E+5<a.allpts.length;E+=4)if(tR(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5],v)&&p>(n=tL(e,t,w[E],w[E+1],w[E+2],w[E+3],w[E+4],w[E+5])))return g(r,n),!0}for(var b=b||i.source,x=x||i.target,k=o.getArrowWidth(l,c),_=[{name:"source",x:a.arrowStartX,y:a.arrowStartY,angle:a.srcArrowAngle},{name:"target",x:a.arrowEndX,y:a.arrowEndY,angle:a.tgtArrowAngle},{name:"mid-source",x:a.midX,y:a.midY,angle:a.midsrcArrowAngle},{name:"mid-target",x:a.midX,y:a.midY,angle:a.midtgtArrowAngle}],E=0;E<_.length;E++){var C=_[E],T=s.arrowShapes[r.pstyle(C.name+"-arrow-shape").value],P=r.pstyle("width").pfValue;if(T.roughCollide(e,t,k,C.angle,{x:C.x,y:C.y},P,h)&&T.collide(e,t,k,C.angle,{x:C.x,y:C.y},P,h))return g(r),!0}d&&u.length>0&&(y(b),y(x))}(w)||b(w)||b(w,"source")||b(w,"target")}return u},a3.getAllInBox=function(e,t,r,n){var i=this.getCachedZSortedEles().interactive,a=2/this.cy.zoom(),o=[],s=Math.min(e,r),l=Math.max(e,r),u=Math.min(t,n),c=Math.max(t,n);e=s,r=l;var d=tb({x1:e,y1:t=u,x2:r,y2:n=c}),h=[{x:d.x1,y:d.y1},{x:d.x2,y:d.y1},{x:d.x2,y:d.y2},{x:d.x1,y:d.y2}],f=[[h[0],h[1]],[h[1],h[2]],[h[2],h[3]],[h[3],h[0]]];function p(e,t){var r=e._private;e.boundingBox();var n=r.labelBounds.main;if(!n)return null;var i=eG(r.rscratch,"labelX",t),o=eG(r.rscratch,"labelY",t),s=eG(r.rscratch,"labelAngle",t),l=e.pstyle("text-margin-x").pfValue,u=e.pstyle("text-margin-y").pfValue,c=n.x1-a-l,d=n.x2+a-l,h=n.y1-a-u,f=n.y2+a-u;if(!s)return[{x:c,y:h},{x:d,y:h},{x:d,y:f},{x:c,y:f}];var p=Math.cos(s),v=Math.sin(s),g=function(e,t){return{x:(e-=i)*p-(t-=o)*v+i,y:e*v+t*p+o}};return[g(c,h),g(d,h),g(d,f),g(c,f)]}for(var g=0;g<i.length;g++){var y=i[g];if(y.isNode()){var b="yes"===y.pstyle("text-events").strValue,x=y.pstyle("box-selection").strValue,w="yes"===y.pstyle("box-select-labels").strValue;if("none"===x)continue;var E=("overlap"===x||w)&&b,k=y.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:E});if("contain"===x){var _=!1;if(w&&b){var C=p(y);C&&t4(C,h)&&(o.push(y),_=!0)}!_&&tB(d,k)&&o.push(y)}else if("overlap"===x&&tT(d,k)){var T=y.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1});if(t4([{x:T.x1,y:T.y1},{x:T.x2,y:T.y1},{x:T.x2,y:T.y2},{x:T.x1,y:T.y2}],h))o.push(y);else{var P=p(y);P&&t4(P,h)&&o.push(y)}}}else{var S=y._private,B=S.rscratch,D=y.pstyle("box-selection").strValue;if("none"===D)continue;if("contain"===D){if(null!=B.startX&&null!=B.startY&&!tP(d,B.startX,B.startY)||null!=B.endX&&null!=B.endY&&!tP(d,B.endX,B.endY))continue;if("bezier"===B.edgeType||"multibezier"===B.edgeType||"self"===B.edgeType||"compound"===B.edgeType||"segments"===B.edgeType||"haystack"===B.edgeType){for(var A=S.rstyle.bezierPts||S.rstyle.linePts||S.rstyle.haystackPts,M=!0,R=0;R<A.length;R++)if(!tS(d,A[R])){M=!1;break}M&&o.push(y)}else"straight"===B.edgeType&&o.push(y)}else if("overlap"===D){var N=!1;if(null!=B.startX&&null!=B.startY&&null!=B.endX&&null!=B.endY&&(tP(d,B.startX,B.startY)||tP(d,B.endX,B.endY)))o.push(y),N=!0;else if(!N&&"haystack"===B.edgeType){for(var I=S.rstyle.haystackPts,L=0;L<I.length;L++)if(tS(d,I[L])){o.push(y),N=!0;break}}if(!N){var O=S.rstyle.bezierPts||S.rstyle.linePts||S.rstyle.haystackPts;if((!O||O.length<2)&&"straight"===B.edgeType&&null!=B.startX&&null!=B.startY&&null!=B.endX&&null!=B.endY&&(O=[{x:B.startX,y:B.startY},{x:B.endX,y:B.endY}]),!O||O.length<2)continue;for(var z=0;z<O.length-1;z++){for(var j=O[z],V=O[z+1],F=0;F<f.length;F++){var X=v(f[F],2);if(function(e,t,r,n){function i(e,t,r){return(r.y-e.y)*(t.x-e.x)>(t.y-e.y)*(r.x-e.x)}return i(e,r,n)!==i(t,r,n)&&i(e,t,r)!==i(e,t,n)}(j,V,X[0],X[1])){o.push(y),N=!0;break}}if(N)break}}}}}return o};var a4={};a4.calculateArrowAngles=function(e){var t=e._private.rscratch,r="haystack"===t.edgeType,n="bezier"===t.edgeType,i="multibezier"===t.edgeType,a="segments"===t.edgeType,o="compound"===t.edgeType,s="self"===t.edgeType;if(r?(y=t.haystackPts[0],b=t.haystackPts[1],x=t.haystackPts[2],w=t.haystackPts[3]):(y=t.arrowStartX,b=t.arrowStartY,x=t.arrowEndX,w=t.arrowEndY),d=t.midX,h=t.midY,a)v=y-t.segpts[0],g=b-t.segpts[1];else if(i||o||s||n){var l=t.allpts,u=tv(l[0],l[2],l[4],.1),c=tv(l[1],l[3],l[5],.1);v=y-u,g=b-c}else v=y-d,g=b-h;t.srcArrowAngle=tu(v,g);var d=t.midX,h=t.midY;if(r&&(d=(y+x)/2,h=(b+w)/2),v=x-y,g=w-b,a){var l=t.allpts;if(l.length/2%2==0){var f=l.length/2,p=f-2;v=l[f]-l[p],g=l[f+1]-l[p+1]}else if(t.isRound)v=t.midVector[1],g=-t.midVector[0];else{var f=l.length/2-1,p=f-2;v=l[f]-l[p],g=l[f+1]-l[p+1]}}else if(i||o||s){var v,g,y,b,x,w,d,h,E,k,_,C,l=t.allpts;if(t.ctrlpts.length/2%2==0){var T=l.length/2-1,P=T+2,S=P+2;E=tv(l[T],l[P],l[S],0),k=tv(l[T+1],l[P+1],l[S+1],0),_=tv(l[T],l[P],l[S],1e-4),C=tv(l[T+1],l[P+1],l[S+1],1e-4)}else{var P=l.length/2-1,T=P-2,S=P+2;E=tv(l[T],l[P],l[S],.4999),k=tv(l[T+1],l[P+1],l[S+1],.4999),_=tv(l[T],l[P],l[S],.5),C=tv(l[T+1],l[P+1],l[S+1],.5)}v=_-E,g=C-k}if(t.midtgtArrowAngle=tu(v,g),t.midDispX=v,t.midDispY=g,v*=-1,g*=-1,a){var l=t.allpts;if(l.length/2%2==0);else if(!t.isRound){var f=l.length/2-1,B=f+2;v=-(l[B]-l[f]),g=-(l[B+1]-l[f+1])}}if(t.midsrcArrowAngle=tu(v,g),a)v=x-t.segpts[t.segpts.length-2],g=w-t.segpts[t.segpts.length-1];else if(i||o||s||n){var l=t.allpts,D=l.length,u=tv(l[D-6],l[D-4],l[D-2],.9),c=tv(l[D-5],l[D-3],l[D-1],.9);v=x-u,g=w-c}else v=x-d,g=w-h;t.tgtArrowAngle=tu(v,g)},a4.getArrowWidth=a4.getArrowHeight=function(e,t){var r=this.arrowWidthCache=this.arrowWidthCache||{},n=r[e+", "+t];return n||(n=Math.max(Math.pow(13.37*e,.9),29)*t,r[e+", "+t]=n),n};var a9,a6,a7,a8,oe,ot,or,on,oi,oa,oo,os,ol,ou,oc,od,oh,of,op,ov,og,oy,om,ob,ox,ow,oE,ok,o_,oC,oT,oP,oS,oB,oD,oA,oM,oR,oN,oI,oL,oO,oz,oj,oV,oF,oX,oq,oY,oW,oU,oG,oH,oK,oZ,o$,oQ,oJ,o0,o1,o2,o5,o3,o4,o9,o6,o7,o8,se,st,sr,sn,si,sa,so,ss,sl,su,sc,sd,sh,sf,sp,sv,sg,sy,sm,sb,sx,sw,sE,sk,s_,sC,sT,sP,sS,sB,sD,sA,sM,sR,sN,sI,sL,sO,sz,sj,sV,sF,sX,sq,sY,sW,sU,sG,sH,sK,sZ,s$,sQ,sJ,s0,s1,s2,s5,s3,s4,s9,s6,s7,s8,le,lt,lr,ln,li,la,lo,ls,ll,lu,lc,ld,lh,lf,lp,lv,lg,ly,lm,lb,lx,lw,lE,lk,l_,lC,lT,lP={},lS={},lB=function(e,t,r){r.x=t.x-e.x,r.y=t.y-e.y,r.len=Math.sqrt(r.x*r.x+r.y*r.y),r.nx=r.x/r.len,r.ny=r.y/r.len,r.ang=Math.atan2(r.ny,r.nx)},lD=function(e,t){t.x=-1*e.x,t.y=-1*e.y,t.nx=-1*e.nx,t.ny=-1*e.ny,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},lA=function(e,o,s,l,u){if(e!==a?lB(o,e,lP):lD(lS,lP),lB(o,s,lS),ly=lP.nx*lS.ny-lP.ny*lS.nx,lm=lP.nx*lS.nx- -(lP.ny*lS.ny),1e-6>Math.abs(lw=Math.asin(Math.max(-1,Math.min(1,ly))))){lv=o.x,lg=o.y,lk=lC=0;return}lb=1,lx=!1,lm<0?lw<0?lw=Math.PI+lw:(lw=Math.PI-lw,lb=-1,lx=!0):lw>0&&(lb=-1,lx=!0),lC=void 0!==o.radius?o.radius:l,lE=lw/2,lT=Math.min(lP.len/2,lS.len/2),lk=u?(l_=Math.abs(Math.cos(lE)*lC/Math.sin(lE)))>lT?Math.abs((l_=lT)*Math.sin(lE)/Math.cos(lE)):lC:Math.abs((l_=Math.min(lT,lC))*Math.sin(lE)/Math.cos(lE)),n=o.x+lS.nx*l_,i=o.y+lS.ny*l_,lv=n-lS.ny*lk*lb,lg=i+lS.nx*lk*lb,t=o.x+lP.nx*l_,r=o.y+lP.ny*l_,a=o};function lM(e,t){0===t.radius?e.lineTo(t.cx,t.cy):e.arc(t.cx,t.cy,t.radius,t.startAngle,t.endAngle,t.counterClockwise)}function lR(e,a,o,s){var l=!(arguments.length>4)||void 0===arguments[4]||arguments[4];return 0===s||0===a.radius?{cx:a.x,cy:a.y,radius:0,startX:a.x,startY:a.y,stopX:a.x,stopY:a.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(lA(e,a,o,s,l),{cx:lv,cy:lg,radius:lk,startX:t,startY:r,stopX:n,stopY:i,startAngle:lP.ang+Math.PI/2*lb,endAngle:lS.ang-Math.PI/2*lb,counterClockwise:lx})}var lN=Math.sqrt(.02),lI={};function lL(e){var t=[];if(null!=e){for(var r=0;r<e.length;r+=2){var n=e[r],i=e[r+1];t.push({x:n,y:i})}return t}}lI.findMidptPtsEtc=function(e,t){var r,n=t.posPts,i=t.intersectionPts,a=t.vectorNormInverse,o=e.pstyle("source-endpoint"),s=e.pstyle("target-endpoint"),l=null!=o.units&&null!=s.units;switch(e.pstyle("edge-distances").value){case"node-position":r=n;break;case"intersection":r=i;break;case"endpoints":if(l){var u,c,d,h=v(this.manualEndptToPx(e.source()[0],o),2),f=h[0],p=h[1],g=v(this.manualEndptToPx(e.target()[0],s),2),y=g[0],b=g[1];u=b-p,d=Math.sqrt((c=y-f)*c+u*u),a={x:-u/d,y:c/d},r={x1:f,y1:p,x2:y,y2:b}}else ez("Edge ".concat(e.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),r=i}return{midptPts:r,vectorNormInverse:a}},lI.findHaystackPoints=function(e){for(var t=0;t<e.length;t++){var r=e[t],n=r._private,i=n.rscratch;if(!i.haystack){var a=2*Math.random()*Math.PI;i.source={x:Math.cos(a),y:Math.sin(a)},i.target={x:Math.cos(a=2*Math.random()*Math.PI),y:Math.sin(a)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),c=o.width(),d=s.width(),h=o.height(),f=s.height(),p=r.pstyle("haystack-radius").value/2;i.haystackPts=i.allpts=[i.source.x*c*p+l.x,i.source.y*h*p+l.y,i.target.x*d*p+u.x,i.target.y*f*p+u.y],i.midX=(i.allpts[0]+i.allpts[2])/2,i.midY=(i.allpts[1]+i.allpts[3])/2,i.edgeType="haystack",i.haystack=!0,this.storeEdgeProjections(r),this.calculateArrowAngles(r),this.recalculateEdgeLabelProjections(r),this.calculateLabelAngles(r)}},lI.findSegmentsPoints=function(e,t){var r=e._private.rscratch,n=e.pstyle("segment-weights"),i=e.pstyle("segment-distances"),a=e.pstyle("segment-radii"),o=e.pstyle("radius-type"),s=Math.min(n.pfValue.length,i.pfValue.length),l=a.pfValue[a.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];r.edgeType="segments",r.segpts=[],r.radii=[],r.isArcRadius=[];for(var c=0;c<s;c++){var d=n.pfValue[c],h=i.pfValue[c],f=1-d,p=this.findMidptPtsEtc(e,t),v=p.midptPts,g=p.vectorNormInverse,y={x:v.x1*f+v.x2*d,y:v.y1*f+v.y2*d};r.segpts.push(y.x+g.x*h,y.y+g.y*h),r.radii.push(void 0!==a.pfValue[c]?a.pfValue[c]:l),r.isArcRadius.push((void 0!==o.pfValue[c]?o.pfValue[c]:u)==="arc-radius")}},lI.findLoopPoints=function(e,t,r,n){var i=e._private.rscratch,a=t.dirCounts,o=t.srcPos,s=e.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=e.pstyle("loop-direction").pfValue,c=e.pstyle("loop-sweep").pfValue,d=e.pstyle("control-point-step-size").pfValue;i.edgeType="self";var h=r,f=d;n&&(h=0,f=l);var p=u-Math.PI/2,v=p-c/2,g=p+c/2,y=String(u+"_"+c);h=void 0===a[y]?a[y]=0:++a[y],i.ctrlpts=[o.x+1.4*Math.cos(v)*f*(h/3+1),o.y+1.4*Math.sin(v)*f*(h/3+1),o.x+1.4*Math.cos(g)*f*(h/3+1),o.y+1.4*Math.sin(g)*f*(h/3+1)]},lI.findCompoundLoopPoints=function(e,t,r,n){var i=e._private.rscratch;i.edgeType="compound";var a=t.srcPos,o=t.tgtPos,s=t.srcW,l=t.srcH,u=t.tgtW,c=t.tgtH,d=e.pstyle("control-point-step-size").pfValue,h=e.pstyle("control-point-distances"),f=h?h.pfValue[0]:void 0,p=r,v=d;n&&(p=0,v=f);var g={x:a.x-s/2,y:a.y-l/2},y={x:o.x-u/2,y:o.y-c/2},b={x:Math.min(g.x,y.x),y:Math.min(g.y,y.y)},x=Math.max(.5,Math.log(.01*s)),w=Math.max(.5,Math.log(.01*u));i.ctrlpts=[b.x,b.y-1.7995514309304248*v*(p/3+1)*x,b.x-1.7995514309304248*v*(p/3+1)*w,b.y]},lI.findStraightEdgePoints=function(e){e._private.rscratch.edgeType="straight"},lI.findBezierPoints=function(e,t,r,n,i){var a=e._private.rscratch,o=e.pstyle("control-point-step-size").pfValue,s=e.pstyle("control-point-distances"),l=e.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,c=s?s.pfValue[0]:void 0,d=l.value[0];a.edgeType=n?"multibezier":"bezier",a.ctrlpts=[];for(var h=0;h<u;h++){var f=(.5-t.eles.length/2+r)*o*(i?-1:1),p=void 0,v=td(f);n&&(c=s?s.pfValue[h]:o,d=l.value[h]);var g=void 0!==(p=n?c:void 0!==c?v*c:void 0)?p:f,y=1-d,b=d,x=this.findMidptPtsEtc(e,t),w=x.midptPts,E=x.vectorNormInverse,k={x:w.x1*y+w.x2*b,y:w.y1*y+w.y2*b};a.ctrlpts.push(k.x+E.x*g,k.y+E.y*g)}},lI.findTaxiPoints=function(e,t){var r,n=e._private.rscratch;n.edgeType="segments";var i="vertical",a="horizontal",o="leftward",s="rightward",l="downward",u="upward",c=t.posPts,d=t.srcW,h=t.srcH,f=t.tgtW,p=t.tgtH,v="node-position"!==e.pstyle("edge-distances").value,g=e.pstyle("taxi-direction").value,y=g,b=e.pstyle("taxi-turn"),x="%"===b.units,w=b.pfValue,E=e.pstyle("taxi-turn-min-distance").pfValue,k=c.x2-c.x1,_=c.y2-c.y1,C=function(e,t){return e>0?Math.max(e-t,0):Math.min(e+t,0)},T=C(k,v?(d+f)/2:0),P=C(_,v?(h+p)/2:0),S=!1;"auto"===y?g=Math.abs(T)>Math.abs(P)?a:i:y===u||y===l?(g=i,S=!0):(y===o||y===s)&&(g=a,S=!0);var B=g===i,D=B?P:T,A=B?_:k,M=td(A),R=!1;!(S&&(x||w<0))&&(y===l&&A<0||y===u&&A>0||y===o&&A>0||y===s&&A<0)&&(M*=-1,D=M*Math.abs(D),R=!0);var N=function(e){return Math.abs(e)<E||Math.abs(e)>=Math.abs(D)},I=N(r=x?(w<0?1+w:w)*D:(w<0?D:0)+w*M),L=N(Math.abs(D)-Math.abs(r));if((I||L)&&!R)if(B){var O=Math.abs(k)<=f/2;if(Math.abs(A)<=h/2){var z=(c.x1+c.x2)/2;n.segpts=[z,c.y1,z,c.y2]}else if(O){var j=(c.y1+c.y2)/2;n.segpts=[c.x1,j,c.x2,j]}else n.segpts=[c.x1,c.y2]}else{var V=Math.abs(_)<=p/2;if(Math.abs(A)<=d/2){var F=(c.y1+c.y2)/2;n.segpts=[c.x1,F,c.x2,F]}else if(V){var X=(c.x1+c.x2)/2;n.segpts=[X,c.y1,X,c.y2]}else n.segpts=[c.x2,c.y1]}else if(B){var q=c.y1+r+(v?h/2*M:0);n.segpts=[c.x1,q,c.x2,q]}else{var Y=c.x1+r+(v?d/2*M:0);n.segpts=[Y,c.y1,Y,c.y2]}if(n.isRound){var W=e.pstyle("taxi-radius").value,U="arc-radius"===e.pstyle("radius-type").value[0];n.radii=Array(n.segpts.length/2).fill(W),n.isArcRadius=Array(n.segpts.length/2).fill(U)}},lI.tryToCorrectInvalidPoints=function(e,t){var r=e._private.rscratch;if("bezier"===r.edgeType){var n=t.srcPos,i=t.tgtPos,a=t.srcW,o=t.srcH,s=t.tgtW,l=t.tgtH,u=t.srcShape,c=t.tgtShape,d=t.srcCornerRadius,h=t.tgtCornerRadius,f=t.srcRs,p=t.tgtRs,v=!M(r.startX)||!M(r.startY),g=!M(r.arrowStartX)||!M(r.arrowStartY),y=!M(r.endX)||!M(r.endY),b=!M(r.arrowEndX)||!M(r.arrowEndY),x=3*(this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth),w=th({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.startX,y:r.startY}),E=w<x,k=th({x:r.ctrlpts[0],y:r.ctrlpts[1]},{x:r.endX,y:r.endY}),_=k<x,C=!1;if(v||g||E){C=!0;var T={x:r.ctrlpts[0]-n.x,y:r.ctrlpts[1]-n.y},P=Math.sqrt(T.x*T.x+T.y*T.y),S={x:T.x/P,y:T.y/P},B=Math.max(a,o),D={x:r.ctrlpts[0]+2*S.x*B,y:r.ctrlpts[1]+2*S.y*B},A=u.intersectLine(n.x,n.y,a,o,D.x,D.y,0,d,f);E?(r.ctrlpts[0]=r.ctrlpts[0]+S.x*(x-w),r.ctrlpts[1]=r.ctrlpts[1]+S.y*(x-w)):(r.ctrlpts[0]=A[0]+S.x*x,r.ctrlpts[1]=A[1]+S.y*x)}if(y||b||_){C=!0;var R={x:r.ctrlpts[0]-i.x,y:r.ctrlpts[1]-i.y},N=Math.sqrt(R.x*R.x+R.y*R.y),I={x:R.x/N,y:R.y/N},L=Math.max(a,o),O={x:r.ctrlpts[0]+2*I.x*L,y:r.ctrlpts[1]+2*I.y*L},z=c.intersectLine(i.x,i.y,s,l,O.x,O.y,0,h,p);_?(r.ctrlpts[0]=r.ctrlpts[0]+I.x*(x-k),r.ctrlpts[1]=r.ctrlpts[1]+I.y*(x-k)):(r.ctrlpts[0]=z[0]+I.x*x,r.ctrlpts[1]=z[1]+I.y*x)}C&&this.findEndpoints(e)}},lI.storeAllpts=function(e){var t=e._private.rscratch;if("multibezier"===t.edgeType||"bezier"===t.edgeType||"self"===t.edgeType||"compound"===t.edgeType){t.allpts=[],t.allpts.push(t.startX,t.startY);for(var r,n=0;n+1<t.ctrlpts.length;n+=2)t.allpts.push(t.ctrlpts[n],t.ctrlpts[n+1]),n+3<t.ctrlpts.length&&t.allpts.push((t.ctrlpts[n]+t.ctrlpts[n+2])/2,(t.ctrlpts[n+1]+t.ctrlpts[n+3])/2);(t.allpts.push(t.endX,t.endY),t.ctrlpts.length/2%2==0)?(r=t.allpts.length/2-1,t.midX=t.allpts[r],t.midY=t.allpts[r+1]):(r=t.allpts.length/2-3,t.midX=tv(t.allpts[r],t.allpts[r+2],t.allpts[r+4],.5),t.midY=tv(t.allpts[r+1],t.allpts[r+3],t.allpts[r+5],.5))}else if("straight"===t.edgeType)t.allpts=[t.startX,t.startY,t.endX,t.endY],t.midX=(t.startX+t.endX+t.arrowStartX+t.arrowEndX)/4,t.midY=(t.startY+t.endY+t.arrowStartY+t.arrowEndY)/4;else if("segments"===t.edgeType){if(t.allpts=[],t.allpts.push(t.startX,t.startY),t.allpts.push.apply(t.allpts,t.segpts),t.allpts.push(t.endX,t.endY),t.isRound){t.roundCorners=[];for(var i=2;i+3<t.allpts.length;i+=2){var a=t.radii[i/2-1],o=t.isArcRadius[i/2-1];t.roundCorners.push(lR({x:t.allpts[i-2],y:t.allpts[i-1]},{x:t.allpts[i],y:t.allpts[i+1],radius:a},{x:t.allpts[i+2],y:t.allpts[i+3]},a,o))}}if(t.segpts.length%4==0){var s=t.segpts.length/2,l=s-2;t.midX=(t.segpts[l]+t.segpts[s])/2,t.midY=(t.segpts[l+1]+t.segpts[s+1])/2}else{var u=t.segpts.length/2-1;if(t.isRound){var c={x:t.segpts[u],y:t.segpts[u+1]},d=t.roundCorners[u/2];if(0===d.radius){var h={x:t.segpts[u+2],y:t.segpts[u+3]};t.midX=c.x,t.midY=c.y,t.midVector=[c.y-h.y,h.x-c.x]}else{var f=[c.x-d.cx,c.y-d.cy],p=d.radius/Math.sqrt(Math.pow(f[0],2)+Math.pow(f[1],2));f=f.map(function(e){return e*p}),t.midX=d.cx+f[0],t.midY=d.cy+f[1],t.midVector=f}}else t.midX=t.segpts[u],t.midY=t.segpts[u+1]}}},lI.checkForInvalidEdgeWarning=function(e){var t=e[0]._private.rscratch;t.nodesOverlap||M(t.startX)&&M(t.startY)&&M(t.endX)&&M(t.endY)?t.loggedErr=!1:t.loggedErr||(t.loggedErr=!0,ez("Edge `"+e.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))},lI.findEdgeControlPoints=function(e){var t=this;if(e&&0!==e.length){for(var r=this,n=r.cy.hasCompoundNodes(),i=new eZ,a=function(e,t){return[].concat(g(e),[+!!t]).join("-")},o=[],s=[],l=0;l<e.length;l++){var u=e[l],c=u._private,d=u.pstyle("curve-style").value;if(!u.removed()&&u.takesUpSpace()){if("haystack"===d){s.push(u);continue}var h="unbundled-bezier"===d||U(d,"segments")||"straight"===d||"straight-triangle"===d||U(d,"taxi"),f="unbundled-bezier"===d||"bezier"===d,p=c.source,v=c.target,y=[p.poolIndex(),v.poolIndex()].sort(),b=a(y,h),x=i.get(b);null==x&&(x={eles:[]},o.push({pairId:y,edgeIsUnbundled:h}),i.set(b,x)),x.eles.push(u),h&&(x.hasUnbundled=!0),f&&(x.hasBezier=!0)}}for(var w=0;w<o.length;w++)!function(){var e,s=o[w],l=a(s.pairId,s.edgeIsUnbundled),u=i.get(l);if(!u.hasUnbundled){var c=u.eles[0].parallelEdges().filter(function(e){return e.isBundledBezier()});eW(u.eles),c.forEach(function(e){return u.eles.push(e)}),u.eles.sort(function(e,t){return e.poolIndex()-t.poolIndex()})}var d=u.eles[0],h=d.source(),f=d.target();if(h.poolIndex()>f.poolIndex()){var p=h;h=f,f=p}var v=u.srcPos=h.position(),g=u.tgtPos=f.position(),y=u.srcW=h.outerWidth(),b=u.srcH=h.outerHeight(),x=u.tgtW=f.outerWidth(),E=u.tgtH=f.outerHeight(),k=u.srcShape=r.nodeShapes[t.getNodeShape(h)],_=u.tgtShape=r.nodeShapes[t.getNodeShape(f)],C=u.srcCornerRadius="auto"===h.pstyle("corner-radius").value?"auto":h.pstyle("corner-radius").pfValue,T=u.tgtCornerRadius="auto"===f.pstyle("corner-radius").value?"auto":f.pstyle("corner-radius").pfValue,P=u.tgtRs=f._private.rscratch,S=u.srcRs=h._private.rscratch;u.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var B=0;B<u.eles.length;B++){var D=u.eles[B],A=D[0]._private.rscratch,R=D.pstyle("curve-style").value,N="unbundled-bezier"===R||U(R,"segments")||U(R,"taxi"),I=!h.same(D.source());if(!u.calculatedIntersection&&h!==f&&(u.hasBezier||u.hasUnbundled)){u.calculatedIntersection=!0;var L=k.intersectLine(v.x,v.y,y,b,g.x,g.y,0,C,S),O=u.srcIntn=L,z=_.intersectLine(g.x,g.y,x,E,v.x,v.y,0,T,P),j=u.tgtIntn=z,V=u.intersectionPts={x1:L[0],x2:z[0],y1:L[1],y2:z[1]},F=u.posPts={x1:v.x,x2:g.x,y1:v.y,y2:g.y},X=z[1]-L[1],q=z[0]-L[0],Y=Math.sqrt(q*q+X*X);M(Y)&&Y>=lN||(Y=Math.sqrt(Math.max(q*q,.01)+Math.max(X*X,.01)));var W=u.vector={x:q,y:X},G=u.vectorNorm={x:W.x/Y,y:W.y/Y},H={x:-G.y,y:G.x};u.nodesOverlap=!M(Y)||_.checkPoint(L[0],L[1],0,x,E,g.x,g.y,T,P)||k.checkPoint(z[0],z[1],0,y,b,v.x,v.y,C,S),u.vectorNormInverse=H,e={nodesOverlap:u.nodesOverlap,dirCounts:u.dirCounts,calculatedIntersection:!0,hasBezier:u.hasBezier,hasUnbundled:u.hasUnbundled,eles:u.eles,srcPos:g,srcRs:P,tgtPos:v,tgtRs:S,srcW:x,srcH:E,tgtW:y,tgtH:b,srcIntn:j,tgtIntn:O,srcShape:_,tgtShape:k,posPts:{x1:F.x2,y1:F.y2,x2:F.x1,y2:F.y1},intersectionPts:{x1:V.x2,y1:V.y2,x2:V.x1,y2:V.y1},vector:{x:-W.x,y:-W.y},vectorNorm:{x:-G.x,y:-G.y},vectorNormInverse:{x:-H.x,y:-H.y}}}var K=I?e:u;A.nodesOverlap=K.nodesOverlap,A.srcIntn=K.srcIntn,A.tgtIntn=K.tgtIntn,A.isRound=R.startsWith("round"),n&&(h.isParent()||h.isChild()||f.isParent()||f.isChild())&&(h.parents().anySame(f)||f.parents().anySame(h)||h.same(f)&&h.isParent())?t.findCompoundLoopPoints(D,K,B,N):h===f?t.findLoopPoints(D,K,B,N):R.endsWith("segments")?t.findSegmentsPoints(D,K):R.endsWith("taxi")?t.findTaxiPoints(D,K):"straight"!==R&&(N||u.eles.length%2!=1||B!==Math.floor(u.eles.length/2))?t.findBezierPoints(D,K,B,N,I):t.findStraightEdgePoints(D),t.findEndpoints(D),t.tryToCorrectInvalidPoints(D,K),t.checkForInvalidEdgeWarning(D),t.storeAllpts(D),t.storeEdgeProjections(D),t.calculateArrowAngles(D),t.recalculateEdgeLabelProjections(D),t.calculateLabelAngles(D)}}();this.findHaystackPoints(s)}},lI.getSegmentPoints=function(e){var t=e[0]._private.rscratch;if(this.recalculateRenderedStyle(e),"segments"===t.edgeType)return lL(t.segpts)},lI.getControlPoints=function(e){var t=e[0]._private.rscratch;this.recalculateRenderedStyle(e);var r=t.edgeType;if("bezier"===r||"multibezier"===r||"self"===r||"compound"===r)return lL(t.ctrlpts)},lI.getEdgeMidpoint=function(e){var t=e[0]._private.rscratch;return this.recalculateRenderedStyle(e),{x:t.midX,y:t.midY}};var lO={};lO.manualEndptToPx=function(e,t){var r=e.position(),n=e.outerWidth(),i=e.outerHeight(),a=e._private.rscratch;if(2===t.value.length){var o=[t.pfValue[0],t.pfValue[1]];return"%"===t.units[0]&&(o[0]=o[0]*n),"%"===t.units[1]&&(o[1]=o[1]*i),o[0]+=r.x,o[1]+=r.y,o}var s=t.pfValue[0];s=-Math.PI/2+s;var l=2*Math.max(n,i),u=[r.x+Math.cos(s)*l,r.y+Math.sin(s)*l];return this.nodeShapes[this.getNodeShape(e)].intersectLine(r.x,r.y,n,i,u[0],u[1],0,"auto"===e.pstyle("corner-radius").value?"auto":e.pstyle("corner-radius").pfValue,a)},lO.findEndpoints=function(e){var t,r,n,i,a,o,s,l,u,c=e.source()[0],d=e.target()[0],h=c.position(),f=d.position(),p=e.pstyle("target-arrow-shape").value,v=e.pstyle("source-arrow-shape").value,g=e.pstyle("target-distance-from-node").pfValue,y=e.pstyle("source-distance-from-node").pfValue,b=c._private.rscratch,x=d._private.rscratch,w=e.pstyle("curve-style").value,E=e._private.rscratch,k=E.edgeType,_=U(w,"taxi"),C="self"===k||"compound"===k,T="bezier"===k||"multibezier"===k||C,P="bezier"!==k,S="straight"===k||"segments"===k,B="segments"===k,D=C||_,A=e.pstyle("source-endpoint"),R=D?"outside-to-node":A.value,N="auto"===c.pstyle("corner-radius").value?"auto":c.pstyle("corner-radius").pfValue,I=e.pstyle("target-endpoint"),L=D?"outside-to-node":I.value,O="auto"===d.pstyle("corner-radius").value?"auto":d.pstyle("corner-radius").pfValue;E.srcManEndpt=A,E.tgtManEndpt=I;var z=null!=(t=(null==I||null==(r=I.pfValue)?void 0:r.length)===2?I.pfValue:null)?t:[0,0],j=null!=(n=(null==A||null==(i=A.pfValue)?void 0:i.length)===2?A.pfValue:null)?n:[0,0];if(T){var V=[E.ctrlpts[0],E.ctrlpts[1]];o=P?[E.ctrlpts[E.ctrlpts.length-2],E.ctrlpts[E.ctrlpts.length-1]]:V,s=V}else if(S){var F=B?E.segpts.slice(0,2):[f.x+z[0],f.y+z[1]];o=B?E.segpts.slice(E.segpts.length-2):[h.x+j[0],h.y+j[1]],s=F}if("inside-to-node"===L)a=[f.x,f.y];else if(I.units)a=this.manualEndptToPx(d,I);else if("outside-to-line"===L)a=E.tgtIntn;else if("outside-to-node"===L||"outside-to-node-or-label"===L?l=o:("outside-to-line"===L||"outside-to-line-or-label"===L)&&(l=[h.x,h.y]),a=this.nodeShapes[this.getNodeShape(d)].intersectLine(f.x,f.y,d.outerWidth(),d.outerHeight(),l[0],l[1],0,O,x),"outside-to-node-or-label"===L||"outside-to-line-or-label"===L){var X=d._private.rscratch,q=X.labelWidth,Y=X.labelHeight,W=X.labelX,G=X.labelY,H=q/2,K=Y/2,Z=d.pstyle("text-valign").value;"top"===Z?G-=K:"bottom"===Z&&(G+=K);var $=d.pstyle("text-halign").value;"left"===$?W-=H:"right"===$&&(W+=H);var Q=tK(l[0],l[1],[W-H,G-K,W+H,G-K,W+H,G+K,W-H,G+K],f.x,f.y);if(Q.length>0){var J=tf(h,ti(a)),ee=tf(h,ti(Q)),et=J;ee<J&&(a=Q,et=ee),Q.length>2&&tf(h,{x:Q[2],y:Q[3]})<et&&(a=[Q[2],Q[3]])}}var er=t$(a,o,this.arrowShapes[p].spacing(e)+g),en=t$(a,o,this.arrowShapes[p].gap(e)+g);if(E.endX=en[0],E.endY=en[1],E.arrowEndX=er[0],E.arrowEndY=er[1],"inside-to-node"===R)a=[h.x,h.y];else if(A.units)a=this.manualEndptToPx(c,A);else if("outside-to-line"===R)a=E.srcIntn;else if("outside-to-node"===R||"outside-to-node-or-label"===R?u=s:("outside-to-line"===R||"outside-to-line-or-label"===R)&&(u=[f.x,f.y]),a=this.nodeShapes[this.getNodeShape(c)].intersectLine(h.x,h.y,c.outerWidth(),c.outerHeight(),u[0],u[1],0,N,b),"outside-to-node-or-label"===R||"outside-to-line-or-label"===R){var ei=c._private.rscratch,ea=ei.labelWidth,eo=ei.labelHeight,es=ei.labelX,el=ei.labelY,eu=ea/2,ec=eo/2,ed=c.pstyle("text-valign").value;"top"===ed?el-=ec:"bottom"===ed&&(el+=ec);var eh=c.pstyle("text-halign").value;"left"===eh?es-=eu:"right"===eh&&(es+=eu);var ef=tK(u[0],u[1],[es-eu,el-ec,es+eu,el-ec,es+eu,el+ec,es-eu,el+ec],h.x,h.y);if(ef.length>0){var ep=tf(f,ti(a)),ev=tf(f,ti(ef)),eg=ep;ev<ep&&(a=[ef[0],ef[1]],eg=ev),ef.length>2&&tf(f,{x:ef[2],y:ef[3]})<eg&&(a=[ef[2],ef[3]])}}var ey=t$(a,s,this.arrowShapes[v].spacing(e)+y),em=t$(a,s,this.arrowShapes[v].gap(e)+y);E.startX=em[0],E.startY=em[1],E.arrowStartX=ey[0],E.arrowStartY=ey[1],(T||P||S)&&(M(E.startX)&&M(E.startY)&&M(E.endX)&&M(E.endY)?E.badLine=!1:E.badLine=!0)},lO.getSourceEndpoint=function(e){var t=e[0]._private.rscratch;return(this.recalculateRenderedStyle(e),"haystack"===t.edgeType)?{x:t.haystackPts[0],y:t.haystackPts[1]}:{x:t.arrowStartX,y:t.arrowStartY}},lO.getTargetEndpoint=function(e){var t=e[0]._private.rscratch;return(this.recalculateRenderedStyle(e),"haystack"===t.edgeType)?{x:t.haystackPts[2],y:t.haystackPts[3]}:{x:t.arrowEndX,y:t.arrowEndY}};var lz={};lz.storeEdgeProjections=function(e){var t=e._private,r=t.rscratch,n=r.edgeType;if(t.rstyle.bezierPts=null,t.rstyle.linePts=null,t.rstyle.haystackPts=null,"multibezier"===n||"bezier"===n||"self"===n||"compound"===n){t.rstyle.bezierPts=[];for(var i=0;i+5<r.allpts.length;i+=4)!function(e,t,r){for(var n=function(e,t,r,n){return tv(e,t,r,n)},i=t._private.rstyle.bezierPts,a=0;a<e.bezierProjPcts.length;a++){var o=e.bezierProjPcts[a];i.push({x:n(r[0],r[2],r[4],o),y:n(r[1],r[3],r[5],o)})}}(this,e,r.allpts.slice(i,i+6))}else if("segments"===n)for(var a=t.rstyle.linePts=[],i=0;i+1<r.allpts.length;i+=2)a.push({x:r.allpts[i],y:r.allpts[i+1]});else if("haystack"===n){var o=r.haystackPts;t.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}t.rstyle.arrowWidth=this.getArrowWidth(e.pstyle("width").pfValue,e.pstyle("arrow-scale").value)*this.arrowShapeWidth},lz.recalculateEdgeProjections=function(e){this.findEdgeControlPoints(e)};var lj={};lj.recalculateNodeLabelProjection=function(e){var t,r;if(!j(e.pstyle("label").strValue)){var n=e._private,i=e.width(),a=e.height(),o=e.padding(),s=e.position(),l=e.pstyle("text-halign").strValue,u=e.pstyle("text-valign").strValue,c=n.rscratch,d=n.rstyle;switch(l){case"left":t=s.x-i/2-o;break;case"right":t=s.x+i/2+o;break;default:t=s.x}switch(u){case"top":r=s.y-a/2-o;break;case"bottom":r=s.y+a/2+o;break;default:r=s.y}c.labelX=t,c.labelY=r,d.labelX=t,d.labelY=r,this.calculateLabelAngles(e),this.applyLabelDimensions(e)}};var lV=function(e,t){var r=Math.atan(t/e);return 0===e&&r<0&&(r*=-1),r},lF=function(e,t){return lV(t.x-e.x,t.y-e.y)},lX=function(e,t,r,n){var i=tm(0,n-.001,1),a=tm(0,n+.001,1);return lF(tg(e,t,r,i),tg(e,t,r,a))};lj.recalculateEdgeLabelProjections=function(e){var t,r=e._private,n=r.rscratch,i=this,a={mid:e.pstyle("label").strValue,source:e.pstyle("source-label").strValue,target:e.pstyle("target-label").strValue};if(a.mid||a.source||a.target){t={x:n.midX,y:n.midY};var o=function(e,t,n){eH(r.rscratch,e,t,n),eH(r.rstyle,e,t,n)};o("labelX",null,t.x),o("labelY",null,t.y),o("labelAutoAngle",null,lV(n.midDispX,n.midDispY));var s=function(){if(s.cache)return s.cache;for(var e=[],t=0;t+5<n.allpts.length;t+=4){var a={x:n.allpts[t],y:n.allpts[t+1]},o={x:n.allpts[t+2],y:n.allpts[t+3]},l={x:n.allpts[t+4],y:n.allpts[t+5]};e.push({p0:a,p1:o,p2:l,startDist:0,length:0,segments:[]})}var u=r.rstyle.bezierPts,c=i.bezierProjPcts.length;function d(e,t,r,n,i){var a=th(t,r),o=e.segments[e.segments.length-1],s={p0:t,p1:r,t0:n,t1:i,startDist:o?o.startDist+o.length:0,length:a};e.segments.push(s),e.length+=a}for(var h=0;h<e.length;h++){var f=e[h],p=e[h-1];p&&(f.startDist=p.startDist+p.length),d(f,f.p0,u[h*c],0,i.bezierProjPcts[0]);for(var v=0;v<c-1;v++)d(f,u[h*c+v],u[h*c+v+1],i.bezierProjPcts[v],i.bezierProjPcts[v+1]);d(f,u[h*c+c-1],f.p2,i.bezierProjPcts[c-1],1)}return s.cache=e},l=function(r){var i="source"===r;if(a[r]){var l=e.pstyle(r+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":for(var u,c,d=s(),h=0,f=0,p=0;p<d.length;p++){for(var v=d[i?p:d.length-1-p],g=0;g<v.segments.length;g++){var y=v.segments[i?g:v.segments.length-1-g],b=p===d.length-1&&g===v.segments.length-1;if(h=f,(f+=y.length)>=l||b){c={cp:v,segment:y};break}}if(c)break}var x=c.cp,w=c.segment,E=(l-h)/w.length,k=w.t1-w.t0,_=i?w.t0+k*E:w.t1-k*E;_=tm(0,_,1),t=tg(x.p0,x.p1,x.p2,_),u=lX(x.p0,x.p1,x.p2,_);break;case"straight":case"segments":case"haystack":for(var C,T,P,S,B=0,D=n.allpts.length,A=0;A+3<D&&(i?(C={x:n.allpts[A],y:n.allpts[A+1]},T={x:n.allpts[A+2],y:n.allpts[A+3]}):(C={x:n.allpts[D-2-A],y:n.allpts[D-1-A]},T={x:n.allpts[D-4-A],y:n.allpts[D-3-A]}),P=th(C,T),S=B,!((B+=P)>=l));A+=2);var M=(l-S)/P;t=ty(C,T,M=tm(0,M,1)),u=lF(C,T)}o("labelX",r,t.x),o("labelY",r,t.y),o("labelAutoAngle",r,u)}};l("source"),l("target"),this.applyLabelDimensions(e)}},lj.applyLabelDimensions=function(e){this.applyPrefixedLabelDimensions(e),e.isEdge()&&(this.applyPrefixedLabelDimensions(e,"source"),this.applyPrefixedLabelDimensions(e,"target"))},lj.applyPrefixedLabelDimensions=function(e,t){var r=e._private,n=this.getLabelText(e,t),i=eC(n,e._private.labelDimsKey);if(eG(r.rscratch,"prefixedLabelDimsKey",t)!==i){eH(r.rscratch,"prefixedLabelDimsKey",t,i);var a=this.calculateLabelDimensions(e,n),o=e.pstyle("line-height").pfValue,s=e.pstyle("text-wrap").strValue,l=eG(r.rscratch,"labelWrapCachedLines",t)||[],u="wrap"!==s?1:Math.max(l.length,1),c=a.height/u,d=a.width,h=a.height+(u-1)*(o-1)*c;eH(r.rstyle,"labelWidth",t,d),eH(r.rscratch,"labelWidth",t,d),eH(r.rstyle,"labelHeight",t,h),eH(r.rscratch,"labelHeight",t,h),eH(r.rscratch,"labelLineHeight",t,c*o)}},lj.getLabelText=function(e,t){var r=e._private,n=t?t+"-":"",i=e.pstyle(n+"label").strValue,a=e.pstyle("text-transform").value,o=function(e,n){return n?(eH(r.rscratch,e,t,n),n):eG(r.rscratch,e,t)};if(!i)return"";"none"==a||("uppercase"==a?i=i.toUpperCase():"lowercase"==a&&(i=i.toLowerCase()));var s=e.pstyle("text-wrap").value;if("wrap"===s){var l=o("labelKey");if(null!=l&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u=i.split("\n"),c=e.pstyle("text-max-width").pfValue,d="anywhere"===e.pstyle("text-overflow-wrap").value,h=[],p=/[\s\u200b]+|$/g,v=0;v<u.length;v++){var g=u[v],y=this.calculateLabelDimensions(e,g).width;if(d&&(g=g.split("").join("")),y>c){var b,x=g.matchAll(p),w="",E=0,k=f(x);try{for(k.s();!(b=k.n()).done;){var _=b.value,C=_[0],T=g.substring(E,_.index);E=_.index+C.length;var P=0===w.length?T:w+T+C;this.calculateLabelDimensions(e,P).width<=c?w+=T+C:(w&&h.push(w),w=T+C)}}catch(e){k.e(e)}finally{k.f()}w.match(/^[\s\u200b]+$/)||h.push(w)}else h.push(g)}o("labelWrapCachedLines",h),i=o("labelWrapCachedText",h.join("\n")),o("labelWrapKey",l)}else if("ellipsis"===s){var S=e.pstyle("text-max-width").pfValue,B="",D=!1;if(this.calculateLabelDimensions(e,i).width<S)return i;for(var A=0;A<i.length&&!(this.calculateLabelDimensions(e,B+i[A]+"").width>S);A++)B+=i[A],A===i.length-1&&(D=!0);return D||(B+=""),B}return i},lj.getLabelJustification=function(e){var t=e.pstyle("text-justification").strValue,r=e.pstyle("text-halign").strValue;if("auto"!==t)return t;if(!e.isNode())return"center";switch(r){case"left":return"right";case"right":return"left";default:return"center"}},lj.calculateLabelDimensions=function(e,t){var r=this.cy.window().document,n=e.pstyle("font-style").strValue,i=e.pstyle("font-size").pfValue,a=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=this.labelCalcCanvas,l=this.labelCalcCanvasContext;if(!s){s=this.labelCalcCanvas=r.createElement("canvas"),l=this.labelCalcCanvasContext=s.getContext("2d");var u=s.style;u.position="absolute",u.left="-9999px",u.top="-9999px",u.zIndex="-1",u.visibility="hidden",u.pointerEvents="none"}l.font="".concat(n," ").concat(o," ").concat(i,"px ").concat(a);for(var c=0,d=0,h=t.split("\n"),f=0;f<h.length;f++){var p=h[f];c=Math.max(Math.ceil(l.measureText(p).width),c),d+=i}return{width:c+=0,height:d+=0}},lj.calculateLabelAngle=function(e,t){var r=e._private.rscratch,n=e.isEdge(),i=e.pstyle((t?t+"-":"")+"text-rotation"),a=i.strValue;return"none"===a?0:n&&"autorotate"===a?r.labelAutoAngle:"autorotate"===a?0:i.pfValue},lj.calculateLabelAngles=function(e){var t=e.isEdge(),r=e._private.rscratch;r.labelAngle=this.calculateLabelAngle(e),t&&(r.sourceLabelAngle=this.calculateLabelAngle(e,"source"),r.targetLabelAngle=this.calculateLabelAngle(e,"target"))};var lq={},lY=!1;lq.getNodeShape=function(e){var t=e.pstyle("shape").value;if("cutrectangle"===t&&(28>e.width()||28>e.height()))return lY||(ez("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),lY=!0),"rectangle";if(e.isParent())if("rectangle"===t||"roundrectangle"===t||"round-rectangle"===t||"cutrectangle"===t||"cut-rectangle"===t||"barrel"===t)return t;else return"rectangle";if("polygon"===t){var r=e.pstyle("shape-polygon-points").value;return this.nodeShapes.makePolygon(r).name}return t};var lW={};lW.registerCalculationListeners=function(){var e=this.cy,t=e.collection(),r=this,n=function(e){var r=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(t.merge(e),r)for(var n=0;n<e.length;n++){var i=e[n]._private.rstyle;i.clean=!1,i.cleanConnected=!1}};r.binder(e).on("bounds.* dirty.*",function(e){n(e.target)}).on("style.* background.*",function(e){n(e.target,!1)});var i=function(i){if(i){var a=r.onUpdateEleCalcsFns;t.cleanStyle();for(var o=0;o<t.length;o++){var s=t[o],l=s._private.rstyle;s.isNode()&&!l.cleanConnected&&(n(s.connectedEdges()),l.cleanConnected=!0)}if(a)for(var u=0;u<a.length;u++)(0,a[u])(i,t);r.recalculateRenderedStyle(t),t=e.collection()}};r.flushRenderedStyleQueue=function(){i(!0)},r.beforeRender(i,r.beforeRenderPriorities.eleCalcs)},lW.onUpdateEleCalcs=function(e){(this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[]).push(e)},lW.recalculateRenderedStyle=function(e,t){var r=function(e){return e._private.rstyle.cleanConnected};if(0!==e.length){var n=[],i=[];if(!this.destroyed){void 0===t&&(t=!0);for(var a=0;a<e.length;a++){var o=e[a],s=o._private,l=s.rstyle;!o.isEdge()||r(o.source())&&r(o.target())||(l.clean=!1),o.isEdge()&&o.isBundledBezier()&&o.parallelEdges().some(function(e){return!e._private.rstyle.clean&&e.isBundledBezier()})&&(l.clean=!1),t&&l.clean||o.removed()||"none"!==o.pstyle("display").value&&("nodes"===s.group?i.push(o):n.push(o),l.clean=!0)}for(var u=0;u<i.length;u++){var c=i[u],d=c._private.rstyle,h=c.position();this.recalculateNodeLabelProjection(c),d.nodeX=h.x,d.nodeY=h.y,d.nodeW=c.pstyle("width").pfValue,d.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var f=0;f<n.length;f++){var p=n[f]._private,v=p.rstyle,g=p.rscratch;v.srcX=g.arrowStartX,v.srcY=g.arrowStartY,v.tgtX=g.arrowEndX,v.tgtY=g.arrowEndY,v.midX=g.midX,v.midY=g.midY,v.labelAngle=g.labelAngle,v.sourceLabelAngle=g.sourceLabelAngle,v.targetLabelAngle=g.targetLabelAngle}}}};var lU={};lU.updateCachedGrabbedEles=function(){var e=this.cachedZSortedEles;if(e){e.drag=[],e.nondrag=[];for(var t=[],r=0;r<e.length;r++){var n=e[r],i=n._private.rscratch;n.grabbed()&&!n.isParent()?t.push(n):i.inDragLayer?e.drag.push(n):e.nondrag.push(n)}for(var r=0;r<t.length;r++){var n=t[r];e.drag.push(n)}}},lU.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null},lU.getCachedZSortedEles=function(e){if(e||!this.cachedZSortedEles){var t=this.cy.mutableElements().toArray();t.sort(iC),t.interactive=t.filter(function(e){return e.interactive()}),this.cachedZSortedEles=t,this.updateCachedGrabbedEles()}else t=this.cachedZSortedEles;return t};var lG={};[a3,a4,lI,lO,lz,lj,lq,lW,lU].forEach(function(e){J(lG,e)});var lH={};lH.getCachedImage=function(e,t,r){var n=this.imageCache=this.imageCache||{},i=n[e];if(i)return i.image.complete||i.image.addEventListener("load",r),i.image;var a=(i=n[e]=n[e]||{}).image=new Image;a.addEventListener("load",r),a.addEventListener("error",function(){a.error=!0});var o="data:";return e.substring(0,o.length).toLowerCase()!==o&&(a.crossOrigin=t="null"===t?null:t),a.src=e,a};var lK={};lK.registerBinding=function(e,t,r,n){var i=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(e)){for(var a=[],o=0;o<e.length;o++){var s=e[o];if(void 0!==s){var l=this.binder(s);a.push(l.on.apply(l,i))}}return a}var l=this.binder(e);return l.on.apply(l,i)},lK.binder=function(e){var t=this,r=t.cy.window(),n=e===r||e===r.document||e===r.document.body||"undefined"!=typeof HTMLElement&&e instanceof HTMLElement;if(null==t.supportsPassiveEvents){var i=!1;try{var a=Object.defineProperty({},"passive",{get:function(){return i=!0,!0}});r.addEventListener("test",null,a)}catch(e){}t.supportsPassiveEvents=i}var o=function(r,i,a){var o=Array.prototype.slice.call(arguments);return n&&t.supportsPassiveEvents&&(o[2]={capture:null!=a&&a,passive:!1,once:!1}),t.bindings.push({target:e,args:o}),(e.addEventListener||e.on).apply(e,o),this};return{on:o,addEventListener:o,addListener:o,bind:o}},lK.nodeIsDraggable=function(e){return e&&e.isNode()&&!e.locked()&&e.grabbable()},lK.nodeIsGrabbable=function(e){return this.nodeIsDraggable(e)&&e.interactive()},lK.load=function(){var e,t,r,n,i,a,o,s,l,u,c,d,h,f,p,v,g,y,b,x,w,E,k,_,C,T=this,P=T.cy.window(),S=function(e){return e.selected()},B=function(e,t,r,n){null==e&&(e=T.cy);for(var i=0;i<t.length;i++){var a=t[i];e.emit({originalEvent:r,type:a,position:n})}},D=function(e){return e.shiftKey||e.metaKey||e.ctrlKey},A=function(e,t){var r=!0;if(T.cy.hasCompoundNodes()&&e&&e.pannable())for(var n=0;t&&n<t.length;n++){var e=t[n];if(e.isNode()&&e.isParent()&&!e.pannable()){r=!1;break}}else r=!0;return r},R=function(e){e[0]._private.grabbed=!0},N=function(e){e[0]._private.grabbed=!1},I=function(e){e[0]._private.rscratch.inDragLayer=!0},L=function(e){e[0]._private.rscratch.inDragLayer=!1},O=function(e){e[0]._private.rscratch.isGrabTarget=!0},z=function(e){e[0]._private.rscratch.isGrabTarget=!1},j=function(e,t){var r=t.addToList;!r.has(e)&&e.grabbable()&&!e.locked()&&(r.merge(e),R(e))},V=function(e,t){if(e.cy().hasCompoundNodes()&&(null!=t.inDragLayer||null!=t.addToList)){var r=e.descendants();t.inDragLayer&&(r.forEach(I),r.connectedEdges().forEach(I)),t.addToList&&j(r,t)}},F=function(e,t){t=t||{};var r=e.cy().hasCompoundNodes();t.inDragLayer&&(e.forEach(I),e.neighborhood().stdFilter(function(e){return!r||e.isEdge()}).forEach(I)),t.addToList&&e.forEach(function(e){j(e,t)}),V(e,t),q(e,{inDragLayer:t.inDragLayer}),T.updateCachedGrabbedEles()},X=function(e){e&&(T.getCachedZSortedEles().forEach(function(e){N(e),L(e),z(e)}),T.updateCachedGrabbedEles())},q=function(e,t){if((null!=t.inDragLayer||null!=t.addToList)&&e.cy().hasCompoundNodes()){var r=e.ancestors().orphans();if(!r.same(e)){var n=r.descendants().spawnSelf().merge(r).unmerge(e).unmerge(e.descendants()),i=n.connectedEdges();t.inDragLayer&&(i.forEach(I),n.forEach(I)),t.addToList&&n.forEach(function(e){j(e,t)})}}},Y=function(){null!=document.activeElement&&null!=document.activeElement.blur&&document.activeElement.blur()},W="undefined"!=typeof MutationObserver,U="undefined"!=typeof ResizeObserver;W?(T.removeObserver=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var r=e[t].removedNodes;if(r){for(var n=0;n<r.length;n++)if(r[n]===T.container){T.destroy();break}}}}),T.container.parentNode&&T.removeObserver.observe(T.container.parentNode,{childList:!0})):T.registerBinding(T.container,"DOMNodeRemoved",function(e){T.destroy()});var G=ep(function(){T.cy.resize()},100);W&&(T.styleObserver=new MutationObserver(G),T.styleObserver.observe(T.container,{attributes:!0})),T.registerBinding(P,"resize",G),U&&(T.resizeObserver=new ResizeObserver(G),T.resizeObserver.observe(T.container));for(var H=function(){T.invalidateContainerClientCoordsCache()},K=T.container;null!=K;){e=K,T.registerBinding(e,"transitionend",H),T.registerBinding(e,"animationend",H),T.registerBinding(e,"scroll",H),K=K.parentNode}T.registerBinding(T.container,"contextmenu",function(e){e.preventDefault()});var Z=function(e){for(var t=T.findContainerClientCoords(),r=t[0],n=t[1],i=t[2],a=t[3],o=e.touches?e.touches:[e],s=!1,l=0;l<o.length;l++){var u=o[l];if(r<=u.clientX&&u.clientX<=r+i&&n<=u.clientY&&u.clientY<=n+a){s=!0;break}}if(!s)return!1;for(var c=T.container,d=e.target.parentNode,h=!1;d;){if(d===c){h=!0;break}d=d.parentNode}return!!h};T.registerBinding(T.container,"mousedown",function(e){if(Z(e)&&(1!==T.hoverData.which||1===e.which)){e.preventDefault(),Y(),T.hoverData.capture=!0,T.hoverData.which=e.which;var t=T.cy,r=[e.clientX,e.clientY],n=T.projectIntoViewport(r[0],r[1]),i=T.selection,a=T.findNearestElements(n[0],n[1],!0,!1),o=a[0],s=T.dragData.possibleDragElements;T.hoverData.mdownPos=n,T.hoverData.mdownGPos=r;var l=function(t){return{originalEvent:e,type:t,position:{x:n[0],y:n[1]}}};if(3==e.which){T.hoverData.cxtStarted=!0;var u={originalEvent:e,type:"cxttapstart",position:{x:n[0],y:n[1]}};o?(o.activate(),o.emit(u),T.hoverData.down=o):t.emit(u),T.hoverData.downTime=new Date().getTime(),T.hoverData.cxtDragged=!1}else if(1==e.which){if(o&&o.activate(),null!=o&&T.nodeIsGrabbable(o)){if(O(o),o.selected()){s=T.dragData.possibleDragElements=t.collection();var c=t.$(function(e){return e.isNode()&&e.selected()&&T.nodeIsGrabbable(e)});F(c,{addToList:s}),o.emit(l("grabon")),c.forEach(function(e){e.emit(l("grab"))})}else F(o,{addToList:s=T.dragData.possibleDragElements=t.collection()}),o.emit(l("grabon")).emit(l("grab"));T.redrawHint("eles",!0),T.redrawHint("drag",!0)}T.hoverData.down=o,T.hoverData.downs=a,T.hoverData.downTime=new Date().getTime(),B(o,["mousedown","tapstart","vmousedown"],e,{x:n[0],y:n[1]}),null==o?(i[4]=1,T.data.bgActivePosistion={x:n[0],y:n[1]},T.redrawHint("select",!0),T.redraw()):o.pannable()&&(i[4]=1),T.hoverData.tapholdCancelled=!1,clearTimeout(T.hoverData.tapholdTimeout),T.hoverData.tapholdTimeout=setTimeout(function(){if(!T.hoverData.tapholdCancelled){var e=T.hoverData.down;e?e.emit(l("taphold")):t.emit(l("taphold"))}},T.tapholdDuration)}i[0]=i[2]=n[0],i[1]=i[3]=n[1]}},!1);var $=function(e){var t=e.getRootNode();if(t&&11===t.nodeType&&void 0!==t.host)return t}(T.container);T.registerBinding([P,$],"mousemove",function(e){var t,r;if(T.hoverData.capture||Z(e)){var n=!1,i=T.cy,a=i.zoom(),o=[e.clientX,e.clientY],s=T.projectIntoViewport(o[0],o[1]),l=T.hoverData.mdownPos,u=T.hoverData.mdownGPos,c=T.selection,d=null;T.hoverData.draggingEles||T.hoverData.dragging||T.hoverData.selecting||(d=T.findNearestElement(s[0],s[1],!0,!1));var h=T.hoverData.last,f=T.hoverData.down,p=[s[0]-c[2],s[1]-c[3]],v=T.dragData.possibleDragElements;if(u){var g=o[0]-u[0],y=o[1]-u[1];T.hoverData.isOverThresholdDrag=t=g*g+y*y>=T.desktopTapThreshold2}var b=D(e);t&&(T.hoverData.tapholdCancelled=!0),n=!0,B(d,["mousemove","vmousemove","tapdrag"],e,{x:s[0],y:s[1]});var x=function(t){return{originalEvent:e,type:t,position:{x:s[0],y:s[1]}}},w=function(){T.data.bgActivePosistion=void 0,T.hoverData.selecting||i.emit(x("boxstart")),c[4]=1,T.hoverData.selecting=!0,T.redrawHint("select",!0),T.redraw()};if(3===T.hoverData.which){if(t){var E=x("cxtdrag");f?f.emit(E):i.emit(E),T.hoverData.cxtDragged=!0,(!T.hoverData.cxtOver||d!==T.hoverData.cxtOver)&&(T.hoverData.cxtOver&&T.hoverData.cxtOver.emit(x("cxtdragout")),T.hoverData.cxtOver=d,d&&d.emit(x("cxtdragover")))}}else if(T.hoverData.dragging){if(n=!0,i.panningEnabled()&&i.userPanningEnabled()){if(T.hoverData.justStartedPan){var k=T.hoverData.mdownPos;r={x:(s[0]-k[0])*a,y:(s[1]-k[1])*a},T.hoverData.justStartedPan=!1}else r={x:p[0]*a,y:p[1]*a};i.panBy(r),i.emit(x("dragpan")),T.hoverData.dragged=!0}s=T.projectIntoViewport(e.clientX,e.clientY)}else if(1==c[4]&&(null==f||f.pannable()))t&&(!T.hoverData.dragging&&i.boxSelectionEnabled()&&(b||!i.panningEnabled()||!i.userPanningEnabled())?w():!T.hoverData.selecting&&i.panningEnabled()&&i.userPanningEnabled()&&A(f,T.hoverData.downs)&&(T.hoverData.dragging=!0,T.hoverData.justStartedPan=!0,c[4]=0,T.data.bgActivePosistion=ti(l),T.redrawHint("select",!0),T.redraw()),f&&f.pannable()&&f.active()&&f.unactivate());else{if(f&&f.pannable()&&f.active()&&f.unactivate(),f&&f.grabbed()||d==h||(h&&B(h,["mouseout","tapdragout"],e,{x:s[0],y:s[1]}),d&&B(d,["mouseover","tapdragover"],e,{x:s[0],y:s[1]}),T.hoverData.last=d),f)if(t){if(i.boxSelectionEnabled()&&b)f&&f.grabbed()&&(X(v),f.emit(x("freeon")),v.emit(x("free")),T.dragData.didDrag&&(f.emit(x("dragfreeon")),v.emit(x("dragfree")))),w();else if(f&&f.grabbed()&&T.nodeIsDraggable(f)){var _,C=!T.dragData.didDrag;C&&T.redrawHint("eles",!0),T.dragData.didDrag=!0,T.hoverData.draggingEles||F(v,{inDragLayer:!0});var P={x:0,y:0};if(M(p[0])&&M(p[1])&&(P.x+=p[0],P.y+=p[1],C)){var S=T.hoverData.dragDelta;S&&M(S[0])&&M(S[1])&&(P.x+=S[0],P.y+=S[1])}T.hoverData.draggingEles=!0,v.silentShift(P).emit(x("position")).emit(x("drag")),T.redrawHint("drag",!0),T.redraw()}}else 0===(_=T.hoverData.dragDelta=T.hoverData.dragDelta||[]).length?(_.push(p[0]),_.push(p[1])):(_[0]+=p[0],_[1]+=p[1]);n=!0}if(c[2]=s[0],c[3]=s[1],n)return e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),!1}},!1),T.registerBinding(P,"mouseup",function(e){if((1!==T.hoverData.which||1===e.which||!T.hoverData.capture)&&T.hoverData.capture){T.hoverData.capture=!1;var i=T.cy,a=T.projectIntoViewport(e.clientX,e.clientY),o=T.selection,s=T.findNearestElement(a[0],a[1],!0,!1),l=T.dragData.possibleDragElements,u=T.hoverData.down,c=D(e);T.data.bgActivePosistion&&(T.redrawHint("select",!0),T.redraw()),T.hoverData.tapholdCancelled=!0,T.data.bgActivePosistion=void 0,u&&u.unactivate();var d=function(t){return{originalEvent:e,type:t,position:{x:a[0],y:a[1]}}};if(3===T.hoverData.which){var h=d("cxttapend");if(u?u.emit(h):i.emit(h),!T.hoverData.cxtDragged){var f=d("cxttap");u?u.emit(f):i.emit(f)}T.hoverData.cxtDragged=!1,T.hoverData.which=null}else if(1===T.hoverData.which){if(B(s,["mouseup","tapend","vmouseup"],e,{x:a[0],y:a[1]}),T.dragData.didDrag||T.hoverData.dragged||T.hoverData.selecting||T.hoverData.isOverThresholdDrag||(B(u,["click","tap","vclick"],e,{x:a[0],y:a[1]}),r=!1,e.timeStamp-n<=i.multiClickDebounceTime()?(t&&clearTimeout(t),r=!0,n=null,B(u,["dblclick","dbltap","vdblclick"],e,{x:a[0],y:a[1]})):(t=setTimeout(function(){r||B(u,["oneclick","onetap","voneclick"],e,{x:a[0],y:a[1]})},i.multiClickDebounceTime()),n=e.timeStamp)),null!=u||T.dragData.didDrag||T.hoverData.selecting||T.hoverData.dragged||D(e)||(i.$(S).unselect(["tapunselect"]),l.length>0&&T.redrawHint("eles",!0),T.dragData.possibleDragElements=l=i.collection()),s!=u||T.dragData.didDrag||T.hoverData.selecting||null==s||!s._private.selectable||(T.hoverData.dragging||("additive"===i.selectionType()||c?s.selected()?s.unselect(["tapunselect"]):s.select(["tapselect"]):c||(i.$(S).unmerge(s).unselect(["tapunselect"]),s.select(["tapselect"]))),T.redrawHint("eles",!0)),T.hoverData.selecting){var p=i.collection(T.getAllInBox(o[0],o[1],o[2],o[3]));T.redrawHint("select",!0),p.length>0&&T.redrawHint("eles",!0),i.emit(d("boxend"));"additive"===i.selectionType()||c||i.$(S).unmerge(p).unselect(),p.emit(d("box")).stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit(d("boxselect")),T.redraw()}if(T.hoverData.dragging&&(T.hoverData.dragging=!1,T.redrawHint("select",!0),T.redrawHint("eles",!0),T.redraw()),!o[4]){T.redrawHint("drag",!0),T.redrawHint("eles",!0);var v=u&&u.grabbed();X(l),v&&(u.emit(d("freeon")),l.emit(d("free")),T.dragData.didDrag&&(u.emit(d("dragfreeon")),l.emit(d("dragfree"))))}}o[4]=0,T.hoverData.down=null,T.hoverData.cxtStarted=!1,T.hoverData.draggingEles=!1,T.hoverData.selecting=!1,T.hoverData.isOverThresholdDrag=!1,T.dragData.didDrag=!1,T.hoverData.dragged=!1,T.hoverData.dragDelta=[],T.hoverData.mdownPos=null,T.hoverData.mdownGPos=null,T.hoverData.which=null}},!1);var Q=[],J=1e5,ee=function(e,t){for(var r=0;r<e.length;r++)if(e[r]%t!=0)return!1;return!0},et=function(e){for(var t=Math.abs(e[0]),r=1;r<e.length;r++)if(Math.abs(e[r])!==t)return!1;return!0},er=function(e){var t=!1,r=e.deltaY;if(null==r&&(null!=e.wheelDeltaY?r=e.wheelDeltaY/4:null!=e.wheelDelta&&(r=e.wheelDelta/4)),0!==r){if(null==i)if(Q.length>=4){if(!(i=ee(Q,5))){var n=Math.abs(Q[0]);i=et(Q)&&n>5}if(i)for(var a=0;a<Q.length;a++)J=Math.min(Math.abs(Q[a]),J)}else Q.push(r),t=!0;else i&&(J=Math.min(Math.abs(r),J));if(!T.scrollingPage){var o=T.cy,s=o.zoom(),l=o.pan(),u=T.projectIntoViewport(e.clientX,e.clientY),c=[u[0]*s+l.x,u[1]*s+l.y];if(T.hoverData.draggingEles||T.hoverData.dragging||T.hoverData.cxtStarted||0!==T.selection[4])return void e.preventDefault();if(o.panningEnabled()&&o.userPanningEnabled()&&o.zoomingEnabled()&&o.userZoomingEnabled()){e.preventDefault(),T.data.wheelZooming=!0,clearTimeout(T.data.wheelTimeout),T.data.wheelTimeout=setTimeout(function(){T.data.wheelZooming=!1,T.redrawHint("eles",!0),T.redraw()},150),t&&Math.abs(r)>5&&(r=5*td(r)),d=-(r/250),i&&(d/=J,d*=3),d*=T.wheelSensitivity,1===e.deltaMode&&(d*=33);var d,h=o.zoom()*Math.pow(10,d);"gesturechange"===e.type&&(h=T.gestureStartZoom*e.scale),o.zoom({level:h,renderedPosition:{x:c[0],y:c[1]}}),o.emit({type:"gesturechange"===e.type?"pinchzoom":"scrollzoom",originalEvent:e,position:{x:u[0],y:u[1]}})}}}};T.registerBinding(T.container,"wheel",er,!0),T.registerBinding(P,"scroll",function(e){T.scrollingPage=!0,clearTimeout(T.scrollingPageTimeout),T.scrollingPageTimeout=setTimeout(function(){T.scrollingPage=!1},250)},!0),T.registerBinding(T.container,"gesturestart",function(e){T.gestureStartZoom=T.cy.zoom(),T.hasTouchStarted||e.preventDefault()},!0),T.registerBinding(T.container,"gesturechange",function(e){T.hasTouchStarted||er(e)},!0),T.registerBinding(T.container,"mouseout",function(e){var t=T.projectIntoViewport(e.clientX,e.clientY);T.cy.emit({originalEvent:e,type:"mouseout",position:{x:t[0],y:t[1]}})},!1),T.registerBinding(T.container,"mouseover",function(e){var t=T.projectIntoViewport(e.clientX,e.clientY);T.cy.emit({originalEvent:e,type:"mouseover",position:{x:t[0],y:t[1]}})},!1);var en=function(e,t,r,n){return Math.sqrt((r-e)*(r-e)+(n-t)*(n-t))},ei=function(e,t,r,n){return(r-e)*(r-e)+(n-t)*(n-t)};if(T.registerBinding(T.container,"touchstart",b=function(e){if(T.hasTouchStarted=!0,Z(e)){Y(),T.touchData.capture=!0,T.data.bgActivePosistion=void 0;var t=T.cy,r=T.touchData.now,n=T.touchData.earlier;if(e.touches[0]){var i=T.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);r[0]=i[0],r[1]=i[1]}if(e.touches[1]){var i=T.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);r[2]=i[0],r[3]=i[1]}if(e.touches[2]){var i=T.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);r[4]=i[0],r[5]=i[1]}var b=function(t){return{originalEvent:e,type:t,position:{x:r[0],y:r[1]}}};if(e.touches[1]){T.touchData.singleTouchMoved=!0,X(T.dragData.touchDragEles);var x=T.findContainerClientCoords();f=x[0],p=x[1],v=x[2],g=x[3],a=e.touches[0].clientX-f,o=e.touches[0].clientY-p,s=e.touches[1].clientX-f,l=e.touches[1].clientY-p,y=0<=a&&a<=v&&0<=s&&s<=v&&0<=o&&o<=g&&0<=l&&l<=g;var w=t.pan(),E=t.zoom();if(u=en(a,o,s,l),c=ei(a,o,s,l),h=[((d=[(a+s)/2,(o+l)/2])[0]-w.x)/E,(d[1]-w.y)/E],c<4e4&&!e.touches[2]){var k=T.findNearestElement(r[0],r[1],!0,!0),_=T.findNearestElement(r[2],r[3],!0,!0);k&&k.isNode()?(k.activate().emit(b("cxttapstart")),T.touchData.start=k):_&&_.isNode()?(_.activate().emit(b("cxttapstart")),T.touchData.start=_):t.emit(b("cxttapstart")),T.touchData.start&&(T.touchData.start._private.grabbed=!1),T.touchData.cxt=!0,T.touchData.cxtDragged=!1,T.data.bgActivePosistion=void 0,T.redraw();return}}if(e.touches[2])t.boxSelectionEnabled()&&e.preventDefault();else if(e.touches[1]);else if(e.touches[0]){var C=T.findNearestElements(r[0],r[1],!0,!0),P=C[0];if(null!=P&&(P.activate(),T.touchData.start=P,T.touchData.starts=C,T.nodeIsGrabbable(P))){var S=T.dragData.touchDragEles=t.collection(),D=null;T.redrawHint("eles",!0),T.redrawHint("drag",!0),P.selected()?F(D=t.$(function(e){return e.selected()&&T.nodeIsGrabbable(e)}),{addToList:S}):F(P,{addToList:S}),O(P),P.emit(b("grabon")),D?D.forEach(function(e){e.emit(b("grab"))}):P.emit(b("grab"))}B(P,["touchstart","tapstart","vmousedown"],e,{x:r[0],y:r[1]}),null==P&&(T.data.bgActivePosistion={x:i[0],y:i[1]},T.redrawHint("select",!0),T.redraw()),T.touchData.singleTouchMoved=!1,T.touchData.singleTouchStartTime=+new Date,clearTimeout(T.touchData.tapholdTimeout),T.touchData.tapholdTimeout=setTimeout(function(){!1!==T.touchData.singleTouchMoved||T.pinching||T.touchData.selecting||B(T.touchData.start,["taphold"],e,{x:r[0],y:r[1]})},T.tapholdDuration)}if(e.touches.length>=1){for(var A=T.touchData.startPosition=[null,null,null,null,null,null],M=0;M<r.length;M++)A[M]=n[M]=r[M];var R=e.touches[0];T.touchData.startGPosition=[R.clientX,R.clientY]}}},!1),T.registerBinding(P,"touchmove",x=function(e){var t=T.touchData.capture;if(t||Z(e)){var r=T.selection,n=T.cy,i=T.touchData.now,d=T.touchData.earlier,v=n.zoom();if(e.touches[0]){var g=T.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=g[0],i[1]=g[1]}if(e.touches[1]){var g=T.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=g[0],i[3]=g[1]}if(e.touches[2]){var g=T.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=g[0],i[5]=g[1]}var b=function(t){return{originalEvent:e,type:t,position:{x:i[0],y:i[1]}}},x=T.touchData.startGPosition;if(t&&e.touches[0]&&x){for(var w=[],E=0;E<i.length;E++)w[E]=i[E]-d[E];var k=e.touches[0].clientX-x[0],_=k*k,C=e.touches[0].clientY-x[1];er=_+C*C>=T.touchTapThreshold2}if(t&&T.touchData.cxt){e.preventDefault();var P=e.touches[0].clientX-f,S=e.touches[0].clientY-p,D=e.touches[1].clientX-f,R=e.touches[1].clientY-p,N=ei(P,S,D,R);if(N/c>=2.25||N>=22500){T.touchData.cxt=!1,T.data.bgActivePosistion=void 0,T.redrawHint("select",!0);var I=b("cxttapend");T.touchData.start?(T.touchData.start.unactivate().emit(I),T.touchData.start=null):n.emit(I)}}if(t&&T.touchData.cxt){var I=b("cxtdrag");T.data.bgActivePosistion=void 0,T.redrawHint("select",!0),T.touchData.start?T.touchData.start.emit(I):n.emit(I),T.touchData.start&&(T.touchData.start._private.grabbed=!1),T.touchData.cxtDragged=!0;var L=T.findNearestElement(i[0],i[1],!0,!0);(!T.touchData.cxtOver||L!==T.touchData.cxtOver)&&(T.touchData.cxtOver&&T.touchData.cxtOver.emit(b("cxtdragout")),T.touchData.cxtOver=L,L&&L.emit(b("cxtdragover")))}else if(t&&e.touches[2]&&n.boxSelectionEnabled())e.preventDefault(),T.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,T.touchData.selecting||n.emit(b("boxstart")),T.touchData.selecting=!0,T.touchData.didSelect=!0,r[4]=1,r&&0!==r.length&&void 0!==r[0]?(r[2]=(i[0]+i[2]+i[4])/3,r[3]=(i[1]+i[3]+i[5])/3):(r[0]=(i[0]+i[2]+i[4])/3,r[1]=(i[1]+i[3]+i[5])/3,r[2]=(i[0]+i[2]+i[4])/3+1,r[3]=(i[1]+i[3]+i[5])/3+1),T.redrawHint("select",!0),T.redraw();else if(t&&e.touches[1]&&!T.touchData.didSelect&&n.zoomingEnabled()&&n.panningEnabled()&&n.userZoomingEnabled()&&n.userPanningEnabled()){e.preventDefault(),T.data.bgActivePosistion=void 0,T.redrawHint("select",!0);var O=T.dragData.touchDragEles;if(O){T.redrawHint("drag",!0);for(var z=0;z<O.length;z++){var j=O[z]._private;j.grabbed=!1,j.rscratch.inDragLayer=!1}}var V=T.touchData.start,P=e.touches[0].clientX-f,S=e.touches[0].clientY-p,D=e.touches[1].clientX-f,R=e.touches[1].clientY-p,q=en(P,S,D,R),Y=q/u;if(y){var W=P-a,U=S-o,G=D-s,H=R-l,K=n.zoom(),$=K*Y,Q=n.pan(),J=h[0]*K+Q.x,ee=h[1]*K+Q.y,et={x:-$/K*(J-Q.x-(W+G)/2)+J,y:-$/K*(ee-Q.y-(U+H)/2)+ee};if(V&&V.active()){var O=T.dragData.touchDragEles;X(O),T.redrawHint("drag",!0),T.redrawHint("eles",!0),V.unactivate().emit(b("freeon")),O.emit(b("free")),T.dragData.didDrag&&(V.emit(b("dragfreeon")),O.emit(b("dragfree")))}n.viewport({zoom:$,pan:et,cancelOnFailedZoom:!0}),n.emit(b("pinchzoom")),u=q,a=P,o=S,s=D,l=R,T.pinching=!0}if(e.touches[0]){var g=T.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=g[0],i[1]=g[1]}if(e.touches[1]){var g=T.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);i[2]=g[0],i[3]=g[1]}if(e.touches[2]){var g=T.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);i[4]=g[0],i[5]=g[1]}}else if(e.touches[0]&&!T.touchData.didSelect){var er,L,ea=T.touchData.start,eo=T.touchData.last;if(T.hoverData.draggingEles||T.swipePanning||(L=T.findNearestElement(i[0],i[1],!0,!0)),t&&null!=ea&&e.preventDefault(),t&&null!=ea&&T.nodeIsDraggable(ea))if(er){var O=T.dragData.touchDragEles,es=!T.dragData.didDrag;es&&F(O,{inDragLayer:!0}),T.dragData.didDrag=!0;var el={x:0,y:0};if(M(w[0])&&M(w[1])&&(el.x+=w[0],el.y+=w[1],es)){T.redrawHint("eles",!0);var eu=T.touchData.dragDelta;eu&&M(eu[0])&&M(eu[1])&&(el.x+=eu[0],el.y+=eu[1])}T.hoverData.draggingEles=!0,O.silentShift(el).emit(b("position")).emit(b("drag")),T.redrawHint("drag",!0),T.touchData.startPosition[0]==d[0]&&T.touchData.startPosition[1]==d[1]&&T.redrawHint("eles",!0),T.redraw()}else{var eu=T.touchData.dragDelta=T.touchData.dragDelta||[];0===eu.length?(eu.push(w[0]),eu.push(w[1])):(eu[0]+=w[0],eu[1]+=w[1])}if(B(ea||L,["touchmove","tapdrag","vmousemove"],e,{x:i[0],y:i[1]}),ea&&ea.grabbed()||L==eo||(eo&&eo.emit(b("tapdragout")),L&&L.emit(b("tapdragover"))),T.touchData.last=L,t)for(var z=0;z<i.length;z++)i[z]&&T.touchData.startPosition[z]&&er&&(T.touchData.singleTouchMoved=!0);if(t&&(null==ea||ea.pannable())&&n.panningEnabled()&&n.userPanningEnabled()){A(ea,T.touchData.starts)&&(e.preventDefault(),T.data.bgActivePosistion||(T.data.bgActivePosistion=ti(T.touchData.startPosition)),T.swipePanning?(n.panBy({x:w[0]*v,y:w[1]*v}),n.emit(b("dragpan"))):er&&(T.swipePanning=!0,n.panBy({x:k*v,y:C*v}),n.emit(b("dragpan")),ea&&(ea.unactivate(),T.redrawHint("select",!0),T.touchData.start=null)));var g=T.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);i[0]=g[0],i[1]=g[1]}}for(var E=0;E<i.length;E++)d[E]=i[E];t&&e.touches.length>0&&!T.hoverData.draggingEles&&!T.swipePanning&&null!=T.data.bgActivePosistion&&(T.data.bgActivePosistion=void 0,T.redrawHint("select",!0),T.redraw())}},!1),T.registerBinding(P,"touchcancel",w=function(e){var t=T.touchData.start;T.touchData.capture=!1,t&&t.unactivate()}),T.registerBinding(P,"touchend",E=function(e){var t,r=T.touchData.start;if(T.touchData.capture){0===e.touches.length&&(T.touchData.capture=!1),e.preventDefault();var n=T.selection;T.swipePanning=!1,T.hoverData.draggingEles=!1;var i=T.cy,a=i.zoom(),o=T.touchData.now,s=T.touchData.earlier;if(e.touches[0]){var l=T.projectIntoViewport(e.touches[0].clientX,e.touches[0].clientY);o[0]=l[0],o[1]=l[1]}if(e.touches[1]){var l=T.projectIntoViewport(e.touches[1].clientX,e.touches[1].clientY);o[2]=l[0],o[3]=l[1]}if(e.touches[2]){var l=T.projectIntoViewport(e.touches[2].clientX,e.touches[2].clientY);o[4]=l[0],o[5]=l[1]}var u=function(t){return{originalEvent:e,type:t,position:{x:o[0],y:o[1]}}};if(r&&r.unactivate(),T.touchData.cxt){if(t=u("cxttapend"),r?r.emit(t):i.emit(t),!T.touchData.cxtDragged){var c=u("cxttap");r?r.emit(c):i.emit(c)}T.touchData.start&&(T.touchData.start._private.grabbed=!1),T.touchData.cxt=!1,T.touchData.start=null,T.redraw();return}if(!e.touches[2]&&i.boxSelectionEnabled()&&T.touchData.selecting){T.touchData.selecting=!1;var d=i.collection(T.getAllInBox(n[0],n[1],n[2],n[3]));n[0]=void 0,n[1]=void 0,n[2]=void 0,n[3]=void 0,n[4]=0,T.redrawHint("select",!0),i.emit(u("boxend")),d.emit(u("box")).stdFilter(function(e){return e.selectable()&&!e.selected()}).select().emit(u("boxselect")),d.nonempty()&&T.redrawHint("eles",!0),T.redraw()}if(null!=r&&r.unactivate(),e.touches[2])T.data.bgActivePosistion=void 0,T.redrawHint("select",!0);else if(e.touches[1]);else if(e.touches[0]);else if(!e.touches[0]){T.data.bgActivePosistion=void 0,T.redrawHint("select",!0);var h=T.dragData.touchDragEles;if(null!=r){var f=r._private.grabbed;X(h),T.redrawHint("drag",!0),T.redrawHint("eles",!0),f&&(r.emit(u("freeon")),h.emit(u("free")),T.dragData.didDrag&&(r.emit(u("dragfreeon")),h.emit(u("dragfree")))),B(r,["touchend","tapend","vmouseup","tapdragout"],e,{x:o[0],y:o[1]}),r.unactivate(),T.touchData.start=null}else B(T.findNearestElement(o[0],o[1],!0,!0),["touchend","tapend","vmouseup","tapdragout"],e,{x:o[0],y:o[1]});var p=T.touchData.startPosition[0]-o[0],v=T.touchData.startPosition[1]-o[1];T.touchData.singleTouchMoved||(r||i.$(":selected").unselect(["tapunselect"]),B(r,["tap","vclick"],e,{x:o[0],y:o[1]}),k=!1,e.timeStamp-C<=i.multiClickDebounceTime()?(_&&clearTimeout(_),k=!0,C=null,B(r,["dbltap","vdblclick"],e,{x:o[0],y:o[1]})):(_=setTimeout(function(){k||B(r,["onetap","voneclick"],e,{x:o[0],y:o[1]})},i.multiClickDebounceTime()),C=e.timeStamp)),null!=r&&!T.dragData.didDrag&&r._private.selectable&&(p*p+v*v)*a*a<T.touchTapThreshold2&&!T.pinching&&("single"===i.selectionType()?(i.$(S).unmerge(r).unselect(["tapunselect"]),r.select(["tapselect"])):r.selected()?r.unselect(["tapunselect"]):r.select(["tapselect"]),T.redrawHint("eles",!0)),T.touchData.singleTouchMoved=!0}for(var g=0;g<o.length;g++)s[g]=o[g];T.dragData.didDrag=!1,0===e.touches.length&&(T.touchData.dragDelta=[],T.touchData.startPosition=[null,null,null,null,null,null],T.touchData.startGPosition=null,T.touchData.didSelect=!1),e.touches.length<2&&(1===e.touches.length&&(T.touchData.startGPosition=[e.touches[0].clientX,e.touches[0].clientY]),T.pinching=!1,T.redrawHint("eles",!0),T.redraw())}},!1),"undefined"==typeof TouchEvent){var ea=[],eo=function(e){return{clientX:e.clientX,clientY:e.clientY,force:1,identifier:e.pointerId,pageX:e.pageX,pageY:e.pageY,radiusX:e.width/2,radiusY:e.height/2,screenX:e.screenX,screenY:e.screenY,target:e.target}},es=function(e){ea.push({event:e,touch:eo(e)})},el=function(e){for(var t=0;t<ea.length;t++)if(ea[t].event.pointerId===e.pointerId)return void ea.splice(t,1)},eu=function(e){var t=ea.filter(function(t){return t.event.pointerId===e.pointerId})[0];t.event=e,t.touch=eo(e)},ec=function(e){e.touches=ea.map(function(e){return e.touch})},ed=function(e){return"mouse"===e.pointerType||4===e.pointerType};T.registerBinding(T.container,"pointerdown",function(e){ed(e)||(e.preventDefault(),es(e),ec(e),b(e))}),T.registerBinding(T.container,"pointerup",function(e){ed(e)||(el(e),ec(e),E(e))}),T.registerBinding(T.container,"pointercancel",function(e){ed(e)||(el(e),ec(e),w(e))}),T.registerBinding(T.container,"pointermove",function(e){ed(e)||(e.preventDefault(),eu(e),ec(e),x(e))})}};var lZ={};lZ.generatePolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,draw:function(e,t,r,n,i,a){this.renderer.nodeShapeImpl("polygon",e,t,r,n,i,this.points)},intersectLine:function(e,t,r,n,i,a,o,s){return tK(i,a,this.points,e,t,r/2,n/2,o)},checkPoint:function(e,t,r,n,i,a,o,s){return tj(e,t,this.points,a,o,n,i,[0,-1],r)},hasMiterBounds:"rectangle"!==e,miterBounds:function(e,t,r,n,i,a){var o,s,l;return o=this.points,s=function(e,t){if(e.length<3)throw Error("Need at least 3 vertices");var r=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},n=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},i=function(e,t){return{x:e.x*t,y:e.y*t}},a=function(e,t){return e.x*t.y-e.y*t.x},o=e.map(function(e){return{x:e.x,y:e.y}});0>function(e){for(var t=0,r=0;r<e.length;r++){var n=e[r],i=e[(r+1)%e.length];t+=n.x*i.y-i.x*n.y}return t/2}(o)&&o.reverse();for(var s=o.length,l=[],u=0;u<s;u++){var c=o[u],d=n(o[(u+1)%s],c),h=function(e){var t=tD(e.x,e.y);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}}({x:d.y,y:-d.x});l.push(h)}for(var f=l.map(function(e,n){return{p1:r(o[n],i(e,t)),p2:r(o[(n+1)%s],i(e,t))}}),p=[],v=0;v<s;v++){var g=f[(v-1+s)%s],y=f[v],b=function(e,t,o,s){var l=n(t,e),u=n(s,o),c=a(l,u);if(1e-9>Math.abs(c))return r(e,i(l,.5));var d=a(n(o,e),u)/c;return r(e,i(l,d))}(g.p1,g.p2,y.p1,y.p2);p.push(b)}return p}(tH(o,e,t,r,n),i),l=tb(),s.forEach(function(e){return tE(l,e.x,e.y)}),l}}},lZ.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},intersectLine:function(e,t,r,n,i,a,o,s){return tq(i,a,e,t,r/2+o,n/2+o)},checkPoint:function(e,t,r,n,i,a,o,s){return tY(e,t,n,i,a,o,r)}}},lZ.generateRoundPolygon=function(e,t){return this.nodeShapes[e]={renderer:this,name:e,points:t,getOrCreateCorners:function(e,r,n,i,a,o,s){if(void 0!==o[s]&&o[s+"-cx"]===e&&o[s+"-cy"]===r)return o[s];o[s]=Array(t.length/2),o[s+"-cx"]=e,o[s+"-cy"]=r;var l=n/2,u=i/2;a="auto"===a?t2(n,i):a;for(var c=Array(t.length/2),d=0;d<t.length/2;d++)c[d]={x:e+l*t[2*d],y:r+u*t[2*d+1]};var h,f,p,v,g=c.length;for(h=0,f=c[g-1];h<g;h++)p=c[h%g],v=c[(h+1)%g],o[s][h]=lR(f,p,v,a),f=p,p=v;return o[s]},draw:function(e,t,r,n,i,a,o){this.renderer.nodeShapeImpl("round-polygon",e,t,r,n,i,this.points,this.getOrCreateCorners(t,r,n,i,a,o,"drawCorners"))},intersectLine:function(e,t,r,n,i,a,o,s,l){return tZ(i,a,this.points,e,t,r,n,o,this.getOrCreateCorners(e,t,r,n,s,l,"corners"))},checkPoint:function(e,t,r,n,i,a,o,s,l){return tV(e,t,this.points,a,o,n,i,this.getOrCreateCorners(a,o,n,i,s,l,"corners"))}}},lZ.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:tQ(4,0),draw:function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,this.points,a)},intersectLine:function(e,t,r,n,i,a,o,s){return tA(i,a,e,t,r,n,o,s)},checkPoint:function(e,t,r,n,i,a,o,s){var l=n/2,u=i/2,c=2*(s=Math.min(l,u,s="auto"===s?t1(n,i):s));return!!(tj(e,t,this.points,a,o,n,i-c,[0,-1],r)||tj(e,t,this.points,a,o,n-c,i,[0,-1],r)||tY(e,t,c,c,a-l+s,o-u+s,r)||tY(e,t,c,c,a+l-s,o-u+s,r)||tY(e,t,c,c,a+l-s,o+u-s,r)||tY(e,t,c,c,a-l+s,o+u-s,r))}}},lZ.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:t5(),points:tQ(4,0),draw:function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,null,a)},generateCutTrianglePts:function(e,t,r,n,i){var a="auto"===i?this.cornerLength:i,o=t/2,s=e/2,l=r-s,u=r+s,c=n-o,d=n+o;return{topLeft:[l,c+a,l+a,c,l+a,c+a],topRight:[u-a,c,u,c+a,u-a,c+a],bottomRight:[u,d-a,u-a,d,u-a,d-a],bottomLeft:[l+a,d,l,d-a,l+a,d-a]}},intersectLine:function(e,t,r,n,i,a,o,s){var l=this.generateCutTrianglePts(r+2*o,n+2*o,e,t,s);return tK(i,a,[].concat.apply([],[l.topLeft.splice(0,4),l.topRight.splice(0,4),l.bottomRight.splice(0,4),l.bottomLeft.splice(0,4)]),e,t)},checkPoint:function(e,t,r,n,i,a,o,s){var l="auto"===s?this.cornerLength:s;if(tj(e,t,this.points,a,o,n,i-2*l,[0,-1],r)||tj(e,t,this.points,a,o,n-2*l,i,[0,-1],r))return!0;var u=this.generateCutTrianglePts(n,i,a,o);return tz(e,t,u.topLeft)||tz(e,t,u.topRight)||tz(e,t,u.bottomRight)||tz(e,t,u.bottomLeft)}}},lZ.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:tQ(4,0),draw:function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i)},intersectLine:function(e,t,r,n,i,a,o,s){var l=this.generateBarrelBezierPts(r+2*o,n+2*o,e,t),u=function(e){var t=tg({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.15),r=tg({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.5),n=tg({x:e[0],y:e[1]},{x:e[2],y:e[3]},{x:e[4],y:e[5]},.85);return[e[0],e[1],t.x,t.y,r.x,r.y,n.x,n.y,e[4],e[5]]};return tK(i,a,[].concat(u(l.topLeft),u(l.topRight),u(l.bottomRight),u(l.bottomLeft)),e,t)},generateBarrelBezierPts:function(e,t,r,n){var i=t/2,a=e/2,o=r-a,s=r+a,l=n-i,u=n+i,c=t3(e,t),d=c.heightOffset,h=c.widthOffset,f=c.ctrlPtOffsetPct*e,p={topLeft:[o,l+d,o+f,l,o+h,l],topRight:[s-h,l,s-f,l,s,l+d],bottomRight:[s,u-d,s-f,u,s-h,u],bottomLeft:[o+h,u,o+f,u,o,u-d]};return p.topLeft.isTop=!0,p.topRight.isTop=!0,p.bottomLeft.isBottom=!0,p.bottomRight.isBottom=!0,p},checkPoint:function(e,t,r,n,i,a,o,s){var l=t3(n,i),u=l.heightOffset,c=l.widthOffset;if(tj(e,t,this.points,a,o,n,i-2*u,[0,-1],r)||tj(e,t,this.points,a,o,n-2*c,i,[0,-1],r))return!0;for(var d=this.generateBarrelBezierPts(n,i,a,o),h=Object.keys(d),f=0;f<h.length;f++){var p=d[h[f]],v=function(e,t,r){var n=r[4],i=r[2],a=r[0],o=r[5],s=r[1],l=Math.min(n,a),u=Math.max(n,a),c=Math.min(o,s),d=Math.max(o,s);if(l<=e&&e<=u&&c<=t&&t<=d){var h=[n-2*i+a,2*(i-n),n],f=tN(h[0],h[1],h[2],e).filter(function(e){return 0<=e&&e<=1});if(f.length>0)return f[0]}return null}(e,t,p);if(null!=v){var g=tv(p[5],p[3],p[1],v);if(p.isTop&&g<=t||p.isBottom&&t<=g)return!0}}return!1}}},lZ.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:tQ(4,0),draw:function(e,t,r,n,i,a){this.renderer.nodeShapeImpl(this.name,e,t,r,n,i,this.points,a)},intersectLine:function(e,t,r,n,i,a,o,s){var l=e-(r/2+o),u=t-(n/2+o),c=e+(r/2+o),d=tG(i,a,e,t,l,u,c,u,!1);return d.length>0?d:tA(i,a,e,t,r,n,o,s)},checkPoint:function(e,t,r,n,i,a,o,s){var l=2*(s="auto"===s?t1(n,i):s);if(tj(e,t,this.points,a,o,n,i-l,[0,-1],r)||tj(e,t,this.points,a,o,n-l,i,[0,-1],r))return!0;var u=n/2+2*r,c=i/2+2*r;return!!(tz(e,t,[a-u,o-c,a-u,o,a+u,o,a+u,o-c])||tY(e,t,l,l,a+n/2-s,o+i/2-s,r)||tY(e,t,l,l,a-n/2+s,o+i/2-s,r))}}},lZ.registerNodeShapes=function(){var e=this.nodeShapes={},t=this;this.generateEllipse(),this.generatePolygon("triangle",tQ(3,0)),this.generateRoundPolygon("round-triangle",tQ(3,0)),this.generatePolygon("rectangle",tQ(4,0)),e.square=e.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();var r=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",r),this.generateRoundPolygon("round-diamond",r),this.generatePolygon("pentagon",tQ(5,0)),this.generateRoundPolygon("round-pentagon",tQ(5,0)),this.generatePolygon("hexagon",tQ(6,0)),this.generateRoundPolygon("round-hexagon",tQ(6,0)),this.generatePolygon("heptagon",tQ(7,0)),this.generateRoundPolygon("round-heptagon",tQ(7,0)),this.generatePolygon("octagon",tQ(8,0)),this.generateRoundPolygon("round-octagon",tQ(8,0));var n=Array(20),i=t0(5,0),a=t0(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<a.length/2;s++)a[2*s]*=o,a[2*s+1]*=o;for(var s=0;s<5;s++)n[4*s]=i[2*s],n[4*s+1]=i[2*s+1],n[4*s+2]=a[2*s],n[4*s+3]=a[2*s+1];n=tJ(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l),e.makePolygon=function(e){var r,n="polygon-"+e.join("$");return(r=this[n])?r:t.generatePolygon(n,e)}};var l$={};l$.timeToRender=function(){return this.redrawTotalTime/this.redrawCount},l$.redraw=function(e){e=e||eX(),void 0===this.averageRedrawTime&&(this.averageRedrawTime=0),void 0===this.lastRedrawTime&&(this.lastRedrawTime=0),void 0===this.lastDrawTime&&(this.lastDrawTime=0),this.requestedFrame=!0,this.renderOptions=e},l$.beforeRender=function(e,t){if(!this.destroyed){null==t&&eL("Priority is not optional for beforeRender");var r=this.beforeRenderCallbacks;r.push({fn:e,priority:t}),r.sort(function(e,t){return t.priority-e.priority})}};var lQ=function(e,t,r){for(var n=e.beforeRenderCallbacks,i=0;i<n.length;i++)n[i].fn(t,r)};l$.startRenderLoop=function(){var e=this,t=e.cy;if(!e.renderLoopStarted){e.renderLoopStarted=!0;var r=function(n){if(!e.destroyed){if(t.batching());else if(e.requestedFrame&&!e.skipFrame){lQ(e,!0,n);var i=eg();e.render(e.renderOptions);var a=e.lastDrawTime=eg();void 0===e.averageRedrawTime&&(e.averageRedrawTime=a-i),void 0===e.redrawCount&&(e.redrawCount=0),e.redrawCount++,void 0===e.redrawTotalTime&&(e.redrawTotalTime=0);var o=a-i;e.redrawTotalTime+=o,e.lastRedrawTime=o,e.averageRedrawTime=e.averageRedrawTime/2+o/2,e.requestedFrame=!1}else lQ(e,!1,n);e.skipFrame=!1,em(r)}};em(r)}};var lJ=function(e){this.init(e)},l0=lJ.prototype;l0.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"],l0.init=function(e){this.options=e,this.cy=e.cy;var t=this.container=e.cy.container(),r=this.cy.window();if(r){var n=r.document,i=n.head,a="__________cytoscape_stylesheet",o="__________cytoscape_container",s=null!=n.getElementById(a);if(0>t.className.indexOf(o)&&(t.className=(t.className||"")+" "+o),!s){var l=n.createElement("style");l.id=a,l.textContent="."+o+" { position: relative; }",i.insertBefore(l,i.children[0])}"static"===r.getComputedStyle(t).getPropertyValue("position")&&ez("A Cytoscape container has style position:static and so can not use UI extensions properly")}this.selection=[void 0,void 0,void 0,void 0,0],this.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],this.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},this.dragData={possibleDragElements:[]},this.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},this.redraws=0,this.showFps=e.showFps,this.debug=e.debug,this.webgl=e.webgl,this.hideEdgesOnViewport=e.hideEdgesOnViewport,this.textureOnViewport=e.textureOnViewport,this.wheelSensitivity=e.wheelSensitivity,this.motionBlurEnabled=e.motionBlur,this.forcedPixelRatio=M(e.pixelRatio)?e.pixelRatio:null,this.motionBlur=e.motionBlur,this.motionBlurOpacity=e.motionBlurOpacity,this.motionBlurTransparency=1-this.motionBlurOpacity,this.motionBlurPxRatio=1,this.mbPxRBlurry=1,this.minMbLowQualFrames=4,this.fullQualityMb=!1,this.clearedForMotionBlur=[],this.desktopTapThreshold=e.desktopTapThreshold,this.desktopTapThreshold2=e.desktopTapThreshold*e.desktopTapThreshold,this.touchTapThreshold=e.touchTapThreshold,this.touchTapThreshold2=e.touchTapThreshold*e.touchTapThreshold,this.tapholdDuration=500,this.bindings=[],this.beforeRenderCallbacks=[],this.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},this.registerNodeShapes(),this.registerArrowShapes(),this.registerCalculationListeners()},l0.notify=function(e,t){var r=this.cy;if(!this.destroyed){if("init"===e)return void this.load();if("destroy"===e)return void this.destroy();("add"===e||"remove"===e||"move"===e&&r.hasCompoundNodes()||"load"===e||"zorder"===e||"mount"===e)&&this.invalidateCachedZSortedEles(),"viewport"===e&&this.redrawHint("select",!0),"gc"===e&&this.redrawHint("gc",!0),("load"===e||"resize"===e||"mount"===e)&&(this.invalidateContainerClientCoordsCache(),this.matchCanvasSize(this.container)),this.redrawHint("eles",!0),this.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}},l0.destroy=function(){this.destroyed=!0,this.cy.stopAnimationLoop();for(var e=0;e<this.bindings.length;e++){var t=this.bindings[e],r=t.target;(r.off||r.removeEventListener).apply(r,t.args)}if(this.bindings=[],this.beforeRenderCallbacks=[],this.onUpdateEleCalcsFns=[],this.removeObserver&&this.removeObserver.disconnect(),this.styleObserver&&this.styleObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect(),this.labelCalcDiv)try{document.body.removeChild(this.labelCalcDiv)}catch(e){}},l0.isHeadless=function(){return!1},[a5,lG,lH,lK,lZ,l$].forEach(function(e){J(l0,e)});var l1=1e3/60,l2=function(e){return function(){var t=this,r=this.renderer;if(!t.dequeueingSetup){t.dequeueingSetup=!0;var n=ep(function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},e.deqRedrawThreshold),i=e.priority||eI;r.beforeRender(function(i,a){var o=eg(),s=r.averageRedrawTime,l=r.lastRedrawTime,u=[],c=r.cy.extent(),d=r.getPixelRatio();for(i||r.flushRenderedStyleQueue();;){var h=eg(),f=h-o,p=h-a;if(l<l1){var v=l1-(i?s:0);if(p>=e.deqFastCost*v)break}else if(i){if(f>=e.deqCost*l||f>=e.deqAvgCost*s)break}else if(p>=e.deqNoDrawCost*l1)break;var g=e.deq(t,d,c);if(g.length>0)for(var y=0;y<g.length;y++)u.push(g[y]);else break}u.length>0&&(e.onDeqd(t,u),!i&&e.shouldRedraw(t,u,d,c)&&n())},i(t))}}},l5=h(function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eR;d(this,e),this.idsByKey=new eZ,this.keyForId=new eZ,this.cachesByLvl=new eZ,this.lvls=[],this.getKey=t,this.doesEleInvalidateKey=r},[{key:"getIdsFor",value:function(e){null==e&&eL("Can not get id list for null key");var t=this.idsByKey,r=this.idsByKey.get(e);return r||(r=new eQ,t.set(e,r)),r}},{key:"addIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).add(t)}},{key:"deleteIdForKey",value:function(e,t){null!=e&&this.getIdsFor(e).delete(t)}},{key:"getNumberOfIdsForKey",value:function(e){return null==e?0:this.getIdsFor(e).size}},{key:"updateKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t),n=this.getKey(e);this.deleteIdForKey(r,t),this.addIdForKey(n,t),this.keyForId.set(t,n)}},{key:"deleteKeyMappingFor",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteIdForKey(r,t),this.keyForId.delete(t)}},{key:"keyHasChangedFor",value:function(e){var t=e.id();return this.keyForId.get(t)!==this.getKey(e)}},{key:"isInvalid",value:function(e){return this.keyHasChangedFor(e)||this.doesEleInvalidateKey(e)}},{key:"getCachesAt",value:function(e){var t=this.cachesByLvl,r=this.lvls,n=t.get(e);return n||(n=new eZ,t.set(e,n),r.push(e)),n}},{key:"getCache",value:function(e,t){return this.getCachesAt(t).get(e)}},{key:"get",value:function(e,t){var r=this.getKey(e),n=this.getCache(r,t);return null!=n&&this.updateKeyMappingFor(e),n}},{key:"getForCachedKey",value:function(e,t){var r=this.keyForId.get(e.id());return this.getCache(r,t)}},{key:"hasCache",value:function(e,t){return this.getCachesAt(t).has(e)}},{key:"has",value:function(e,t){var r=this.getKey(e);return this.hasCache(r,t)}},{key:"setCache",value:function(e,t,r){r.key=e,this.getCachesAt(t).set(e,r)}},{key:"set",value:function(e,t,r){var n=this.getKey(e);this.setCache(n,t,r),this.updateKeyMappingFor(e)}},{key:"deleteCache",value:function(e,t){this.getCachesAt(t).delete(e)}},{key:"delete",value:function(e,t){var r=this.getKey(e);this.deleteCache(r,t)}},{key:"invalidateKey",value:function(e){var t=this;this.lvls.forEach(function(r){return t.deleteCache(e,r)})}},{key:"invalidate",value:function(e){var t=e.id(),r=this.keyForId.get(t);this.deleteKeyMappingFor(e);var n=this.doesEleInvalidateKey(e);return n&&this.invalidateKey(r),n||0===this.getNumberOfIdsForKey(r)}}]),l3={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},l4=eq({getKey:null,doesEleInvalidateKey:eR,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:eM,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),l9=function(e,t){this.renderer=e,this.onDequeues=[];var r=l4(t);J(this,r),this.lookup=new l5(r.getKey,r.doesEleInvalidateKey),this.setupDequeueing()},l6=l9.prototype;l6.reasons=l3,l6.getTextureQueue=function(e){return this.eleImgCaches=this.eleImgCaches||{},this.eleImgCaches[e]=this.eleImgCaches[e]||[]},l6.getRetiredTextureQueue=function(e){var t=this.eleImgCaches.retired=this.eleImgCaches.retired||{};return t[e]=t[e]||[]},l6.getElementQueue=function(){return this.eleCacheQueue=this.eleCacheQueue||new e3(function(e,t){return t.reqs-e.reqs})},l6.getElementKeyToQueue=function(){return this.eleKeyToCacheQueue=this.eleKeyToCacheQueue||{}},l6.getElement=function(e,t,r,n,i){var a,o,s,l=this,u=this.renderer,c=u.cy.zoom(),d=this.lookup;if(!t||0===t.w||0===t.h||isNaN(t.w)||isNaN(t.h)||!e.visible()||e.removed()||!l.allowEdgeTxrCaching&&e.isEdge()||!l.allowParentTxrCaching&&e.isParent())return null;if(null==n&&(n=Math.ceil(tc(c*r))),n<-4)n=-4;else if(c>=7.99||n>3)return null;var h=Math.pow(2,n),f=t.h*h,p=t.w*h,v=u.eleTextBiggerThanMin(e,h);if(!this.isVisible(e,v))return null;var g=d.get(e,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;if(a=f<=25?25:f<=50?50:50*Math.ceil(f/50),f>1024||p>1024)return null;var y=l.getTextureQueue(a),b=y[y.length-2],x=function(){return l.recycleTexture(a,p)||l.addTexture(a,p)};b||(b=y[y.length-1]),b||(b=x()),b.width-b.usedWidth<p&&(b=x());for(var w=function(e){return e&&e.scaledLabelShown===v},E=i&&i===l3.dequeue,k=i&&i===l3.highQuality,_=i&&i===l3.downscale,C=n+1;C<=3;C++){var T=d.get(e,C);if(T){o=T;break}}var P=o&&o.level===n+1?o:null,S=function(){b.context.drawImage(P.texture.canvas,P.x,0,P.width,P.height,b.usedWidth,0,p,f)};if(b.context.setTransform(1,0,0,1,0,0),b.context.clearRect(b.usedWidth,0,p,a),w(P))S();else if(w(o))if(!k)return l.queueElement(e,o.level-1),o;else{for(var B=o.level;B>n;B--)P=l.getElement(e,t,r,B,l3.downscale);S()}else{if(!E&&!k&&!_)for(var D=n-1;D>=-4;D--){var A=d.get(e,D);if(A){s=A;break}}if(w(s))return l.queueElement(e,n),s;b.context.translate(b.usedWidth,0),b.context.scale(h,h),this.drawElement(b.context,e,t,v,!1),b.context.scale(1/h,1/h),b.context.translate(-b.usedWidth,0)}return g={x:b.usedWidth,texture:b,level:n,scale:h,width:p,height:f,scaledLabelShown:v},b.usedWidth+=Math.ceil(p+8),b.eleCaches.push(g),d.set(e,n,g),l.checkTextureFullness(b),g},l6.invalidateElements=function(e){for(var t=0;t<e.length;t++)this.invalidateElement(e[t])},l6.invalidateElement=function(e){var t=this.lookup,r=[];if(t.isInvalid(e)){for(var n=-4;n<=3;n++){var i=t.getForCachedKey(e,n);i&&r.push(i)}if(t.invalidate(e))for(var a=0;a<r.length;a++){var o=r[a],s=o.texture;s.invalidatedWidth+=o.width,o.invalidated=!0,this.checkTextureUtility(s)}this.removeFromQueue(e)}},l6.checkTextureUtility=function(e){e.invalidatedWidth>=.2*e.width&&this.retireTexture(e)},l6.checkTextureFullness=function(e){var t=this.getTextureQueue(e.height);e.usedWidth/e.width>.8&&e.fullnessChecks>=10?eY(t,e):e.fullnessChecks++},l6.retireTexture=function(e){var t=e.height,r=this.getTextureQueue(t),n=this.lookup;eY(r,e),e.retired=!0;for(var i=e.eleCaches,a=0;a<i.length;a++){var o=i[a];n.deleteCache(o.key,o.level)}eW(i),this.getRetiredTextureQueue(t).push(e)},l6.addTexture=function(e,t){var r=this.getTextureQueue(e),n={};return r.push(n),n.eleCaches=[],n.height=e,n.width=Math.max(1024,t),n.usedWidth=0,n.invalidatedWidth=0,n.fullnessChecks=0,n.canvas=this.renderer.makeOffscreenCanvas(n.width,n.height),n.context=n.canvas.getContext("2d"),n},l6.recycleTexture=function(e,t){for(var r=this.getTextureQueue(e),n=this.getRetiredTextureQueue(e),i=0;i<n.length;i++){var a=n[i];if(a.width>=t)return a.retired=!1,a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,eW(a.eleCaches),a.context.setTransform(1,0,0,1,0,0),a.context.clearRect(0,0,a.width,a.height),eY(n,a),r.push(a),a}},l6.queueElement=function(e,t){var r=this.getElementQueue(),n=this.getElementKeyToQueue(),i=this.getKey(e),a=n[i];if(a)a.level=Math.max(a.level,t),a.eles.merge(e),a.reqs++,r.updateItem(a);else{var o={eles:e.spawn().merge(e),level:t,reqs:1,key:i};r.push(o),n[i]=o}},l6.dequeue=function(e){for(var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=[],i=this.lookup,a=0;a<1;a++)if(t.size()>0){var o=t.pop(),s=o.key,l=o.eles[0],u=i.hasCache(l,o.level);if(r[s]=null,u)continue;n.push(o);var c=this.getBoundingBox(l);this.getElement(l,c,e,o.level,l3.dequeue)}else break;return n},l6.removeFromQueue=function(e){var t=this.getElementQueue(),r=this.getElementKeyToQueue(),n=this.getKey(e),i=r[n];null!=i&&(1===i.eles.length?(i.reqs=eA,t.updateItem(i),t.pop(),r[n]=null):i.eles.unmerge(e))},l6.onDequeue=function(e){this.onDequeues.push(e)},l6.offDequeue=function(e){eY(this.onDequeues,e)},l6.setupDequeueing=l2({deqRedrawThreshold:100,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t,r){return e.dequeue(t,r)},onDeqd:function(e,t){for(var r=0;r<e.onDequeues.length;r++)(0,e.onDequeues[r])(t)},shouldRedraw:function(e,t,r,n){for(var i=0;i<t.length;i++)for(var a=t[i].eles,o=0;o<a.length;o++)if(tT(a[o].boundingBox(),n))return!0;return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var l7=function(e){var t=this,r=t.renderer=e,n=r.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=eg()-500,t.skipping=!1,t.eleTxrDeqs=n.collection(),t.scheduleElementRefinement=ep(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},50),r.beforeRender(function(e,r){r-t.lastInvalidationTime<=250?t.skipping=!0:t.skipping=!1},r.beforeRenderPriorities.lyrTxrSkip),t.layersQueue=new e3(function(e,t){return t.reqs-e.reqs}),t.setupDequeueing()},l8=l7.prototype,ue=0;l8.makeLayer=function(e,t){var r=Math.pow(2,t),n=Math.ceil(e.w*r),i=Math.ceil(e.h*r),a=this.renderer.makeOffscreenCanvas(n,i),o={id:ue=++ue%0x1fffffffffffff,bb:e,level:t,width:n,height:i,canvas:a,context:a.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(r,r),s.translate(l,u),o},l8.getLayers=function(e,t,r){var n,i,a=this,o=a.renderer.cy.zoom(),s=a.firstGet;if(a.firstGet=!1,null==r){if((r=Math.ceil(tc(o*t)))<-4)r=-4;else if(o>=3.99||r>2)return null}a.validateLayersElesOrdering(r,e);var l=a.layersByLevel,u=Math.pow(2,r),c=l[r]=l[r]||[];if(a.levelIsComplete(r,e))return c;var d=function(t){if(a.validateLayersElesOrdering(t,e),a.levelIsComplete(t,e))return i=l[t],!0},h=function(e){if(!i)for(var t=r+e;-4<=t&&t<=2&&!d(t);t+=e);};h(1),h(-1);for(var f=c.length-1;f>=0;f--){var p=c[f];p.invalid&&eY(c,p)}var v=function(){if(!n){n=tb();for(var t=0;t<e.length;t++)tw(n,e[t].boundingBox())}return n};if(a.skipping&&!s)return null;for(var g=null,y=e.length/1,b=!s,x=0;x<e.length;x++){var w=e[x],E=w._private.rscratch,k=E.imgLayerCaches=E.imgLayerCaches||{},_=k[r];if(_){g=_;continue}if((!g||g.eles.length>=y||!tB(g.bb,w.boundingBox()))&&!(g=function(e){var t=(e=e||{}).after;v();var i=Math.ceil(n.w*u),o=Math.ceil(n.h*u);if(i>32767||o>32767||i*o>16e6)return null;var s=a.makeLayer(n,r);if(null!=t){var l=c.indexOf(t)+1;c.splice(l,0,s)}else(void 0===e.insert||e.insert)&&c.unshift(s);return s}({insert:!0,after:g})))return null;i||b?a.queueLayer(g,w):a.drawEleInLayer(g,w,r,t),g.eles.push(w),k[r]=g}return i||(b?null:c)},l8.getEleLevelForLayerLevel=function(e,t){return e},l8.drawEleInLayer=function(e,t,r,n){var i=this.renderer,a=e.context,o=t.boundingBox();0!==o.w&&0!==o.h&&t.visible()&&(r=this.getEleLevelForLayerLevel(r,n),i.setImgSmoothing(a,!1),i.drawCachedElement(a,t,null,null,r,!0),i.setImgSmoothing(a,!0))},l8.levelIsComplete=function(e,t){var r=this.layersByLevel[e];if(!r||0===r.length)return!1;for(var n=0,i=0;i<r.length;i++){var a=r[i];if(a.reqs>0||a.invalid)return!1;n+=a.eles.length}return n===t.length},l8.validateLayersElesOrdering=function(e,t){var r=this.layersByLevel[e];if(r)for(var n=0;n<r.length;n++){for(var i=r[n],a=-1,o=0;o<t.length;o++)if(i.eles[0]===t[o]){a=o;break}if(a<0){this.invalidateLayer(i);continue}for(var s=a,o=0;o<i.eles.length;o++)if(i.eles[o]!==t[s+o]){this.invalidateLayer(i);break}}},l8.updateElementsInLayers=function(e,t){for(var r=I(e[0]),n=0;n<e.length;n++)for(var i=r?null:e[n],a=r?e[n]:e[n].ele,o=a._private.rscratch,s=o.imgLayerCaches=o.imgLayerCaches||{},l=-4;l<=2;l++){var u=s[l];u&&(i&&this.getEleLevelForLayerLevel(u.level)!==i.level||t(u,a,i))}},l8.haveLayers=function(){for(var e=!1,t=-4;t<=2;t++){var r=this.layersByLevel[t];if(r&&r.length>0){e=!0;break}}return e},l8.invalidateElements=function(e){var t=this;0===e.length||(t.lastInvalidationTime=eg(),0!==e.length&&t.haveLayers()&&t.updateElementsInLayers(e,function(e,r,n){t.invalidateLayer(e)}))},l8.invalidateLayer=function(e){if(this.lastInvalidationTime=eg(),!e.invalid){var t=e.level,r=e.eles;eY(this.layersByLevel[t],e),e.elesQueue=[],e.invalid=!0,e.replacement&&(e.replacement.invalid=!0);for(var n=0;n<r.length;n++){var i=r[n]._private.rscratch.imgLayerCaches;i&&(i[t]=null)}}},l8.refineElementTextures=function(e){var t=this;t.updateElementsInLayers(e,function(e,r,n){var i=e.replacement;if(i||((i=e.replacement=t.makeLayer(e.bb,e.level)).replaces=e,i.eles=e.eles),!i.reqs)for(var a=0;a<i.eles.length;a++)t.queueLayer(i,i.eles[a])})},l8.enqueueElementRefinement=function(e){this.eleTxrDeqs.merge(e),this.scheduleElementRefinement()},l8.queueLayer=function(e,t){var r=this.layersQueue,n=e.elesQueue,i=n.hasId=n.hasId||{};if(!e.replacement){if(t){if(i[t.id()])return;n.push(t),i[t.id()]=!0}e.reqs?(e.reqs++,r.updateItem(e)):(e.reqs=1,r.push(e))}},l8.dequeue=function(e){for(var t=this.layersQueue,r=[],n=0;n<1&&0!==t.size();){var i=t.peek();if(i.replacement||i.replaces&&i!==i.replaces.replacement||i.invalid){t.pop();continue}var a=i.elesQueue.shift();a&&(this.drawEleInLayer(i,a,i.level,e),n++),0===r.length&&r.push(!0),0===i.elesQueue.length&&(t.pop(),i.reqs=0,i.replaces&&this.applyLayerReplacement(i),this.requestRedraw())}return r},l8.applyLayerReplacement=function(e){var t=this.layersByLevel[e.level],r=e.replaces,n=t.indexOf(r);if(!(n<0)&&!r.invalid){t[n]=e;for(var i=0;i<e.eles.length;i++){var a=e.eles[i]._private,o=a.imgLayerCaches=a.imgLayerCaches||{};o&&(o[e.level]=e)}this.requestRedraw()}},l8.requestRedraw=ep(function(){var e=this.renderer;e.redrawHint("eles",!0),e.redrawHint("drag",!0),e.redraw()},100),l8.setupDequeueing=l2({deqRedrawThreshold:50,deqCost:.15,deqAvgCost:.1,deqNoDrawCost:.9,deqFastCost:.9,deq:function(e,t){return e.dequeue(t)},onDeqd:eI,shouldRedraw:eM,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var ut={};function ur(e,t){for(var r=0;r<t.length;r++){var n=t[r];e.lineTo(n.x,n.y)}}function un(e,t,r){for(var n,i=0;i<t.length;i++){var a=t[i];0===i&&(n=a),e.lineTo(a.x,a.y)}e.quadraticCurveTo(r.x,r.y,n.x,n.y)}function ui(e,t,r){e.beginPath&&e.beginPath();for(var n=0;n<t.length;n++){var i=t[n];e.lineTo(i.x,i.y)}var a=r[0];e.moveTo(a.x,a.y);for(var n=1;n<r.length;n++){var i=r[n];e.lineTo(i.x,i.y)}e.closePath&&e.closePath()}function ua(e,t,r,n,i){e.beginPath&&e.beginPath(),e.arc(r,n,i,0,2*Math.PI,!1);var a=t[0];e.moveTo(a.x,a.y);for(var o=0;o<t.length;o++){var s=t[o];e.lineTo(s.x,s.y)}e.closePath&&e.closePath()}function uo(e,t,r,n){e.arc(t,r,n,0,2*Math.PI,!1)}ut.arrowShapeImpl=function(e){return(o||(o={polygon:ur,"triangle-backcurve":un,"triangle-tee":ui,"circle-triangle":ua,"triangle-cross":ui,circle:uo}))[e]};var us={};us.drawElement=function(e,t,r,n,i,a){t.isNode()?this.drawNode(e,t,r,n,i,a):this.drawEdge(e,t,r,n,i,a)},us.drawElementOverlay=function(e,t){t.isNode()?this.drawNodeOverlay(e,t):this.drawEdgeOverlay(e,t)},us.drawElementUnderlay=function(e,t){t.isNode()?this.drawNodeUnderlay(e,t):this.drawEdgeUnderlay(e,t)},us.drawCachedElementPortion=function(e,t,r,n,i,a,o,s){var l=r.getBoundingBox(t);if(0!==l.w&&0!==l.h){var u=r.getElement(t,l,n,i,a);if(null!=u){var c,d,h,f,p,v,g=s(this,t);if(0===g)return;var y=o(this,t),b=l.x1,x=l.y1,w=l.w,E=l.h;if(0!==y){var k=r.getRotationPoint(t);h=k.x,f=k.y,e.translate(h,f),e.rotate(y),(p=this.getImgSmoothing(e))||this.setImgSmoothing(e,!0);var _=r.getRotationOffset(t);c=_.x,d=_.y}else c=b,d=x;1!==g&&(v=e.globalAlpha,e.globalAlpha=v*g),e.drawImage(u.texture.canvas,u.x,0,u.width,u.height,c,d,w,E),1!==g&&(e.globalAlpha=v),0!==y&&(e.rotate(-y),e.translate(-h,-f),p||this.setImgSmoothing(e,!1))}else r.drawElement(e,t)}};var ul=function(){return 0},uu=function(e,t){return e.getTextAngle(t,null)},uc=function(e,t){return e.getTextAngle(t,"source")},ud=function(e,t){return e.getTextAngle(t,"target")},uh=function(e,t){return t.effectiveOpacity()},uf=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};us.drawCachedElement=function(e,t,r,n,i,a){var o=this.data,s=o.eleTxrCache,l=o.lblTxrCache,u=o.slbTxrCache,c=o.tlbTxrCache,d=t.boundingBox(),h=!0===a?s.reasons.highQuality:null;if(0!==d.w&&0!==d.h&&t.visible()&&(!n||tT(d,n))){var f=t.isEdge(),p=t.element()._private.rscratch.badLine;this.drawElementUnderlay(e,t),this.drawCachedElementPortion(e,t,s,r,i,h,ul,uh),f&&p||this.drawCachedElementPortion(e,t,l,r,i,h,uu,uf),f&&!p&&(this.drawCachedElementPortion(e,t,u,r,i,h,uc,uf),this.drawCachedElementPortion(e,t,c,r,i,h,ud,uf)),this.drawElementOverlay(e,t)}},us.drawElements=function(e,t){for(var r=0;r<t.length;r++){var n=t[r];this.drawElement(e,n)}},us.drawCachedElements=function(e,t,r,n){for(var i=0;i<t.length;i++){var a=t[i];this.drawCachedElement(e,a,r,n)}},us.drawCachedNodes=function(e,t,r,n){for(var i=0;i<t.length;i++){var a=t[i];a.isNode()&&this.drawCachedElement(e,a,r,n)}},us.drawLayeredElements=function(e,t,r,n){var i=this.data.lyrTxrCache.getLayers(t,r);if(i)for(var a=0;a<i.length;a++){var o=i[a],s=o.bb;0!==s.w&&0!==s.h&&e.drawImage(o.canvas,s.x1,s.y1,s.w,s.h)}else this.drawCachedElements(e,t,r,n)};var up={};up.drawEdge=function(e,t,r){var n,i=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=!(arguments.length>4)||void 0===arguments[4]||arguments[4],o=!(arguments.length>5)||void 0===arguments[5]||arguments[5],s=this,l=t._private.rscratch;if((!o||t.visible())&&!(l.badLine||null==l.allpts||isNaN(l.allpts[0]))){r&&(n=r,e.translate(-n.x1,-n.y1));var u=o?t.pstyle("opacity").value:1,c=o?t.pstyle("line-opacity").value:1,d=t.pstyle("curve-style").value,h=t.pstyle("line-style").value,f=t.pstyle("width").pfValue,p=t.pstyle("line-cap").value,v=t.pstyle("line-outline-width").value,g=t.pstyle("line-outline-color").value,y=u*c,b=u*c,x=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;"straight-triangle"===d?(s.eleStrokeStyle(e,t,r),s.drawEdgeTrianglePath(t,e,l.allpts)):(e.lineWidth=f,e.lineCap=p,s.eleStrokeStyle(e,t,r),s.drawEdgePath(t,e,l.allpts,h),e.lineCap="butt")},w=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b;s.drawArrowheads(e,t,r)};if(e.lineJoin="round","yes"===t.pstyle("ghost").value){var E=t.pstyle("ghost-offset-x").pfValue,k=t.pstyle("ghost-offset-y").pfValue,_=y*t.pstyle("ghost-opacity").value;e.translate(E,k),x(_),w(_),e.translate(-E,-k)}else!function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;if(e.lineWidth=f+v,e.lineCap=p,v>0)s.colorStrokeStyle(e,g[0],g[1],g[2],r);else{e.lineCap="butt";return}"straight-triangle"===d?s.drawEdgeTrianglePath(t,e,l.allpts):(s.drawEdgePath(t,e,l.allpts,h),e.lineCap="butt")}();a&&s.drawEdgeUnderlay(e,t),x(),w(),a&&s.drawEdgeOverlay(e,t),s.drawElementText(e,t,null,i),r&&e.translate(n.x1,n.y1)}};var uv=function(e){if(!["overlay","underlay"].includes(e))throw Error("Invalid state");return function(t,r){if(r.visible()){var n=r.pstyle("".concat(e,"-opacity")).value;if(0!==n){var i=this.usePaths(),a=r._private.rscratch,o=r.pstyle("".concat(e,"-padding")).pfValue,s=r.pstyle("".concat(e,"-color")).value;t.lineWidth=2*o,"self"!==a.edgeType||i?t.lineCap="round":t.lineCap="butt",this.colorStrokeStyle(t,s[0],s[1],s[2],n),this.drawEdgePath(r,t,a.allpts,"solid")}}}};up.drawEdgeOverlay=uv("overlay"),up.drawEdgeUnderlay=uv("underlay"),up.drawEdgePath=function(e,t,r,n){var i=e._private.rscratch,a=t,o=!1,s=this.usePaths(),l=e.pstyle("line-dash-pattern").pfValue,u=e.pstyle("line-dash-offset").pfValue;if(s){var c=r.join("$");i.pathCacheKey&&i.pathCacheKey===c?(p=t=i.pathCache,o=!0):(p=t=new Path2D,i.pathCacheKey=c,i.pathCache=p)}if(a.setLineDash)switch(n){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(l),a.lineDashOffset=u;break;case"solid":a.setLineDash([])}if(!o&&!i.badLine)switch(t.beginPath&&t.beginPath(),t.moveTo(r[0],r[1]),i.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var d=2;d+3<r.length;d+=4)t.quadraticCurveTo(r[d],r[d+1],r[d+2],r[d+3]);break;case"straight":case"haystack":for(var h=2;h+1<r.length;h+=2)t.lineTo(r[h],r[h+1]);break;case"segments":if(i.isRound){var p,v,g=f(i.roundCorners);try{for(g.s();!(v=g.n()).done;){var y=v.value;lM(t,y)}}catch(e){g.e(e)}finally{g.f()}t.lineTo(r[r.length-2],r[r.length-1])}else for(var b=2;b+1<r.length;b+=2)t.lineTo(r[b],r[b+1])}t=a,s?t.stroke(p):t.stroke(),t.setLineDash&&t.setLineDash([])},up.drawEdgeTrianglePath=function(e,t,r){t.fillStyle=t.strokeStyle;for(var n=e.pstyle("width").pfValue,i=0;i+1<r.length;i+=2){var a=[r[i+2]-r[i],r[i+3]-r[i+1]],o=Math.sqrt(a[0]*a[0]+a[1]*a[1]),s=[a[1]/o,-a[0]/o],l=[s[0]*n/2,s[1]*n/2];t.beginPath(),t.moveTo(r[i]-l[0],r[i+1]-l[1]),t.lineTo(r[i]+l[0],r[i+1]+l[1]),t.lineTo(r[i+2],r[i+3]),t.closePath(),t.fill()}},up.drawArrowheads=function(e,t,r){var n=t._private.rscratch,i="haystack"===n.edgeType;i||this.drawArrowhead(e,t,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,r),this.drawArrowhead(e,t,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,r),this.drawArrowhead(e,t,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,r),i||this.drawArrowhead(e,t,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,r)},up.drawArrowhead=function(e,t,r,n,i,a,o){if(!(isNaN(n)||null==n||isNaN(i)||null==i||isNaN(a))&&null!=a){var s=t.pstyle(r+"-arrow-shape").value;if("none"!==s){var l="hollow"===t.pstyle(r+"-arrow-fill").value?"both":"filled",u=t.pstyle(r+"-arrow-fill").value,c=t.pstyle("width").pfValue,d=t.pstyle(r+"-arrow-width"),h="match-line"===d.value?c:d.pfValue;"%"===d.units&&(h*=c);var f=t.pstyle("opacity").value;void 0===o&&(o=f);var p=e.globalCompositeOperation;(1!==o||"hollow"===u)&&(e.globalCompositeOperation="destination-out",this.colorFillStyle(e,255,255,255,1),this.colorStrokeStyle(e,255,255,255,1),this.drawArrowShape(t,e,l,c,s,h,n,i,a),e.globalCompositeOperation=p);var v=t.pstyle(r+"-arrow-color").value;this.colorFillStyle(e,v[0],v[1],v[2],o),this.colorStrokeStyle(e,v[0],v[1],v[2],o),this.drawArrowShape(t,e,u,c,s,h,n,i,a)}}},up.drawArrowShape=function(e,t,r,n,i,a,o,s,l){var u,c=this.usePaths()&&"triangle-cross"!==i,d=!1,h=t,f=e.pstyle("arrow-scale").value,p=this.getArrowWidth(n,f),v=this.arrowShapes[i];if(c){var g=this.arrowPathCache=this.arrowPathCache||[],y=eC(i),b=g[y];null!=b?(u=t=b,d=!0):(u=t=new Path2D,g[y]=u)}!d&&(t.beginPath&&t.beginPath(),c?v.draw(t,1,0,{x:0,y:0},1):v.draw(t,p,l,{x:o,y:s},n),t.closePath&&t.closePath()),t=h,c&&(t.translate(o,s),t.rotate(l),t.scale(p,p)),("filled"===r||"both"===r)&&(c?t.fill(u):t.fill()),("hollow"===r||"both"===r)&&(t.lineWidth=a/(c?p:1),t.lineJoin="miter",c?t.stroke(u):t.stroke()),c&&(t.scale(1/p,1/p),t.rotate(-l),t.translate(-o,-s))};var ug={};ug.safeDrawImage=function(e,t,r,n,i,a,o,s,l,u){if(!(i<=0)&&!(a<=0)&&!(l<=0)&&!(u<=0))try{e.drawImage(t,r,n,i,a,o,s,l,u)}catch(e){ez(e)}},ug.drawInscribedImage=function(e,t,r,n,i){var a=r.position(),o=a.x,s=a.y,l=r.cy().style(),u=l.getIndexedStyle.bind(l),c=u(r,"background-fit","value",n),d=u(r,"background-repeat","value",n),h=r.width(),f=r.height(),p=2*r.padding(),v=h+("inner"===u(r,"background-width-relative-to","value",n)?0:p),g=f+("inner"===u(r,"background-height-relative-to","value",n)?0:p),y=r._private.rscratch,b="node"===u(r,"background-clip","value",n),x=u(r,"background-image-opacity","value",n)*i,w=u(r,"background-image-smoothing","value",n),E=r.pstyle("corner-radius").value;"auto"!==E&&(E=r.pstyle("corner-radius").pfValue);var k=t.width||t.cachedW,_=t.height||t.cachedH;(null==k||null==_)&&(document.body.appendChild(t),k=t.cachedW=t.width||t.offsetWidth,_=t.cachedH=t.height||t.offsetHeight,document.body.removeChild(t));var C=k,T=_;if("auto"!==u(r,"background-width","value",n)&&(C="%"===u(r,"background-width","units",n)?u(r,"background-width","pfValue",n)*v:u(r,"background-width","pfValue",n)),"auto"!==u(r,"background-height","value",n)&&(T="%"===u(r,"background-height","units",n)?u(r,"background-height","pfValue",n)*g:u(r,"background-height","pfValue",n)),0!==C&&0!==T){if("contain"===c){var P=Math.min(v/C,g/T);C*=P,T*=P}else if("cover"===c){var P=Math.max(v/C,g/T);C*=P,T*=P}var S=o-v/2,B=u(r,"background-position-x","units",n),D=u(r,"background-position-x","pfValue",n);"%"===B?S+=(v-C)*D:S+=D;var A=u(r,"background-offset-x","units",n),M=u(r,"background-offset-x","pfValue",n);"%"===A?S+=(v-C)*M:S+=M;var R=s-g/2,N=u(r,"background-position-y","units",n),I=u(r,"background-position-y","pfValue",n);"%"===N?R+=(g-T)*I:R+=I;var L=u(r,"background-offset-y","units",n),O=u(r,"background-offset-y","pfValue",n);"%"===L?R+=(g-T)*O:R+=O,y.pathCache&&(S-=o,R-=s,o=0,s=0);var z=e.globalAlpha;e.globalAlpha=x;var j=this.getImgSmoothing(e),V=!1;if("no"===w&&j?(this.setImgSmoothing(e,!1),V=!0):"yes"!==w||j||(this.setImgSmoothing(e,!0),V=!0),"no-repeat"===d)b&&(e.save(),y.pathCache?e.clip(y.pathCache):(this.nodeShapes[this.getNodeShape(r)].draw(e,o,s,v,g,E,y),e.clip())),this.safeDrawImage(e,t,0,0,k,_,S,R,C,T),b&&e.restore();else{var F=e.createPattern(t,d);e.fillStyle=F,this.nodeShapes[this.getNodeShape(r)].draw(e,o,s,v,g,E,y),e.translate(S,R),e.fill(),e.translate(-S,-R)}e.globalAlpha=z,V&&this.setImgSmoothing(e,j)}};var uy={};function um(e,t,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5,o=Math.min(a,n/2,i/2);e.beginPath(),e.moveTo(t+o,r),e.lineTo(t+n-o,r),e.quadraticCurveTo(t+n,r,t+n,r+o),e.lineTo(t+n,r+i-o),e.quadraticCurveTo(t+n,r+i,t+n-o,r+i),e.lineTo(t+o,r+i),e.quadraticCurveTo(t,r+i,t,r+i-o),e.lineTo(t,r+o),e.quadraticCurveTo(t,r,t+o,r),e.closePath()}uy.eleTextBiggerThanMin=function(e,t){return t||(t=Math.pow(2,Math.ceil(tc(e.cy().zoom()*this.getPixelRatio())))),!(e.pstyle("font-size").pfValue*t<e.pstyle("min-zoomed-font-size").pfValue)},uy.drawElementText=function(e,t,r,n,i){var a,o=!(arguments.length>5)||void 0===arguments[5]||arguments[5];if(null==n){if(o&&!this.eleTextBiggerThanMin(t))return}else if(!1===n)return;if(t.isNode()){var s=t.pstyle("label");if(!s||!s.value)return;e.textAlign=this.getLabelJustification(t),e.textBaseline="bottom"}else{var l=t.element()._private.rscratch.badLine,u=t.pstyle("label"),c=t.pstyle("source-label"),d=t.pstyle("target-label");if(l||(!u||!u.value)&&(!c||!c.value)&&(!d||!d.value))return;e.textAlign="center",e.textBaseline="bottom"}var h=!r;r&&(a=r,e.translate(-a.x1,-a.y1)),null==i?(this.drawText(e,t,null,h,o),t.isEdge()&&(this.drawText(e,t,"source",h,o),this.drawText(e,t,"target",h,o))):this.drawText(e,t,i,h,o),r&&e.translate(a.x1,a.y1)},uy.getFontCache=function(e){var t;this.fontCaches=this.fontCaches||[];for(var r=0;r<this.fontCaches.length;r++)if((t=this.fontCaches[r]).context===e)return t;return t={context:e},this.fontCaches.push(t),t},uy.setupTextStyle=function(e,t){var r=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=t.pstyle("font-style").strValue,i=t.pstyle("font-size").pfValue+"px",a=t.pstyle("font-family").strValue,o=t.pstyle("font-weight").strValue,s=r?t.effectiveOpacity()*t.pstyle("text-opacity").value:1,l=t.pstyle("text-outline-opacity").value*s,u=t.pstyle("color").value,c=t.pstyle("text-outline-color").value;e.font=n+" "+o+" "+i+" "+a,e.lineJoin="round",this.colorFillStyle(e,u[0],u[1],u[2],s),this.colorStrokeStyle(e,c[0],c[1],c[2],l)},uy.getTextAngle=function(e,t){var r,n=e._private.rscratch,i=t?t+"-":"",a=e.pstyle(i+"text-rotation");if("autorotate"===a.strValue){var o=eG(n,"labelAngle",t);r=e.isEdge()?o:0}else r="none"===a.strValue?0:a.pfValue;return r},uy.drawText=function(e,t,r){var n=!(arguments.length>3)||void 0===arguments[3]||arguments[3],i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=t._private.rscratch,o=i?t.effectiveOpacity():1;if(!i||0!==o&&0!==t.pstyle("text-opacity").value){"main"===r&&(r=null);var s=eG(a,"labelX",r),l=eG(a,"labelY",r),u=this.getLabelText(t,r);if(null!=u&&""!==u&&!isNaN(s)&&!isNaN(l)){this.setupTextStyle(e,t,i);var c,d,h,f=r?r+"-":"",p=eG(a,"labelWidth",r),v=eG(a,"labelHeight",r),g=t.pstyle(f+"text-margin-x").pfValue,y=t.pstyle(f+"text-margin-y").pfValue,b=t.isEdge(),x=t.pstyle("text-halign").value,w=t.pstyle("text-valign").value;switch(b&&(x="center",w="center"),s+=g,l+=y,0!==(h=n?this.getTextAngle(t,r):0)&&(c=s,d=l,e.translate(c,d),e.rotate(h),s=0,l=0),w){case"top":break;case"center":l+=v/2;break;case"bottom":l+=v}var E=t.pstyle("text-background-opacity").value,k=t.pstyle("text-border-opacity").value,_=t.pstyle("text-border-width").pfValue,C=t.pstyle("text-background-padding").pfValue,T=t.pstyle("text-background-shape").strValue,P="round-rectangle"===T||"roundrectangle"===T;if(E>0||_>0&&k>0){var S,B,D=e.fillStyle,A=e.strokeStyle,M=e.lineWidth,R=t.pstyle("text-background-color").value,N=t.pstyle("text-border-color").value,I=t.pstyle("text-border-style").value,L=E>0,O=_>0&&k>0,z=s-C;switch(x){case"left":z-=p;break;case"center":z-=p/2}var j=l-v-C,V=p+2*C,F=v+2*C;if(L&&(e.fillStyle="rgba(".concat(R[0],",").concat(R[1],",").concat(R[2],",").concat(E*o,")")),O&&(e.strokeStyle="rgba(".concat(N[0],",").concat(N[1],",").concat(N[2],",").concat(k*o,")"),e.lineWidth=_,e.setLineDash))switch(I){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"double":e.lineWidth=_/4,e.setLineDash([]);break;default:e.setLineDash([])}if(P?(e.beginPath(),um(e,z,j,V,F,2)):"circle"===T?(e.beginPath(),S=z,B=Math.min(V,F),e.beginPath(),e.arc(S+V/2,j+F/2,B/2,0,2*Math.PI),e.closePath()):(e.beginPath(),e.rect(z,j,V,F)),L&&e.fill(),O&&e.stroke(),O&&"double"===I){var X=_/2;e.beginPath(),P?um(e,z+X,j+X,V-2*X,F-2*X,2):e.rect(z+X,j+X,V-2*X,F-2*X),e.stroke()}e.fillStyle=D,e.strokeStyle=A,e.lineWidth=M,e.setLineDash&&e.setLineDash([])}var q=2*t.pstyle("text-outline-width").pfValue;if(q>0&&(e.lineWidth=q),"wrap"===t.pstyle("text-wrap").value){var Y=eG(a,"labelWrapCachedLines",r),W=eG(a,"labelLineHeight",r),U=p/2,G=this.getLabelJustification(t);switch("auto"===G||("left"===x?"left"===G?s+=-p:"center"===G&&(s+=-U):"center"===x?"left"===G?s+=-U:"right"===G&&(s+=U):"right"===x&&("center"===G?s+=U:"right"===G&&(s+=p))),w){case"top":case"center":case"bottom":l-=(Y.length-1)*W}for(var H=0;H<Y.length;H++)q>0&&e.strokeText(Y[H],s,l),e.fillText(Y[H],s,l),l+=W}else q>0&&e.strokeText(u,s,l),e.fillText(u,s,l);0!==h&&(e.rotate(-h),e.translate(-c,-d))}}};var ub={};ub.drawNode=function(e,t,r){var n,i,a,o,s=!(arguments.length>3)||void 0===arguments[3]||arguments[3],l=!(arguments.length>4)||void 0===arguments[4]||arguments[4],u=!(arguments.length>5)||void 0===arguments[5]||arguments[5],c=this,d=t._private,h=d.rscratch,f=t.position();if(M(f.x)&&M(f.y)&&(!u||t.visible())){var p=u?t.effectiveOpacity():1,v=c.usePaths(),g=!1,y=t.padding();n=t.width()+2*y,i=t.height()+2*y,r&&(o=r,e.translate(-o.x1,-o.y1));for(var b=t.pstyle("background-image").value,x=Array(b.length),w=Array(b.length),E=0,k=0;k<b.length;k++){var _=b[k];if(x[k]=null!=_&&"none"!==_){var C=t.cy().style().getIndexedStyle(t,"background-image-crossorigin","value",k);E++,w[k]=c.getCachedImage(_,C,function(){d.backgroundTimestamp=Date.now(),t.emitAndNotify("background")})}}var T=t.pstyle("background-blacken").value,P=t.pstyle("border-width").pfValue,S=t.pstyle("background-opacity").value*p,B=t.pstyle("border-color").value,D=t.pstyle("border-style").value,A=t.pstyle("border-join").value,R=t.pstyle("border-cap").value,N=t.pstyle("border-position").value,I=t.pstyle("border-dash-pattern").pfValue,L=t.pstyle("border-dash-offset").pfValue,O=t.pstyle("border-opacity").value*p,z=t.pstyle("outline-width").pfValue,j=t.pstyle("outline-color").value,V=t.pstyle("outline-style").value,F=t.pstyle("outline-opacity").value*p,X=t.pstyle("outline-offset").value,q=t.pstyle("corner-radius").value;"auto"!==q&&(q=t.pstyle("corner-radius").pfValue);var Y=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S;c.eleFillStyle(e,t,r)},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O;c.colorStrokeStyle(e,B[0],B[1],B[2],t)},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;c.colorStrokeStyle(e,j[0],j[1],j[2],t)},G=function(e,t,r,n){var i,a=c.nodePathCache=c.nodePathCache||[],o=eT("polygon"===r?r+","+n.join(","):r,""+t,""+e,""+q),s=a[o],l=!1;return null!=s?(l=!0,h.pathCache=i=s):(i=new Path2D,a[o]=h.pathCache=i),{path:i,cacheHit:l}},H=t.pstyle("shape").strValue,K=t.pstyle("shape-polygon-points").pfValue;if(v){e.translate(f.x,f.y);var Z=G(n,i,H,K);a=Z.path,g=Z.cacheHit}var $=function(){if(!g){var r=f;v&&(r={x:0,y:0}),c.nodeShapes[c.getNodeShape(t)].draw(a||e,r.x,r.y,n,i,q,h)}v?e.fill(a):e.fill()},Q=function(){for(var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=d.backgrounding,a=0,o=0;o<w.length;o++){var s=t.cy().style().getIndexedStyle(t,"background-image-containment","value",o);if(n&&"over"===s||!n&&"inside"===s){a++;continue}x[o]&&w[o].complete&&!w[o].error&&(a++,c.drawInscribedImage(e,w[o],t,o,r))}d.backgrounding=a!==E,i!==d.backgrounding&&t.updateStyle(!1)},J=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;c.hasPie(t)&&(c.drawPie(e,t,a),r&&!v&&c.nodeShapes[c.getNodeShape(t)].draw(e,f.x,f.y,n,i,q,h))},ee=function(){var r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;c.hasStripe(t)&&(e.save(),v?e.clip(h.pathCache):(c.nodeShapes[c.getNodeShape(t)].draw(e,f.x,f.y,n,i,q,h),e.clip()),c.drawStripe(e,t,a),e.restore(),r&&!v&&c.nodeShapes[c.getNodeShape(t)].draw(e,f.x,f.y,n,i,q,h))},et=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,r=T>0?0:255;0!==T&&(c.colorFillStyle(e,r,r,r,(T>0?T:-T)*t),v?e.fill(a):e.fill())},er=function(){if(P>0){if(e.lineWidth=P,e.lineCap=R,e.lineJoin=A,e.setLineDash)switch(D){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash(I),e.lineDashOffset=L;break;case"solid":case"double":e.setLineDash([])}if("center"!==N){if(e.save(),e.lineWidth*=2,"inside"===N)v?e.clip(a):e.clip();else{var t=new Path2D;t.rect(-n/2-P,-i/2-P,n+2*P,i+2*P),t.addPath(a),e.clip(t,"evenodd")}v?e.stroke(a):e.stroke(),e.restore()}else v?e.stroke(a):e.stroke();if("double"===D){e.lineWidth=P/3;var r=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",v?e.stroke(a):e.stroke(),e.globalCompositeOperation=r}e.setLineDash&&e.setLineDash([])}},en=function(){if(z>0){if(e.lineWidth=z,e.lineCap="butt",e.setLineDash)switch(V){case"dotted":e.setLineDash([1,1]);break;case"dashed":e.setLineDash([4,2]);break;case"solid":case"double":e.setLineDash([])}var r=f;v&&(r={x:0,y:0});var a=c.getNodeShape(t),o=P;"inside"===N&&(o=0),"outside"===N&&(o*=2);var s=(n+o+(z+X))/n,l=(i+o+(z+X))/i,u=n*s,d=i*l,h=c.nodeShapes[a].points;if(v&&(C=G(u,d,a,h).path),"ellipse"===a)c.drawEllipsePath(C||e,r.x,r.y,u,d);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(a)){var p=0,g=0,y=0;"round-diamond"===a?p=(o+X+z)*1.4:"round-heptagon"===a?(p=(o+X+z)*1.075,y=-(o/2+X+z)/35):"round-hexagon"===a?p=(o+X+z)*1.12:"round-pentagon"===a?(p=(o+X+z)*1.13,y=-(o/2+X+z)/15):"round-tag"===a?(p=(o+X+z)*1.12,g=(o/2+z+X)*.07):"round-triangle"===a&&(p=Math.PI/2*(o+X+z),y=-(o+X/2+z)/Math.PI),0!==p&&(s=(n+p)/n,u=n*s,["round-hexagon","round-tag"].includes(a)||(l=(i+p)/i,d=i*l)),q="auto"===q?t2(u,d):q;for(var b=u/2,x=d/2,w=q+(o+z+X)/2,E=Array(h.length/2),k=Array(h.length/2),_=0;_<h.length/2;_++)E[_]={x:r.x+g+b*h[2*_],y:r.y+y+x*h[2*_+1]};var C,T,S,B,D,A=E.length;for(T=0,S=E[A-1];T<A;T++)B=E[T%A],D=E[(T+1)%A],k[T]=lR(S,B,D,w),S=B,B=D;c.drawRoundPolygonPath(C||e,r.x+g,r.y+y,n*s,i*l,h,k)}else["roundrectangle","round-rectangle"].includes(a)?(q="auto"===q?t1(u,d):q,c.drawRoundRectanglePath(C||e,r.x,r.y,u,d,q+(o+z+X)/2)):["cutrectangle","cut-rectangle"].includes(a)?(q="auto"===q?t5():q,c.drawCutRectanglePath(C||e,r.x,r.y,u,d,null,q+(o+z+X)/4)):["bottomroundrectangle","bottom-round-rectangle"].includes(a)?(q="auto"===q?t1(u,d):q,c.drawBottomRoundRectanglePath(C||e,r.x,r.y,u,d,q+(o+z+X)/2)):"barrel"===a?c.drawBarrelPath(C||e,r.x,r.y,u,d):(h=a.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(a)?tF(tX(h,(o+z+X)/n)):tF(tX(h,-((o+z+X)/n))),c.drawPolygonPath(C||e,r.x,r.y,n,i,h));if(v?e.stroke(C):e.stroke(),"double"===V){e.lineWidth=o/3;var M=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",v?e.stroke(C):e.stroke(),e.globalCompositeOperation=M}e.setLineDash&&e.setLineDash([])}};if("yes"===t.pstyle("ghost").value){var ei=t.pstyle("ghost-offset-x").pfValue,ea=t.pstyle("ghost-offset-y").pfValue,eo=t.pstyle("ghost-opacity").value,es=eo*p;e.translate(ei,ea),U(),en(),Y(eo*S),$(),Q(es,!0),W(eo*O),er(),J(0!==T||0!==P),ee(0!==T||0!==P),Q(es,!1),et(es),e.translate(-ei,-ea)}v&&e.translate(-f.x,-f.y),l&&c.drawNodeUnderlay(e,t,f,n,i),v&&e.translate(f.x,f.y),U(),en(),Y(),$(),Q(p,!0),W(),er(),J(0!==T||0!==P),ee(0!==T||0!==P),Q(p,!1),et(),v&&e.translate(-f.x,-f.y),c.drawElementText(e,t,null,s),l&&c.drawNodeOverlay(e,t,f,n,i),r&&e.translate(o.x1,o.y1)}};var ux=function(e){if(!["overlay","underlay"].includes(e))throw Error("Invalid state");return function(t,r,n,i,a){if(r.visible()){var o=r.pstyle("".concat(e,"-padding")).pfValue,s=r.pstyle("".concat(e,"-opacity")).value,l=r.pstyle("".concat(e,"-color")).value,u=r.pstyle("".concat(e,"-shape")).value,c=r.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(n=n||r.position(),null==i||null==a){var d=r.padding();i=r.width()+2*d,a=r.height()+2*d}this.colorFillStyle(t,l[0],l[1],l[2],s),this.nodeShapes[u].draw(t,n.x,n.y,i+2*o,a+2*o,c),t.fill()}}}};ub.drawNodeOverlay=ux("overlay"),ub.drawNodeUnderlay=ux("underlay"),ub.hasPie=function(e){return(e=e[0])._private.hasPie},ub.hasStripe=function(e){return(e=e[0])._private.hasStripe},ub.drawPie=function(e,t,r,n){t=t[0],n=n||t.position();var i,a=t.cy().style(),o=t.pstyle("pie-size"),s=t.pstyle("pie-hole"),l=t.pstyle("pie-start-angle").pfValue,u=n.x,c=n.y,d=Math.min(t.width(),t.height())/2,h=0;if(this.usePaths()&&(u=0,c=0),"%"===o.units?d*=o.pfValue:void 0!==o.pfValue&&(d=o.pfValue/2),"%"===s.units?i=d*s.pfValue:void 0!==s.pfValue&&(i=s.pfValue/2),!(i>=d))for(var f=1;f<=a.pieBackgroundN;f++){var p=t.pstyle("pie-"+f+"-background-size").value,v=t.pstyle("pie-"+f+"-background-color").value,g=t.pstyle("pie-"+f+"-background-opacity").value*r,y=p/100;y+h>1&&(y=1-h);var b=1.5*Math.PI+2*Math.PI*h,x=2*Math.PI*y,w=(b+=l)+x;0===p||h>=1||h+y>1||(0===i?(e.beginPath(),e.moveTo(u,c),e.arc(u,c,d,b,w)):(e.beginPath(),e.arc(u,c,d,b,w),e.arc(u,c,i,w,b,!0)),e.closePath(),this.colorFillStyle(e,v[0],v[1],v[2],g),e.fill(),h+=y)}},ub.drawStripe=function(e,t,r,n){t=t[0],n=n||t.position();var i=t.cy().style(),a=n.x,o=n.y,s=t.width(),l=t.height(),u=0,c=this.usePaths();e.save();var d=t.pstyle("stripe-direction").value,h=t.pstyle("stripe-size");switch(d){case"vertical":break;case"righward":e.rotate(-Math.PI/2)}var f=s,p=l;"%"===h.units?(f*=h.pfValue,p*=h.pfValue):void 0!==h.pfValue&&(f=h.pfValue,p=h.pfValue),c&&(a=0,o=0),o-=f/2,a-=p/2;for(var v=1;v<=i.stripeBackgroundN;v++){var g=t.pstyle("stripe-"+v+"-background-size").value,y=t.pstyle("stripe-"+v+"-background-color").value,b=t.pstyle("stripe-"+v+"-background-opacity").value*r,x=g/100;x+u>1&&(x=1-u),0===g||u>=1||u+x>1||(e.beginPath(),e.rect(a,o+p*u,f,p*x),e.closePath(),this.colorFillStyle(e,y[0],y[1],y[2],b),e.fill(),u+=x)}e.restore()};var uw={};function uE(e,t,r){var n=e.createShader(t);if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))throw Error(e.getShaderInfoLog(n));return n}function uk(e,t,r){void 0===r&&(r=t);var n=e.makeOffscreenCanvas(t,r),i=n.context=n.getContext("2d");return n.clear=function(){return i.clearRect(0,0,n.width,n.height)},n.clear(),n}function u_(e){var t=e.pixelRatio,r=e.cy.zoom(),n=e.cy.pan();return{zoom:r*t,pan:{x:n.x*t,y:n.y*t}}}function uC(e){return"solid"===e.pstyle("background-fill").value&&"none"===e.pstyle("background-image").strValue&&(0===e.pstyle("border-width").value||0===e.pstyle("border-opacity").value||"solid"===e.pstyle("border-style").value)}function uT(e,t,r){var n=e[0]/255,i=e[1]/255,a=e[2]/255,o=r||[,,,,];return o[0]=n*t,o[1]=i*t,o[2]=a*t,o[3]=t,o}function uP(e,t){var r=t||[,,,,];return r[0]=(255&e)/255,r[1]=(e>>8&255)/255,r[2]=(e>>16&255)/255,r[3]=(e>>24&255)/255,r}function uS(e,t){switch(t){case"float":return[1,e.FLOAT,4];case"vec2":return[2,e.FLOAT,4];case"vec3":return[3,e.FLOAT,4];case"vec4":return[4,e.FLOAT,4];case"int":return[1,e.INT,4];case"ivec2":return[2,e.INT,4]}}function uB(e,t,r){switch(t){case e.FLOAT:return new Float32Array(r);case e.INT:return new Int32Array(r)}}function uD(e,t,r,n){var i=v(uS(e,r),3),a=i[0],o=i[1],s=i[2],l=uB(e,o,t*a),u=a*s,c=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,c),e.bufferData(e.ARRAY_BUFFER,t*u,e.DYNAMIC_DRAW),e.enableVertexAttribArray(n),o===e.FLOAT?e.vertexAttribPointer(n,a,o,!1,u,0):o===e.INT&&e.vertexAttribIPointer(n,a,o,u,0),e.vertexAttribDivisor(n,1),e.bindBuffer(e.ARRAY_BUFFER,null);for(var d=Array(t),h=0;h<t;h++)d[h]=function(e,t,r,n,i,a){switch(t){case e.FLOAT:return new Float32Array(r.buffer,a*n,i);case e.INT:return new Int32Array(r.buffer,a*n,i)}}(e,o,l,u,a,h);return c.dataArray=l,c.stride=u,c.size=a,c.getView=function(e){return d[e]},c.setPoint=function(e,t,r){var n=d[e];n[0]=t,n[1]=r},c.bufferSubData=function(t){e.bindBuffer(e.ARRAY_BUFFER,c),t?e.bufferSubData(e.ARRAY_BUFFER,0,l,0,t*a):e.bufferSubData(e.ARRAY_BUFFER,0,l)},c}uw.getPixelRatio=function(){var e=this.data.contexts[0];if(null!=this.forcedPixelRatio)return this.forcedPixelRatio;var t=this.cy.window(),r=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/r},uw.paintCache=function(e){for(var t,r=this.paintCaches=this.paintCaches||[],n=!0,i=0;i<r.length;i++)if((t=r[i]).context===e){n=!1;break}return n&&(t={context:e},r.push(t)),t},uw.createGradientStyleFor=function(e,t,r,n,i){var a,o=this.usePaths(),s=r.pstyle(t+"-gradient-stop-colors").value,l=r.pstyle(t+"-gradient-stop-positions").pfValue;if("radial-gradient"===n)if(r.isEdge()){var u=r.sourceEndpoint(),c=r.targetEndpoint(),d=r.midpoint(),h=th(u,d),f=th(c,d);a=e.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(h,f))}else{var p=o?{x:0,y:0}:r.position(),v=r.paddedWidth(),g=r.paddedHeight();a=e.createRadialGradient(p.x,p.y,0,p.x,p.y,Math.max(v,g))}else if(r.isEdge()){var y=r.sourceEndpoint(),b=r.targetEndpoint();a=e.createLinearGradient(y.x,y.y,b.x,b.y)}else{var x=o?{x:0,y:0}:r.position(),w=r.paddedWidth(),E=r.paddedHeight(),k=w/2,_=E/2;switch(r.pstyle("background-gradient-direction").value){case"to-bottom":a=e.createLinearGradient(x.x,x.y-_,x.x,x.y+_);break;case"to-top":a=e.createLinearGradient(x.x,x.y+_,x.x,x.y-_);break;case"to-left":a=e.createLinearGradient(x.x+k,x.y,x.x-k,x.y);break;case"to-right":a=e.createLinearGradient(x.x-k,x.y,x.x+k,x.y);break;case"to-bottom-right":case"to-right-bottom":a=e.createLinearGradient(x.x-k,x.y-_,x.x+k,x.y+_);break;case"to-top-right":case"to-right-top":a=e.createLinearGradient(x.x-k,x.y+_,x.x+k,x.y-_);break;case"to-bottom-left":case"to-left-bottom":a=e.createLinearGradient(x.x+k,x.y-_,x.x-k,x.y+_);break;case"to-top-left":case"to-left-top":a=e.createLinearGradient(x.x+k,x.y+_,x.x-k,x.y-_)}}if(!a)return null;for(var C=l.length===s.length,T=s.length,P=0;P<T;P++)a.addColorStop(C?l[P]:P/(T-1),"rgba("+s[P][0]+","+s[P][1]+","+s[P][2]+","+i+")");return a},uw.gradientFillStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"background",t,r,n);if(!i)return null;e.fillStyle=i},uw.colorFillStyle=function(e,t,r,n,i){e.fillStyle="rgba("+t+","+r+","+n+","+i+")"},uw.eleFillStyle=function(e,t,r){var n=t.pstyle("background-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientFillStyle(e,t,n,r);else{var i=t.pstyle("background-color").value;this.colorFillStyle(e,i[0],i[1],i[2],r)}},uw.gradientStrokeStyle=function(e,t,r,n){var i=this.createGradientStyleFor(e,"line",t,r,n);if(!i)return null;e.strokeStyle=i},uw.colorStrokeStyle=function(e,t,r,n,i){e.strokeStyle="rgba("+t+","+r+","+n+","+i+")"},uw.eleStrokeStyle=function(e,t,r){var n=t.pstyle("line-fill").value;if("linear-gradient"===n||"radial-gradient"===n)this.gradientStrokeStyle(e,t,n,r);else{var i=t.pstyle("line-color").value;this.colorStrokeStyle(e,i[0],i[1],i[2],r)}},uw.matchCanvasSize=function(e){var t,r=this.data,n=this.findContainerClientCoords(),i=n[2],a=n[3],o=this.getPixelRatio(),s=this.motionBlurPxRatio;(e===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_NODE]||e===this.data.bufferCanvases[this.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=i*o,u=a*o;if(l!==this.canvasWidth||u!==this.canvasHeight){this.fontCaches=null;var c=r.canvasContainer;c.style.width=i+"px",c.style.height=a+"px";for(var d=0;d<this.CANVAS_LAYERS;d++)(t=r.canvases[d]).width=l,t.height=u,t.style.width=i+"px",t.style.height=a+"px";for(var d=0;d<this.BUFFER_COUNT;d++)(t=r.bufferCanvases[d]).width=l,t.height=u,t.style.width=i+"px",t.style.height=a+"px";this.textureMult=1,o<=1&&(t=r.bufferCanvases[this.TEXTURE_BUFFER],this.textureMult=2,t.width=l*this.textureMult,t.height=u*this.textureMult),this.canvasWidth=l,this.canvasHeight=u,this.pixelRatio=o}},uw.renderTo=function(e,t,r,n){this.render({forcedContext:e,forcedZoom:t,forcedPan:r,drawAllLayers:!0,forcedPxRatio:n})},uw.clearCanvas=function(){var e=this,t=e.data;function r(t){t.clearRect(0,0,e.canvasWidth,e.canvasHeight)}r(t.contexts[e.NODE]),r(t.contexts[e.DRAG])},uw.render=function(e){var t=this;e=e||eX();var r=t.cy,n=e.forcedContext,i=e.drawAllLayers,a=e.drawOnlyNodeLayer,o=e.forcedZoom,s=e.forcedPan,l=void 0===e.forcedPxRatio?this.getPixelRatio():e.forcedPxRatio,u=t.data,c=u.canvasNeedsRedraw,d=t.textureOnViewport&&!n&&(t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming),h=void 0!==e.motionBlur?e.motionBlur:t.motionBlur,f=t.motionBlurPxRatio,p=r.hasCompoundNodes(),v=t.hoverData.draggingEles,g=!!t.hoverData.selecting||!!t.touchData.selecting,y=h=h&&!n&&t.motionBlurEnabled&&!g;n||(t.prevPxRatio!==l&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container),t.redrawHint("eles",!0),t.redrawHint("drag",!0)),t.prevPxRatio=l),!n&&t.motionBlurTimeout&&clearTimeout(t.motionBlurTimeout),h&&(null==t.mbFrames&&(t.mbFrames=0),t.mbFrames++,t.mbFrames<3&&(y=!1),t.mbFrames>t.minMbLowQualFrames&&(t.motionBlurPxRatio=t.mbPxRBlurry)),t.clearingMotionBlur&&(t.motionBlurPxRatio=1),t.textureDrawLastFrame&&!d&&(c[t.NODE]=!0,c[t.SELECT_BOX]=!0);var b=r.style(),x=r.zoom(),w=void 0!==o?o:x,E=r.pan(),k={x:E.x,y:E.y},_={zoom:x,pan:{x:E.x,y:E.y}},C=t.prevViewport;void 0===C||_.zoom!==C.zoom||_.pan.x!==C.pan.x||_.pan.y!==C.pan.y||v&&!p||(t.motionBlurPxRatio=1),s&&(k=s),w*=l,k.x*=l,k.y*=l;var T=t.getCachedZSortedEles();function P(e,r,n,i,a){var o=e.globalCompositeOperation;e.globalCompositeOperation="destination-out",t.colorFillStyle(e,255,255,255,t.motionBlurTransparency),e.fillRect(r,n,i,a),e.globalCompositeOperation=o}function S(e,r){var a,l,c,d;t.clearingMotionBlur||e!==u.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]&&e!==u.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]?(a=k,l=w,c=t.canvasWidth,d=t.canvasHeight):(a={x:E.x*f,y:E.y*f},l=x*f,c=t.canvasWidth*f,d=t.canvasHeight*f),e.setTransform(1,0,0,1,0,0),"motionBlur"===r?P(e,0,0,c,d):!n&&(void 0===r||r)&&e.clearRect(0,0,c,d),i||(e.translate(a.x,a.y),e.scale(l,l)),s&&e.translate(s.x,s.y),o&&e.scale(o,o)}if(d||(t.textureDrawLastFrame=!1),d){if(t.textureDrawLastFrame=!0,!t.textureCache){t.textureCache={},t.textureCache.bb=r.mutableElements().boundingBox(),t.textureCache.texture=t.data.bufferCanvases[t.TEXTURE_BUFFER];var B=t.data.bufferContexts[t.TEXTURE_BUFFER];B.setTransform(1,0,0,1,0,0),B.clearRect(0,0,t.canvasWidth*t.textureMult,t.canvasHeight*t.textureMult),t.render({forcedContext:B,drawOnlyNodeLayer:!0,forcedPxRatio:l*t.textureMult});var _=t.textureCache.viewport={zoom:r.zoom(),pan:r.pan(),width:t.canvasWidth,height:t.canvasHeight};_.mpan={x:(0-_.pan.x)/_.zoom,y:(0-_.pan.y)/_.zoom}}c[t.DRAG]=!1,c[t.NODE]=!1;var D=u.contexts[t.NODE],A=t.textureCache.texture,_=t.textureCache.viewport;D.setTransform(1,0,0,1,0,0),h?P(D,0,0,_.width,_.height):D.clearRect(0,0,_.width,_.height);var M=b.core("outside-texture-bg-color").value,R=b.core("outside-texture-bg-opacity").value;t.colorFillStyle(D,M[0],M[1],M[2],R),D.fillRect(0,0,_.width,_.height);var x=r.zoom();S(D,!1),D.clearRect(_.mpan.x,_.mpan.y,_.width/_.zoom/l,_.height/_.zoom/l),D.drawImage(A,_.mpan.x,_.mpan.y,_.width/_.zoom/l,_.height/_.zoom/l)}else t.textureOnViewport&&!n&&(t.textureCache=null);var N=r.extent(),I=t.pinching||t.hoverData.dragging||t.swipePanning||t.data.wheelZooming||t.hoverData.draggingEles||t.cy.animated(),L=t.hideEdgesOnViewport&&I,O=[];if(O[t.NODE]=!c[t.NODE]&&h&&!t.clearedForMotionBlur[t.NODE]||t.clearingMotionBlur,O[t.NODE]&&(t.clearedForMotionBlur[t.NODE]=!0),O[t.DRAG]=!c[t.DRAG]&&h&&!t.clearedForMotionBlur[t.DRAG]||t.clearingMotionBlur,O[t.DRAG]&&(t.clearedForMotionBlur[t.DRAG]=!0),c[t.NODE]||i||a||O[t.NODE]){var z=h&&!O[t.NODE]&&1!==f,D=n||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_NODE]:u.contexts[t.NODE]);S(D,h&&!z?"motionBlur":void 0),L?t.drawCachedNodes(D,T.nondrag,l,N):t.drawLayeredElements(D,T.nondrag,l,N),t.debug&&t.drawDebugPoints(D,T.nondrag),i||h||(c[t.NODE]=!1)}if(!a&&(c[t.DRAG]||i||O[t.DRAG])){var z=h&&!O[t.DRAG]&&1!==f,D=n||(z?t.data.bufferContexts[t.MOTIONBLUR_BUFFER_DRAG]:u.contexts[t.DRAG]);S(D,h&&!z?"motionBlur":void 0),L?t.drawCachedNodes(D,T.drag,l,N):t.drawCachedElements(D,T.drag,l,N),t.debug&&t.drawDebugPoints(D,T.drag),i||h||(c[t.DRAG]=!1)}if(this.drawSelectionRectangle(e,S),h&&1!==f){var j=u.contexts[t.NODE],V=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_NODE],F=u.contexts[t.DRAG],X=t.data.bufferCanvases[t.MOTIONBLUR_BUFFER_DRAG],q=function(e,r,n){e.setTransform(1,0,0,1,0,0),n||!y?e.clearRect(0,0,t.canvasWidth,t.canvasHeight):P(e,0,0,t.canvasWidth,t.canvasHeight),e.drawImage(r,0,0,t.canvasWidth*f,t.canvasHeight*f,0,0,t.canvasWidth,t.canvasHeight)};(c[t.NODE]||O[t.NODE])&&(q(j,V,O[t.NODE]),c[t.NODE]=!1),(c[t.DRAG]||O[t.DRAG])&&(q(F,X,O[t.DRAG]),c[t.DRAG]=!1)}t.prevViewport=_,t.clearingMotionBlur&&(t.clearingMotionBlur=!1,t.motionBlurCleared=!0,t.motionBlur=!0),h&&(t.motionBlurTimeout=setTimeout(function(){t.motionBlurTimeout=null,t.clearedForMotionBlur[t.NODE]=!1,t.clearedForMotionBlur[t.DRAG]=!1,t.motionBlur=!1,t.clearingMotionBlur=!d,t.mbFrames=0,c[t.NODE]=!0,c[t.DRAG]=!0,t.redraw()},100)),n||r.emit("render")},uw.drawSelectionRectangle=function(e,t){var r=this.cy,n=this.data,i=r.style(),a=e.drawOnlyNodeLayer,o=e.drawAllLayers,l=n.canvasNeedsRedraw,u=e.forcedContext;if(this.showFps||!a&&l[this.SELECT_BOX]&&!o){var c=u||n.contexts[this.SELECT_BOX];if(t(c),1==this.selection[4]&&(this.hoverData.selecting||this.touchData.selecting)){var d=this.cy.zoom(),h=i.core("selection-box-border-width").value/d;c.lineWidth=h,c.fillStyle="rgba("+i.core("selection-box-color").value[0]+","+i.core("selection-box-color").value[1]+","+i.core("selection-box-color").value[2]+","+i.core("selection-box-opacity").value+")",c.fillRect(this.selection[0],this.selection[1],this.selection[2]-this.selection[0],this.selection[3]-this.selection[1]),h>0&&(c.strokeStyle="rgba("+i.core("selection-box-border-color").value[0]+","+i.core("selection-box-border-color").value[1]+","+i.core("selection-box-border-color").value[2]+","+i.core("selection-box-opacity").value+")",c.strokeRect(this.selection[0],this.selection[1],this.selection[2]-this.selection[0],this.selection[3]-this.selection[1]))}if(n.bgActivePosistion&&!this.hoverData.selecting){var d=this.cy.zoom(),f=n.bgActivePosistion;c.fillStyle="rgba("+i.core("active-bg-color").value[0]+","+i.core("active-bg-color").value[1]+","+i.core("active-bg-color").value[2]+","+i.core("active-bg-opacity").value+")",c.beginPath(),c.arc(f.x,f.y,i.core("active-bg-size").pfValue/d,0,2*Math.PI),c.fill()}var p=this.lastRedrawTime;if(this.showFps&&p){var v=Math.round(1e3/(p=Math.round(p))),g="1 frame = "+p+" ms = "+v+" fps";c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",s||(s=c.measureText(g).actualBoundingBoxAscent),c.fillText(g,0,s),c.strokeRect(0,s+10,250,20),c.fillRect(0,s+10,250*Math.min(v/60,1),20)}o||(l[this.SELECT_BOX]=!1)}};var uA="undefined"!=typeof Float32Array?Float32Array:Array;function uM(){var e=new uA(9);return uA!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function uR(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function uN(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=r[0],f=r[1];return e[0]=n,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=h*n+f*o+u,e[7]=h*i+f*s+c,e[8]=h*a+f*l+d,e}function uI(e,t,r){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],h=Math.sin(r),f=Math.cos(r);return e[0]=f*n+h*o,e[1]=f*i+h*s,e[2]=f*a+h*l,e[3]=f*o-h*n,e[4]=f*s-h*i,e[5]=f*l-h*a,e[6]=u,e[7]=c,e[8]=d,e}function uL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var uO=h(function e(t,r,n,i){d(this,e),this.debugID=Math.floor(1e4*Math.random()),this.r=t,this.texSize=r,this.texRows=n,this.texHeight=Math.floor(r/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=i(t,r,r),this.scratch=i(t,r,this.texHeight,"scratch")},[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(e){var t=e.w,r=e.h,n=this.texHeight,i=this.texSize,a=n/r,o=t*a,s=r*a;return o>i&&(a=i/t,o=t*a,s=r*a),{scale:a,texW:o,texH:s}}},{key:"draw",value:function(e,t,r){var n,i,a,o,s,l,u,c=this;if(this.locked)throw Error("can't draw, atlas is locked");var d=this.texSize,h=this.texRows,f=this.texHeight,p=this.getScale(t),v=p.scale,g=p.texW,y=p.texH,b=function(e,n){if(r&&n){var i=n.context,a=e.x,o=f*e.row;i.save(),i.translate(a,o),i.scale(v,v),r(i,t),i.restore()}},x=[null,null],w=function(){b(c.freePointer,c.canvas),x[0]={x:c.freePointer.x,y:c.freePointer.row*f,w:g,h:y},x[1]={x:c.freePointer.x+g,y:c.freePointer.row*f,w:0,h:y},c.freePointer.x+=g,c.freePointer.x==d&&(c.freePointer.x=0,c.freePointer.row++)},E=function(){c.freePointer.x=0,c.freePointer.row++};if(this.freePointer.x+g<=d)w();else{if(this.freePointer.row>=h-1)return!1;this.freePointer.x===d?(E(),w()):this.enableWrapping?(n=c.scratch,i=c.canvas,n.clear(),b({x:0,row:0},n),o=g-(a=d-c.freePointer.x),s=c.freePointer.x,l=c.freePointer.row*f,i.context.drawImage(n,0,0,a,f,s,l,a,f),x[0]={x:s,y:l,w:a,h:y},u=(c.freePointer.row+1)*f,i&&i.context.drawImage(n,a,0,o,f,0,u,o,f),x[1]={x:0,y:u,w:o,h:y},c.freePointer.x=o,c.freePointer.row++):(E(),w())}return this.keyToLocation.set(e,x),this.needsBuffer=!0,x}},{key:"getOffsets",value:function(e){return this.keyToLocation.get(e)}},{key:"isEmpty",value:function(){return 0===this.freePointer.x&&0===this.freePointer.row}},{key:"canFit",value:function(e){if(this.locked)return!1;var t=this.texSize,r=this.texRows,n=this.getScale(e).texW;return!(this.freePointer.x+n>t)||this.freePointer.row<r-1}},{key:"bufferIfNeeded",value:function(e){var t;this.texture||(this.texture=(this.debugID,(t=e.createTexture()).buffer=function(r){e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR_MIPMAP_NEAREST),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r),e.generateMipmap(e.TEXTURE_2D),e.bindTexture(e.TEXTURE_2D,null)},t.deleteTexture=function(){e.deleteTexture(t)},t)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}]),uz=h(function e(t,r,n,i){d(this,e),this.r=t,this.texSize=r,this.texRows=n,this.createTextureCanvas=i,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set},[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){return new uO(this.r,this.texSize,this.texRows,this.createTextureCanvas)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var e=this.r,t=this.texSize,r=this.texRows,n=this.createTextureCanvas,i=Math.floor(t/r);this.scratch=n(e,t,i,"scratch")}return this.scratch}},{key:"draw",value:function(e,t,r){var n=this.styleKeyToAtlas.get(e);return n||((n=this.atlases[this.atlases.length-1])&&n.canFit(t)||(n&&n.lock(),n=this._createAtlas(),this.atlases.push(n)),n.draw(e,t,r),this.styleKeyToAtlas.set(e,n)),n}},{key:"getAtlas",value:function(e){return this.styleKeyToAtlas.get(e)}},{key:"hasAtlas",value:function(e){return this.styleKeyToAtlas.has(e)}},{key:"markKeyForGC",value:function(e){this.markedKeys.add(e)}},{key:"gc",value:function(){var e=this,t=this.markedKeys;if(0===t.size)return void console.log("nothing to garbage collect");var r,n=[],i=new Map,a=null,o=f(this.atlases);try{for(o.s();!(r=o.n()).done;)if(function(){var o=r.value,s=o.getKeys(),l=function(e,t){return e.intersection?e.intersection(t):new Set(g(e).filter(function(e){return t.has(e)}))}(t,s);if(0===l.size)return n.push(o),s.forEach(function(e){return i.set(e,o)}),1;a||(a=e._createAtlas(),n.push(a));var u,c=f(s);try{for(c.s();!(u=c.n()).done;){var d=u.value;if(!l.has(d)){var h=o.getOffsets(d),p=v(h,2),y=p[0],b=p[1];a.canFit({w:y.w+b.w,h:y.h})||(a.lock(),a=e._createAtlas(),n.push(a)),o.canvas&&(e._copyTextureToNewAtlas(d,o,a),i.set(d,a))}}}catch(e){c.e(e)}finally{c.f()}o.dispose()}())continue}catch(e){o.e(e)}finally{o.f()}this.atlases=n,this.styleKeyToAtlas=i,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(e,t,r){var n=v(t.getOffsets(e),2),i=n[0],a=n[1];if(0===a.w)r.draw(e,i,function(e){e.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h)});else{var o=this._getScratchCanvas();o.clear(),o.context.drawImage(t.canvas,i.x,i.y,i.w,i.h,0,0,i.w,i.h),o.context.drawImage(t.canvas,a.x,a.y,a.w,a.h,i.w,0,a.w,a.h);var s=i.w+a.w,l=i.h;r.draw(e,{w:s,h:l},function(e){e.drawImage(o,0,0,s,l,0,0,s,l)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}]),uj=h(function e(t,r){d(this,e),this.r=t,this.globalOptions=r,this.atlasSize=r.webglTexSize,this.maxAtlasesPerBatch=r.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map},[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(e,t){var r=this.globalOptions,n=r.webglTexSize,i=r.createTextureCanvas,a=t.texRows,o=this._cacheScratchCanvas(i),s=new uz(this.r,n,a,o);this.collections.set(e,s)}},{key:"addRenderType",value:function(e,t){var r=t.collection;if(!this.collections.has(r))throw Error("invalid atlas collection name '".concat(r,"'"));var n=J({type:e,atlasCollection:this.collections.get(r)},t);this.renderTypes.set(e,n)}},{key:"getRenderTypeOpts",value:function(e){return this.renderTypes.get(e)}},{key:"getAtlasCollection",value:function(e){return this.collections.get(e)}},{key:"_cacheScratchCanvas",value:function(e){var t=-1,r=-1,n=null;return function(i,a,o,s){return s?(n&&a==t&&o==r||(t=a,r=o,n=e(i,a,o)),n):e(i,a,o)}}},{key:"_key",value:function(e,t){return"".concat(e,"-").concat(t)}},{key:"invalidate",value:function(e){var t,r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.forceRedraw,a=void 0!==i&&i,o=n.filterEle,s=void 0===o?function(){return!0}:o,l=n.filterType,u=void 0===l?function(){return!0}:l,c=!1,d=!1,h=f(e);try{for(h.s();!(t=h.n()).done;){var p=t.value;if(s(p)){var v,g=f(this.renderTypes.values());try{for(g.s();!(v=g.n()).done;)!function(){var e=v.value,t=e.type;if(u(t)){var n=r.collections.get(e.collection),i=e.getKey(p),o=Array.isArray(i)?i:[i];if(a)o.forEach(function(e){return n.markKeyForGC(e)}),d=!0;else{var s=e.getID?e.getID(p):p.id(),l=r._key(t,s),h=r.typeAndIdToKey.get(l);void 0!==h&&!function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(o,h)&&(c=!0,r.typeAndIdToKey.delete(l),h.forEach(function(e){return n.markKeyForGC(e)}))}}}()}catch(e){g.e(e)}finally{g.f()}}}}catch(e){h.e(e)}finally{h.f()}return d&&(this.gc(),c=!1),c}},{key:"gc",value:function(){var e,t=f(this.collections.values());try{for(t.s();!(e=t.n()).done;)e.value.gc()}catch(e){t.e(e)}finally{t.f()}}},{key:"getOrCreateAtlas",value:function(e,t,r,n){var i=this.renderTypes.get(t),a=this.collections.get(i.collection),o=!1,s=a.draw(n,r,function(t){i.drawClipped?(t.save(),t.beginPath(),t.rect(0,0,r.w,r.h),t.clip(),i.drawElement(t,e,r,!0,!0),t.restore()):i.drawElement(t,e,r,!0,!0),o=!0});if(o){var l=i.getID?i.getID(e):e.id(),u=this._key(t,l);this.typeAndIdToKey.has(u)?this.typeAndIdToKey.get(u).push(n):this.typeAndIdToKey.set(u,[n])}return s}},{key:"getAtlasInfo",value:function(e,t){var r=this,n=this.renderTypes.get(t),i=n.getKey(e);return(Array.isArray(i)?i:[i]).map(function(i){var a=n.getBoundingBox(e,i),o=r.getOrCreateAtlas(e,t,a,i),s=v(o.getOffsets(i),2),l=s[0];return{atlas:o,tex:l,tex1:l,tex2:s[1],bb:a}})}},{key:"getDebugInfo",value:function(){var e,t=[],r=f(this.collections);try{for(r.s();!(e=r.n()).done;){var n=v(e.value,2),i=n[0],a=n[1].getCounts(),o=a.keyCount,s=a.atlasCount;t.push({type:i,keyCount:o,atlasCount:s})}}catch(e){r.e(e)}finally{r.f()}return t}}]),uV=h(function e(t){d(this,e),this.globalOptions=t,this.atlasSize=t.webglTexSize,this.maxAtlasesPerBatch=t.webglTexPerBatch,this.batchAtlases=[]},[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(e,t){return t})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(e){return this.batchAtlases.length!==this.maxAtlasesPerBatch||this.batchAtlases.includes(e)}},{key:"getAtlasIndexForBatch",value:function(e){var t=this.batchAtlases.indexOf(e);if(t<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw Error("cannot add more atlases to batch");this.batchAtlases.push(e),t=this.batchAtlases.length-1}return t}}]),uF={name:"screen",screen:!0},uX={name:"picking",picking:!0},uq=h(function e(t,r,n){d(this,e),this.r=t,this.gl=r,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=uk,this.atlasManager=new uj(t,n),this.batchManager=new uV(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(uF),this.pickingProgram=this._createShaderProgram(uX),this.vao=this._createVAO()},[{key:"addAtlasCollection",value:function(e,t){this.atlasManager.addAtlasCollection(e,t)}},{key:"addTextureAtlasRenderType",value:function(e,t){this.atlasManager.addRenderType(e,t)}},{key:"addSimpleShapeRenderType",value:function(e,t){this.simpleShapeOptions.set(e,t)}},{key:"invalidate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.type,n=this.atlasManager;return r?n.invalidate(e,{filterType:function(e){return e===r},forceRedraw:!0}):n.invalidate(e)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(e){var t=this.gl,r="#version 300 es\n      precision highp float;\n\n      uniform mat3 uPanZoomMatrix;\n      uniform int  uAtlasSize;\n      \n      // instanced\n      in vec2 aPosition; // a vertex from the unit square\n      \n      in mat3 aTransform; // used to transform verticies, eg into a bounding box\n      in int aVertType; // the type of thing we are rendering\n\n      // the z-index that is output when using picking mode\n      in vec4 aIndex;\n      \n      // For textures\n      in int aAtlasId; // which shader unit/atlas to use\n      in vec4 aTex; // x/y/w/h of texture in atlas\n\n      // for edges\n      in vec4 aPointAPointB;\n      in vec4 aPointCPointD;\n      in vec2 aLineWidth; // also used for node border width\n\n      // simple shapes\n      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]\n      in vec4 aColor; // also used for edges\n      in vec4 aBorderColor; // aLineWidth is used for border width\n\n      // output values passed to the fragment shader\n      out vec2 vTexCoord;\n      out vec4 vColor;\n      out vec2 vPosition;\n      // flat values are not interpolated\n      flat out int vAtlasId; \n      flat out int vVertType;\n      flat out vec2 vTopRight;\n      flat out vec2 vBotLeft;\n      flat out vec4 vCornerRadius;\n      flat out vec4 vBorderColor;\n      flat out vec2 vBorderWidth;\n      flat out vec4 vIndex;\n      \n      void main(void) {\n        int vid = gl_VertexID;\n        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below\n\n        if(aVertType == ".concat(0,") {\n          float texX = aTex.x; // texture coordinates\n          float texY = aTex.y;\n          float texW = aTex.z;\n          float texH = aTex.w;\n\n          if(vid == 1 || vid == 2 || vid == 4) {\n            texX += texW;\n          }\n          if(vid == 2 || vid == 4 || vid == 5) {\n            texY += texH;\n          }\n\n          float d = float(uAtlasSize);\n          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(4," || aVertType == ").concat(7," \n             || aVertType == ").concat(5," || aVertType == ").concat(6,") { // simple shapes\n\n          // the bounding box is needed by the fragment shader\n          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat\n          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat\n          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated\n\n          // calculations are done in the fragment shader, just pass these along\n          vColor = aColor;\n          vCornerRadius = aCornerRadius;\n          vBorderColor = aBorderColor;\n          vBorderWidth = aLineWidth;\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n        }\n        else if(aVertType == ").concat(1,") {\n          vec2 source = aPointAPointB.xy;\n          vec2 target = aPointAPointB.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          // stretch the unit square into a long skinny rectangle\n          vec2 xBasis = target - source;\n          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));\n          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;\n\n          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(2,") {\n          vec2 pointA = aPointAPointB.xy;\n          vec2 pointB = aPointAPointB.zw;\n          vec2 pointC = aPointCPointD.xy;\n          vec2 pointD = aPointCPointD.zw;\n\n          // adjust the geometry so that the line is centered on the edge\n          position.y = position.y - 0.5;\n\n          vec2 p0, p1, p2, pos;\n          if(position.x == 0.0) { // The left side of the unit square\n            p0 = pointA;\n            p1 = pointB;\n            p2 = pointC;\n            pos = position;\n          } else { // The right side of the unit square, use same approach but flip the geometry upside down\n            p0 = pointD;\n            p1 = pointC;\n            p2 = pointB;\n            pos = vec2(0.0, -position.y);\n          }\n\n          vec2 p01 = p1 - p0;\n          vec2 p12 = p2 - p1;\n          vec2 p21 = p1 - p2;\n\n          // Find the normal vector.\n          vec2 tangent = normalize(normalize(p12) + normalize(p01));\n          vec2 normal = vec2(-tangent.y, tangent.x);\n\n          // Find the vector perpendicular to p0 -> p1.\n          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));\n\n          // Determine the bend direction.\n          float sigma = sign(dot(p01 + p21, normal));\n          float width = aLineWidth[0];\n\n          if(sign(pos.y) == -sigma) {\n            // This is an intersecting vertex. Adjust the position so that there's no overlap.\n            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          } else {\n            // This is a non-intersecting vertex. Treat it like a mitre join.\n            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);\n            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);\n          }\n\n          vColor = aColor;\n        } \n        else if(aVertType == ").concat(3," && vid < 3) {\n          // massage the first triangle into an edge arrow\n          if(vid == 0)\n            position = vec2(-0.15, -0.3);\n          if(vid == 1)\n            position = vec2(  0.0,  0.0);\n          if(vid == 2)\n            position = vec2( 0.15, -0.3);\n\n          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);\n          vColor = aColor;\n        }\n        else {\n          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space\n        }\n\n        vAtlasId = aAtlasId;\n        vVertType = aVertType;\n        vIndex = aIndex;\n      }\n    "),n=this.batchManager.getIndexArray(),i=function(e,t,r){var n=uE(e,e.VERTEX_SHADER,t),i=uE(e,e.FRAGMENT_SHADER,r),a=e.createProgram();if(e.attachShader(a,n),e.attachShader(a,i),e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS))throw Error("Could not initialize shaders");return a}(t,r,"#version 300 es\n      precision highp float;\n\n      // declare texture unit for each texture atlas in the batch\n      ".concat(n.map(function(e){return"uniform sampler2D uTexture".concat(e,";")}).join("\n	"),"\n\n      uniform vec4 uBGColor;\n      uniform float uZoom;\n\n      in vec2 vTexCoord;\n      in vec4 vColor;\n      in vec2 vPosition; // model coordinates\n\n      flat in int vAtlasId;\n      flat in vec4 vIndex;\n      flat in int vVertType;\n      flat in vec2 vTopRight;\n      flat in vec2 vBotLeft;\n      flat in vec4 vCornerRadius;\n      flat in vec4 vBorderColor;\n      flat in vec2 vBorderWidth;\n\n      out vec4 outColor;\n\n      ").concat("\n  float circleSD(vec2 p, float r) {\n    return distance(vec2(0), p) - r; // signed distance\n  }\n","\n      ").concat("\n  float rectangleSD(vec2 p, vec2 b) {\n    vec2 d = abs(p)-b;\n    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);\n  }\n","\n      ").concat("\n  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {\n    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;\n    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;\n    vec2 q = abs(p) - b + cr.x;\n    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;\n  }\n","\n      ").concat("\n  float ellipseSD(vec2 p, vec2 ab) {\n    p = abs( p ); // symmetry\n\n    // find root with Newton solver\n    vec2 q = ab*(p-ab);\n    float w = (q.x<q.y)? 1.570796327 : 0.0;\n    for( int i=0; i<5; i++ ) {\n      vec2 cs = vec2(cos(w),sin(w));\n      vec2 u = ab*vec2( cs.x,cs.y);\n      vec2 v = ab*vec2(-cs.y,cs.x);\n      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));\n    }\n    \n    // compute final point and distance\n    float d = length(p-ab*vec2(cos(w),sin(w)));\n    \n    // return signed distance\n    return (dot(p/ab,p/ab)>1.0) ? d : -d;\n  }\n","\n\n      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha\n        return vec4( \n          top.rgb + (bot.rgb * (1.0 - top.a)),\n          top.a   + (bot.a   * (1.0 - top.a)) \n        );\n      }\n\n      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance\n        // scale to the zoom level so that borders don't look blurry when zoomed in\n        // note 1.5 is an aribitrary value chosen because it looks good\n        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); \n      }\n\n      void main(void) {\n        if(vVertType == ").concat(0,") {\n          // look up the texel from the texture unit\n          ").concat(n.map(function(e){return"if(vAtlasId == ".concat(e,") outColor = texture(uTexture").concat(e,", vTexCoord);")}).join("\n	else "),"\n        } \n        else if(vVertType == ").concat(3,") {\n          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';\n          outColor = blend(vColor, uBGColor);\n          outColor.a = 1.0; // make opaque, masks out line under arrow\n        }\n        else if(vVertType == ").concat(4," && vBorderWidth == vec2(0.0)) { // simple rectangle with no border\n          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done\n        }\n        else if(vVertType == ").concat(4," || vVertType == ").concat(7," \n          || vVertType == ").concat(5," || vVertType == ").concat(6,") { // use SDF\n\n          float outerBorder = vBorderWidth[0];\n          float innerBorder = vBorderWidth[1];\n          float borderPadding = outerBorder * 2.0;\n          float w = vTopRight.x - vBotLeft.x - borderPadding;\n          float h = vTopRight.y - vBotLeft.y - borderPadding;\n          vec2 b = vec2(w/2.0, h/2.0); // half width, half height\n          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center\n\n          float d; // signed distance\n          if(vVertType == ").concat(4,") {\n            d = rectangleSD(p, b);\n          } else if(vVertType == ").concat(7," && w == h) {\n            d = circleSD(p, b.x); // faster than ellipse\n          } else if(vVertType == ").concat(7,") {\n            d = ellipseSD(p, b);\n          } else {\n            d = roundRectangleSD(p, b, vCornerRadius.wzyx);\n          }\n\n          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling\n          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box\n          if(d > 0.0) {\n            if(d > outerBorder) {\n              discard;\n            } else {\n              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);\n            }\n          } else {\n            if(d > innerBorder) {\n              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;\n              vec4 innerBorderColor = blend(vBorderColor, vColor);\n              outColor = distInterp(innerBorderColor, outerColor, d);\n            } \n            else {\n              vec4 outerColor;\n              if(innerBorder == 0.0 && outerBorder == 0.0) {\n                outerColor = vec4(0);\n              } else if(innerBorder == 0.0) {\n                outerColor = vBorderColor;\n              } else {\n                outerColor = blend(vBorderColor, vColor);\n              }\n              outColor = distInterp(vColor, outerColor, d - innerBorder);\n            }\n          }\n        }\n        else {\n          outColor = vColor;\n        }\n\n        ").concat(e.picking?"if(outColor.a == 0.0) discard;\n             else outColor = vIndex;":"","\n      }\n    "));i.aPosition=t.getAttribLocation(i,"aPosition"),i.aIndex=t.getAttribLocation(i,"aIndex"),i.aVertType=t.getAttribLocation(i,"aVertType"),i.aTransform=t.getAttribLocation(i,"aTransform"),i.aAtlasId=t.getAttribLocation(i,"aAtlasId"),i.aTex=t.getAttribLocation(i,"aTex"),i.aPointAPointB=t.getAttribLocation(i,"aPointAPointB"),i.aPointCPointD=t.getAttribLocation(i,"aPointCPointD"),i.aLineWidth=t.getAttribLocation(i,"aLineWidth"),i.aColor=t.getAttribLocation(i,"aColor"),i.aCornerRadius=t.getAttribLocation(i,"aCornerRadius"),i.aBorderColor=t.getAttribLocation(i,"aBorderColor"),i.uPanZoomMatrix=t.getUniformLocation(i,"uPanZoomMatrix"),i.uAtlasSize=t.getUniformLocation(i,"uAtlasSize"),i.uBGColor=t.getUniformLocation(i,"uBGColor"),i.uZoom=t.getUniformLocation(i,"uZoom"),i.uTextures=[];for(var a=0;a<this.batchManager.getMaxAtlasesPerBatch();a++)i.uTextures.push(t.getUniformLocation(i,"uTexture".concat(a)));return i}},{key:"_createVAO",value:function(){var e,t,r,n,i,a,o=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=o.length/2;var s=this.maxInstances,l=this.gl,u=this.program,c=l.createVertexArray();return l.bindVertexArray(c),e=u.aPosition,r=(t=v(uS(l,"vec2"),2))[0],i=uB(l,n=t[1],o),a=l.createBuffer(),l.bindBuffer(l.ARRAY_BUFFER,a),l.bufferData(l.ARRAY_BUFFER,i,l.STATIC_DRAW),n===l.FLOAT?l.vertexAttribPointer(e,r,n,!1,0,0):n===l.INT&&l.vertexAttribIPointer(e,r,n,0,0),l.enableVertexAttribArray(e),l.bindBuffer(l.ARRAY_BUFFER,null),this.transformBuffer=function(e,t,r){for(var n=new Float32Array(9*t),i=Array(t),a=0;a<t;a++){var o=9*a*4;i[a]=new Float32Array(n.buffer,o,9)}var s=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferData(e.ARRAY_BUFFER,n.byteLength,e.DYNAMIC_DRAW);for(var l=0;l<3;l++){var u=r+l;e.enableVertexAttribArray(u),e.vertexAttribPointer(u,3,e.FLOAT,!1,36,12*l),e.vertexAttribDivisor(u,1)}return e.bindBuffer(e.ARRAY_BUFFER,null),s.getMatrixView=function(e){return i[e]},s.setData=function(e,t){i[t].set(e,0)},s.bufferSubData=function(){e.bindBuffer(e.ARRAY_BUFFER,s),e.bufferSubData(e.ARRAY_BUFFER,0,n)},s}(l,s,u.aTransform),this.indexBuffer=uD(l,s,"vec4",u.aIndex),this.vertTypeBuffer=uD(l,s,"int",u.aVertType),this.atlasIdBuffer=uD(l,s,"int",u.aAtlasId),this.texBuffer=uD(l,s,"vec4",u.aTex),this.pointAPointBBuffer=uD(l,s,"vec4",u.aPointAPointB),this.pointCPointDBuffer=uD(l,s,"vec4",u.aPointCPointD),this.lineWidthBuffer=uD(l,s,"vec2",u.aLineWidth),this.colorBuffer=uD(l,s,"vec4",u.aColor),this.cornerRadiusBuffer=uD(l,s,"vec4",u.aCornerRadius),this.borderColorBuffer=uD(l,s,"vec4",u.aBorderColor),l.bindVertexArray(null),c}},{key:"buffers",get:function(){var e=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(e){return U(e,"Buffer")}).map(function(t){return e[t]})),this._buffers}},{key:"startFrame",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:uF;this.panZoomMatrix=e,this.renderTarget=t,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(e,t){return!!e.visible()&&(!t||!t.isVisible||t.isVisible(e))}},{key:"drawTexture",value:function(e,t,r){var n=this.atlasManager,i=this.batchManager,a=n.getRenderTypeOpts(r);if(this._isVisible(e,a)&&(!e.isEdge()||this._isValidEdge(e))){if(this.renderTarget.picking&&a.getTexPickingMode){var o=a.getTexPickingMode(e);if(1===o)return;if(2==o)return void this.drawPickingRectangle(e,t,r)}var s,l=f(n.getAtlasInfo(e,r));try{for(l.s();!(s=l.n()).done;){var u=s.value,c=u.atlas,d=u.tex1,h=u.tex2;i.canAddToCurrentBatch(c)||this.endBatch();for(var p=i.getAtlasIndexForBatch(c),g=0,y=[[d,!0],[h,!1]];g<y.length;g++){var b=v(y[g],2),x=b[0],w=b[1];if(0!=x.w){var E=this.instanceCount;this.vertTypeBuffer.getView(E)[0]=0;var k=this.indexBuffer.getView(E);uP(t,k),this.atlasIdBuffer.getView(E)[0]=p;var _=this.texBuffer.getView(E);_[0]=x.x,_[1]=x.y,_[2]=x.w,_[3]=x.h;var C=this.transformBuffer.getMatrixView(E);this.setTransformMatrix(e,C,a,u,w),this.instanceCount++,!w&&this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(e){l.e(e)}finally{l.f()}}}},{key:"setTransformMatrix",value:function(e,t,r,n){var i=!(arguments.length>4)||void 0===arguments[4]||arguments[4],a=0;if(r.shapeProps&&r.shapeProps.padding&&(a=e.pstyle(r.shapeProps.padding).pfValue),n){var o=n.bb,s=n.tex1,l=n.tex2,u=s.w/(s.w+l.w);i||(u=1-u);var c=this._getAdjustedBB(o,a,i,u);this._applyTransformMatrix(t,c,r,e)}else{var d=r.getBoundingBox(e),h=this._getAdjustedBB(d,a,!0,1);this._applyTransformMatrix(t,h,r,e)}}},{key:"_applyTransformMatrix",value:function(e,t,r,n){uR(e);var i,a,o=r.getRotation?r.getRotation(n):0;if(0!==o){var s=r.getRotationPoint(n);uN(e,e,[s.x,s.y]),uI(e,e,o);var l=r.getRotationOffset(n);i=l.x+(t.xOffset||0),a=l.y+(t.yOffset||0)}else i=t.x1,a=t.y1;uN(e,e,[i,a]),uL(e,e,[t.w,t.h])}},{key:"_getAdjustedBB",value:function(e,t,r,n){var i=e.x1,a=e.y1,o=e.w,s=e.h,l=e.yOffset;t&&(i-=t,a-=t,o+=2*t,s+=2*t);var u=0,c=o*n;return r&&n<1?o=c:!r&&n<1&&(i+=u=o-c,o=c),{x1:i,y1:a,w:o,h:s,xOffset:u,yOffset:l}}},{key:"drawPickingRectangle",value:function(e,t,r){var n=this.atlasManager.getRenderTypeOpts(r),i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=4,uP(t,this.indexBuffer.getView(i)),uT([0,0,0],1,this.colorBuffer.getView(i));var a=this.transformBuffer.getMatrixView(i);this.setTransformMatrix(e,a,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(e,t,r){var n=this.simpleShapeOptions.get(r);if(this._isVisible(e,n)){var i=n.shapeProps,a=this._getVertTypeForShape(e,i.shape);if(void 0===a||n.isSimple&&!n.isSimple(e))return void this.drawTexture(e,t,r);var o=this.instanceCount;if(this.vertTypeBuffer.getView(o)[0]=a,5===a||6===a){var s=n.getBoundingBox(e),l=this._getCornerRadius(e,i.radius,s),u=this.cornerRadiusBuffer.getView(o);u[0]=l,u[1]=l,u[2]=l,u[3]=l,6===a&&(u[0]=0,u[2]=0)}uP(t,this.indexBuffer.getView(o)),uT(e.pstyle(i.color).value,e.pstyle(i.opacity).value,this.colorBuffer.getView(o));var c=this.lineWidthBuffer.getView(o);if(c[0]=0,c[1]=0,i.border){var d=e.pstyle("border-width").value;if(d>0){uT(e.pstyle("border-color").value,e.pstyle("border-opacity").value,this.borderColorBuffer.getView(o));var h=e.pstyle("border-position").value;if("inside"===h)c[0]=0,c[1]=-d;else if("outside"===h)c[0]=d,c[1]=0;else{var f=d/2;c[0]=f,c[1]=-f}}}var p=this.transformBuffer.getMatrixView(o);this.setTransformMatrix(e,p,n),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(e,t){switch(e.pstyle(t).value){case"rectangle":return 4;case"ellipse":return 7;case"roundrectangle":case"round-rectangle":return 5;case"bottom-round-rectangle":return 6;default:return}}},{key:"_getCornerRadius",value:function(e,t,r){var n=r.w,i=r.h;return"auto"===e.pstyle(t).value?t1(n,i):Math.min(e.pstyle(t).pfValue,i/2,n/2)}},{key:"drawEdgeArrow",value:function(e,t,r){if(e.visible()){var n,i,a,o=e._private.rscratch;if(("source"===r?(n=o.arrowStartX,i=o.arrowStartY,a=o.srcArrowAngle):(n=o.arrowEndX,i=o.arrowEndY,a=o.tgtArrowAngle),!(isNaN(n)||null==n||isNaN(i)||null==i||isNaN(a))&&null!=a)&&"none"!==e.pstyle(r+"-arrow-shape").value){var s=e.pstyle(r+"-arrow-color").value,l=e.pstyle("opacity").value,u=e.pstyle("line-opacity").value,c=e.pstyle("width").pfValue,d=e.pstyle("arrow-scale").value,h=this.r.getArrowWidth(c,d),f=this.instanceCount,p=this.transformBuffer.getMatrixView(f);uR(p),uN(p,p,[n,i]),uL(p,p,[h,h]),uI(p,p,a),this.vertTypeBuffer.getView(f)[0]=3,uP(t,this.indexBuffer.getView(f)),uT(s,l*u,this.colorBuffer.getView(f)),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}},{key:"drawEdgeLine",value:function(e,t){if(e.visible()){var r=this._getEdgePoints(e);if(r){var n=e.pstyle("opacity").value,i=e.pstyle("line-opacity").value,a=e.pstyle("width").pfValue,o=e.pstyle("line-color").value,s=n*i;if(r.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),4==r.length){var l=this.instanceCount;this.vertTypeBuffer.getView(l)[0]=1,uP(t,this.indexBuffer.getView(l)),uT(o,s,this.colorBuffer.getView(l)),this.lineWidthBuffer.getView(l)[0]=a;var u=this.pointAPointBBuffer.getView(l);u[0]=r[0],u[1]=r[1],u[2]=r[2],u[3]=r[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var c=0;c<r.length-2;c+=2){var d=this.instanceCount;this.vertTypeBuffer.getView(d)[0]=2,uP(t,this.indexBuffer.getView(d)),uT(o,s,this.colorBuffer.getView(d)),this.lineWidthBuffer.getView(d)[0]=a;var h=r[c-2],f=r[c-1],p=r[c],v=r[c+1],g=r[c+2],y=r[c+3],b=r[c+4],x=r[c+5];0==c&&(h=2*p-g+.001,f=2*v-y+.001),c==r.length-4&&(b=2*g-p+.001,x=2*y-v+.001);var w=this.pointAPointBBuffer.getView(d);w[0]=h,w[1]=f,w[2]=p,w[3]=v;var E=this.pointCPointDBuffer.getView(d);E[0]=g,E[1]=y,E[2]=b,E[3]=x,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(e){var t=e._private.rscratch;return!(t.badLine||null==t.allpts||isNaN(t.allpts[0]))}},{key:"_getEdgePoints",value:function(e){var t=e._private.rscratch;if(this._isValidEdge(e)){var r=t.allpts;if(4==r.length)return r;var n=this._getNumSegments(e);return this._getCurveSegmentPoints(r,n)}}},{key:"_getNumSegments",value:function(e){return Math.min(15,this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(e,t){if(4==e.length)return e;for(var r=Array((t+1)*2),n=0;n<=t;n++)if(0==n)r[0]=e[0],r[1]=e[1];else if(n==t)r[2*n]=e[e.length-2],r[2*n+1]=e[e.length-1];else{var i=n/t;this._setCurvePoint(e,i,r,2*n)}return r}},{key:"_setCurvePoint",value:function(e,t,r,n){if(e.length<=2)r[n]=e[0],r[n+1]=e[1];else{for(var i=Array(e.length-2),a=0;a<i.length;a+=2){var o=(1-t)*e[a]+t*e[a+2],s=(1-t)*e[a+1]+t*e[a+3];i[a]=o,i[a+1]=s}return this._setCurvePoint(i,t,r,n)}}},{key:"endBatch",value:function(){var e=this.gl,t=this.vao,r=this.vertexCount,n=this.instanceCount;if(0!==n){var i,a,o=this.renderTarget.picking?this.pickingProgram:this.program;e.useProgram(o),e.bindVertexArray(t);var s,l=f(this.buffers);try{for(l.s();!(s=l.n()).done;)s.value.bufferSubData(n)}catch(e){l.e(e)}finally{l.f()}for(var u=this.batchManager.getAtlases(),c=0;c<u.length;c++)u[c].bufferIfNeeded(e);for(var d=0;d<u.length;d++)e.activeTexture(e.TEXTURE0+d),e.bindTexture(e.TEXTURE_2D,u[d].texture),e.uniform1i(o.uTextures[d],d);e.uniform1f(o.uZoom,(a=(i=this.r).pixelRatio,i.cy.zoom()*a)),e.uniformMatrix3fv(o.uPanZoomMatrix,!1,this.panZoomMatrix),e.uniform1i(o.uAtlasSize,this.batchManager.getAtlasSize());var h=uT(this.bgColor,1);e.uniform4fv(o.uBGColor,h),e.drawArraysInstanced(e.TRIANGLES,0,r,n),e.bindVertexArray(null),e.bindTexture(e.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:n,atlasCount:u.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var e=this.atlasManager.getDebugInfo(),t=e.reduce(function(e,t){return e+t.atlasCount},0),r=this.batchDebugInfo,n=r.reduce(function(e,t){return e+t.count},0);return{atlasInfo:e,totalAtlases:t,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:r.length,batchInfo:r,totalInstances:n}}}]),uY={};function uW(e,t){return eG(e._private.rscratch,"labelWrapCachedLines",t)||[]}uY.initWebgl=function(e,t){var r,n,i,a,o,s,l,u,c=this,d=c.data.contexts[c.WEBGL];e.bgColor=en((r=c.cy.container())&&r.style&&r.style.backgroundColor||"white"),e.webglTexSize=Math.min(e.webglTexSize,d.getParameter(d.MAX_TEXTURE_SIZE)),e.webglTexRows=Math.min(e.webglTexRows,54),e.webglTexRowsNodes=Math.min(e.webglTexRowsNodes,54),e.webglBatchSize=Math.min(e.webglBatchSize,16384),e.webglTexPerBatch=Math.min(e.webglTexPerBatch,d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS)),c.webglDebug=e.webglDebug,c.webglDebugShowAtlases=e.webglDebugShowAtlases,l=d.createFramebuffer(),d.bindFramebuffer(d.FRAMEBUFFER,l),u=d.createTexture(),d.bindTexture(d.TEXTURE_2D,u),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,u,0),d.bindFramebuffer(d.FRAMEBUFFER,null),l.setFramebufferAttachmentSizes=function(e,t){d.bindTexture(d.TEXTURE_2D,u),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,e,t,0,d.RGBA,d.UNSIGNED_BYTE,null)},c.pickingFrameBuffer=l,c.pickingFrameBuffer.needsDraw=!0,c.drawing=new uq(c,d,e);var h=function(e){return function(t){return c.getTextAngle(t,e)}},p=function(e){return function(t){var r=t.pstyle(e);return r&&r.value}},g=function(e){return function(t){return t.pstyle("".concat(e,"-opacity")).value>0}},y=function(e){return"yes"===e.pstyle("text-events").strValue?2:1},b=function(e){var t=e.position(),r=t.x,n=t.y,i=e.outerWidth(),a=e.outerHeight();return{w:i,h:a,x1:r-i/2,y1:n-a/2}};c.drawing.addAtlasCollection("node",{texRows:e.webglTexRowsNodes}),c.drawing.addAtlasCollection("label",{texRows:e.webglTexRows}),c.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:t.getStyleKey,getBoundingBox:t.getElementBox,drawElement:t.drawElement}),c.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:b,isSimple:uC,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),c.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:b,isVisible:g("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),c.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:b,isVisible:g("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),c.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:y,getKey:uU(t.getLabelKey,null),getBoundingBox:uG(t.getLabelBox,null),drawClipped:!0,drawElement:t.drawLabel,getRotation:h(null),getRotationPoint:t.getLabelRotationPoint,getRotationOffset:t.getLabelRotationOffset,isVisible:p("label")}),c.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:y,getKey:uU(t.getSourceLabelKey,"source"),getBoundingBox:uG(t.getSourceLabelBox,"source"),drawClipped:!0,drawElement:t.drawSourceLabel,getRotation:h("source"),getRotationPoint:t.getSourceLabelRotationPoint,getRotationOffset:t.getSourceLabelRotationOffset,isVisible:p("source-label")}),c.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:y,getKey:uU(t.getTargetLabelKey,"target"),getBoundingBox:uG(t.getTargetLabelBox,"target"),drawClipped:!0,drawElement:t.drawTargetLabel,getRotation:h("target"),getRotationPoint:t.getTargetLabelRotationPoint,getRotationOffset:t.getTargetLabelRotationOffset,isVisible:p("target-label")});var x=ep(function(){console.log("garbage collect flag set"),c.data.gc=!0},1e4);c.onUpdateEleCalcs(function(e,t){var r=!1;t&&t.length>0&&(r|=c.drawing.invalidate(t)),r&&x()}),i=(n=c).render,n.render=function(e){e=e||{};var t,r,a,o,s=n.cy;n.webgl&&(s.zoom()>7.99?((r=(t=n).data.contexts[t.WEBGL]).clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),i.call(n,e)):(a=n,(o=function(e){e.save(),e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,a.canvasWidth,a.canvasHeight),e.restore()})(a.data.contexts[a.NODE]),o(a.data.contexts[a.DRAG]),uZ(n,e,uF)))},a=n.matchCanvasSize,n.matchCanvasSize=function(e){a.call(n,e),n.pickingFrameBuffer.setFramebufferAttachmentSizes(n.canvasWidth,n.canvasHeight),n.pickingFrameBuffer.needsDraw=!0},n.findNearestElements=function(e,t,r,i){return function(e,t,r){var n,i,a,o=function(e,t,r,n,i){var a=u_(e),o=a.pan,s=a.zoom,l=v((g=t*s+o.x,y=r*s+o.y,[g,y=Math.round(e.canvasHeight-y)]),2),u=l[0],c=l[1],d=e.data.contexts[e.WEBGL];d.bindFramebuffer(d.FRAMEBUFFER,e.pickingFrameBuffer),e.pickingFrameBuffer.needsDraw&&(d.viewport(0,0,d.canvas.width,d.canvas.height),uZ(e,null,uX),e.pickingFrameBuffer.needsDraw=!1);var h=new Uint8Array(144);d.readPixels(u-3,c-3,6,6,d.RGBA,d.UNSIGNED_BYTE,h),d.bindFramebuffer(d.FRAMEBUFFER,null);for(var f=new Set,p=0;p<36;p++){var g,y,b,x=(b=h.slice(4*p,4*p+4))[0]+(b[1]<<8)+(b[2]<<16)+(b[3]<<24)-1;x>=0&&f.add(x)}return f}(e,t,r),s=e.getCachedZSortedEles(),l=f(o);try{for(l.s();!(a=l.n()).done;){var u=s[a.value];if(!n&&u.isNode()&&(n=u),!i&&u.isEdge()&&(i=u),n&&i)break}}catch(e){l.e(e)}finally{l.f()}return[n,i].filter(Boolean)}(n,e,t)},o=n.invalidateCachedZSortedEles,n.invalidateCachedZSortedEles=function(){o.call(n),n.pickingFrameBuffer.needsDraw=!0},s=n.notify,n.notify=function(e,t){s.call(n,e,t),"viewport"===e||"bounds"===e?n.pickingFrameBuffer.needsDraw=!0:"background"===e&&n.drawing.invalidate(t,{type:"node-body"})}};var uU=function(e,t){return function(r){var n=e(r),i=uW(r,t);return i.length>1?i.map(function(e,t){return"".concat(n,"_").concat(t)}):n}},uG=function(e,t){return function(r,n){var i=e(r);if("string"==typeof n){var a=n.indexOf("_");if(a>0){var o=Number(n.substring(a+1)),s=uW(r,t),l=i.h/s.length,u=l*o,c=i.y1+u;return{x1:i.x1,w:i.w,y1:c,h:l,yOffset:u}}}return i}};function uH(e,t){var r=e.canvasWidth,n=e.canvasHeight,i=u_(e),a=i.pan,o=i.zoom;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,r,n),t.translate(a.x,a.y),t.scale(o,o)}function uK(e,t,r){var n=e.drawing;t+=1,r.isNode()?(n.drawNode(r,t,"node-underlay"),n.drawNode(r,t,"node-body"),n.drawTexture(r,t,"label"),n.drawNode(r,t,"node-overlay")):(n.drawEdgeLine(r,t),n.drawEdgeArrow(r,t,"source"),n.drawEdgeArrow(r,t,"target"),n.drawTexture(r,t,"label"),n.drawTexture(r,t,"edge-source-label"),n.drawTexture(r,t,"edge-target-label"))}function uZ(e,t,r){e.webglDebug&&(G=performance.now());var n=e.drawing,i=0;if(r.screen&&e.data.canvasNeedsRedraw[e.SELECT_BOX]&&e.drawSelectionRectangle(t,function(t){return uH(e,t)}),e.data.canvasNeedsRedraw[e.NODE]||r.picking){var a,o,s,l,u,c,d,h,p,v,g,y,b,x,w,E,k,_,C,T,P,S,B,D,A,M,R,N,I,L,O,z=e.data.contexts[e.WEBGL];r.screen?(z.clearColor(0,0,0,0),z.enable(z.BLEND),z.blendFunc(z.ONE,z.ONE_MINUS_SRC_ALPHA)):z.disable(z.BLEND),z.clear(z.COLOR_BUFFER_BIT|z.DEPTH_BUFFER_BIT),z.viewport(0,0,z.canvas.width,z.canvas.height);var j=(a=e.canvasWidth,o=e.canvasHeight,l=(s=u_(e)).pan,u=s.zoom,uN(c=uM(),c,[l.x,l.y]),uL(c,c,[u,u]),h=d=uM(),h[0]=2/a,h[1]=0,h[2]=0,h[3]=0,h[4]=-2/o,h[5]=0,h[6]=-1,h[7]=1,h[8]=1,v=p=uM(),g=d[0],y=d[1],b=d[2],x=d[3],w=d[4],E=d[5],k=d[6],_=d[7],C=d[8],T=c[0],P=c[1],S=c[2],B=c[3],D=c[4],A=c[5],M=c[6],R=c[7],N=c[8],v[0]=T*g+P*x+S*k,v[1]=T*y+P*w+S*_,v[2]=T*b+P*E+S*C,v[3]=B*g+D*x+A*k,v[4]=B*y+D*w+A*_,v[5]=B*b+D*E+A*C,v[6]=M*g+R*x+N*k,v[7]=M*y+R*w+N*_,v[8]=M*b+R*E+N*C,p),V=e.getCachedZSortedEles();if(i=V.length,n.startFrame(j,r),r.screen){for(var F=0;F<V.nondrag.length;F++)uK(e,F,V.nondrag[F]);for(var X=0;X<V.drag.length;X++)uK(e,X,V.drag[X])}else if(r.picking)for(var q=0;q<V.length;q++)uK(e,q,V[q]);n.endFrame(),r.screen&&e.webglDebugShowAtlases&&((I=e.data.contexts[e.NODE]).save(),uH(e,I),I.strokeStyle="rgba(0, 0, 0, 0.3)",I.beginPath(),I.moveTo(-1e3,0),I.lineTo(1e3,0),I.stroke(),I.beginPath(),I.moveTo(0,-1e3),I.lineTo(0,1e3),I.stroke(),I.restore(),O=0,(L=function(t,r,n){for(var i=t.atlasManager.getAtlasCollection(r),a=e.data.contexts[e.NODE],o=i.atlases,s=0;s<o.length;s++){var l=o[s].canvas;if(l){var u=l.width,c=l.height,d=u*s,h=l.height*n;a.save(),a.scale(.4,.4),a.drawImage(l,d,h),a.strokeStyle="black",a.rect(d,h,u,c),a.stroke(),a.restore()}}})(e.drawing,"node",O++),L(e.drawing,"label",O++)),e.data.canvasNeedsRedraw[e.NODE]=!1,e.data.canvasNeedsRedraw[e.DRAG]=!1}if(e.webglDebug){var Y=Math.ceil(performance.now()-G),W=n.getDebugInfo(),U=["".concat(i," elements"),"".concat(W.totalInstances," instances"),"".concat(W.batchCount," batches"),"".concat(W.totalAtlases," atlases"),"".concat(W.wrappedCount," wrapped textures"),"".concat(W.simpleCount," simple shapes")].join(", ");console.log("WebGL (".concat(r.name,") - frame time ").concat(Y,"ms")),console.log("Totals:"),console.log("  ".concat(U)),console.log("Texture Atlases Used:");var G,H,K=f(W.atlasInfo);try{for(K.s();!(H=K.n()).done;){var Z=H.value;console.log("  ".concat(Z.type,": ").concat(Z.keyCount," keys, ").concat(Z.atlasCount," atlases"))}}catch(e){K.e(e)}finally{K.f()}console.log("")}e.data.gc&&(console.log("Garbage Collect!"),e.data.gc=!1,n.gc())}var u$={};u$.drawPolygonPath=function(e,t,r,n,i,a){var o=n/2,s=i/2;e.beginPath&&e.beginPath(),e.moveTo(t+o*a[0],r+s*a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(t+o*a[2*l],r+s*a[2*l+1]);e.closePath()},u$.drawRoundPolygonPath=function(e,t,r,n,i,a,o){o.forEach(function(t){return lM(e,t)}),e.closePath()},u$.drawRoundRectanglePath=function(e,t,r,n,i,a){var o=n/2,s=i/2,l="auto"===a?t1(n,i):Math.min(a,s,o);e.beginPath&&e.beginPath(),e.moveTo(t,r-s),e.arcTo(t+o,r-s,t+o,r,l),e.arcTo(t+o,r+s,t,r+s,l),e.arcTo(t-o,r+s,t-o,r,l),e.arcTo(t-o,r-s,t,r-s,l),e.lineTo(t,r-s),e.closePath()},u$.drawBottomRoundRectanglePath=function(e,t,r,n,i,a){var o=n/2,s=i/2,l="auto"===a?t1(n,i):a;e.beginPath&&e.beginPath(),e.moveTo(t,r-s),e.lineTo(t+o,r-s),e.lineTo(t+o,r),e.arcTo(t+o,r+s,t,r+s,l),e.arcTo(t-o,r+s,t-o,r,l),e.lineTo(t-o,r-s),e.lineTo(t,r-s),e.closePath()},u$.drawCutRectanglePath=function(e,t,r,n,i,a,o){var s=n/2,l=i/2,u="auto"===o?t5():o;e.beginPath&&e.beginPath(),e.moveTo(t-s+u,r-l),e.lineTo(t+s-u,r-l),e.lineTo(t+s,r-l+u),e.lineTo(t+s,r+l-u),e.lineTo(t+s-u,r+l),e.lineTo(t-s+u,r+l),e.lineTo(t-s,r+l-u),e.lineTo(t-s,r-l+u),e.closePath()},u$.drawBarrelPath=function(e,t,r,n,i){var a=n/2,o=i/2,s=t-a,l=t+a,u=r-o,c=r+o,d=t3(n,i),h=d.widthOffset,f=d.heightOffset,p=d.ctrlPtOffsetPct*h;e.beginPath&&e.beginPath(),e.moveTo(s,u+f),e.lineTo(s,c-f),e.quadraticCurveTo(s+p,c,s+h,c),e.lineTo(l-h,c),e.quadraticCurveTo(l-p,c,l,c-f),e.lineTo(l,u+f),e.quadraticCurveTo(l-p,u,l-h,u),e.lineTo(s+h,u),e.quadraticCurveTo(s+p,u,s,u+f),e.closePath()};for(var uQ={},uJ={},u0=Math.PI/40,u1=0*Math.PI;u1<2*Math.PI;u1+=u0)uQ[u1]=Math.sin(u1),uJ[u1]=Math.cos(u1);u$.drawEllipsePath=function(e,t,r,n,i){if(e.beginPath&&e.beginPath(),e.ellipse)e.ellipse(t,r,n/2,i/2,0,0,2*Math.PI);else for(var a,o,s=n/2,l=i/2,u=0*Math.PI;u<2*Math.PI;u+=u0)a=t-s*uQ[u]*0+s*uJ[u]*1,o=r+l*uJ[u]*0+l*uQ[u]*1,0===u?e.moveTo(a,o):e.lineTo(a,o);e.closePath()};var u2={};function u5(e){var t=e.indexOf(",");return e.substr(t+1)}function u3(e,t,r){var n=function(){return t.toDataURL(r,e.quality)};switch(e.output){case"blob-promise":return new ne(function(n,i){try{t.toBlob(function(e){null!=e?n(e):i(Error("`canvas.toBlob()` sent a null value in its callback"))},r,e.quality)}catch(e){i(e)}});case"blob":return function(e,t){for(var r=atob(e),n=new ArrayBuffer(r.length),i=new Uint8Array(n),a=0;a<r.length;a++)i[a]=r.charCodeAt(a);return new Blob([n],{type:t})}(u5(n()),r);case"base64":return u5(n());default:return n()}}u2.createBuffer=function(e,t){var r=document.createElement("canvas");return r.width=e,r.height=t,[r,r.getContext("2d")]},u2.bufferCanvasImage=function(e){var t=this.cy,r=t.mutableElements().boundingBox(),n=this.findContainerClientCoords(),i=e.full?Math.ceil(r.w):n[2],a=e.full?Math.ceil(r.h):n[3],o=M(e.maxWidth)||M(e.maxHeight),s=this.getPixelRatio(),l=1;if(void 0!==e.scale)i*=e.scale,a*=e.scale,l=e.scale;else if(o){var u=1/0,c=1/0;M(e.maxWidth)&&(u=l*e.maxWidth/i),M(e.maxHeight)&&(c=l*e.maxHeight/a),i*=l=Math.min(u,c),a*=l}o||(i*=s,a*=s,l*=s);var d=document.createElement("canvas");d.width=i,d.height=a,d.style.width=i+"px",d.style.height=a+"px";var h=d.getContext("2d");if(i>0&&a>0){h.clearRect(0,0,i,a),h.globalCompositeOperation="source-over";var f=this.getCachedZSortedEles();if(e.full)h.translate(-r.x1*l,-r.y1*l),h.scale(l,l),this.drawElements(h,f),h.scale(1/l,1/l),h.translate(r.x1*l,r.y1*l);else{var p=t.pan(),v={x:p.x*l,y:p.y*l};l*=t.zoom(),h.translate(v.x,v.y),h.scale(l,l),this.drawElements(h,f),h.scale(1/l,1/l),h.translate(-v.x,-v.y)}e.bg&&(h.globalCompositeOperation="destination-over",h.fillStyle=e.bg,h.rect(0,0,i,a),h.fill())}return d},u2.png=function(e){return u3(e,this.bufferCanvasImage(e),"image/png")},u2.jpg=function(e){return u3(e,this.bufferCanvasImage(e),"image/jpeg")};var u4={};u4.nodeShapeImpl=function(e,t,r,n,i,a,o,s){switch(e){case"ellipse":return this.drawEllipsePath(t,r,n,i,a);case"polygon":return this.drawPolygonPath(t,r,n,i,a,o);case"round-polygon":return this.drawRoundPolygonPath(t,r,n,i,a,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(t,r,n,i,a,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(t,r,n,i,a,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(t,r,n,i,a,s);case"barrel":return this.drawBarrelPath(t,r,n,i,a)}};var u9=u6.prototype;function u6(e){var t=this,r=t.cy.window().document;e.webgl&&(u9.CANVAS_LAYERS=t.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),t.data={canvases:Array(u9.CANVAS_LAYERS),contexts:Array(u9.CANVAS_LAYERS),canvasNeedsRedraw:Array(u9.CANVAS_LAYERS),bufferCanvases:Array(u9.BUFFER_COUNT),bufferContexts:Array(u9.CANVAS_LAYERS)};var n="-webkit-tap-highlight-color",i="rgba(0,0,0,0)";t.data.canvasContainer=r.createElement("div");var a=t.data.canvasContainer.style;t.data.canvasContainer.style[n]=i,a.position="relative",a.zIndex="0",a.overflow="hidden";var o=e.cy.container();o.appendChild(t.data.canvasContainer),o.style[n]=i;var s={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};E&&E.userAgent.match(/msie|trident|edge/i)&&(s["-ms-touch-action"]="none",s["touch-action"]="none");for(var l=0;l<u9.CANVAS_LAYERS;l++){var u=t.data.canvases[l]=r.createElement("canvas"),c=u9.CANVAS_TYPES[l];t.data.contexts[l]=u.getContext(c),t.data.contexts[l]||eL("Could not create canvas of type "+c),Object.keys(s).forEach(function(e){u.style[e]=s[e]}),u.style.position="absolute",u.setAttribute("data-id","layer"+l),u.style.zIndex=String(u9.CANVAS_LAYERS-l),t.data.canvasContainer.appendChild(u),t.data.canvasNeedsRedraw[l]=!1}t.data.topCanvas=t.data.canvases[0],t.data.canvases[u9.NODE].setAttribute("data-id","layer"+u9.NODE+"-node"),t.data.canvases[u9.SELECT_BOX].setAttribute("data-id","layer"+u9.SELECT_BOX+"-selectbox"),t.data.canvases[u9.DRAG].setAttribute("data-id","layer"+u9.DRAG+"-drag"),t.data.canvases[u9.WEBGL]&&t.data.canvases[u9.WEBGL].setAttribute("data-id","layer"+u9.WEBGL+"-webgl");for(var l=0;l<u9.BUFFER_COUNT;l++)t.data.bufferCanvases[l]=r.createElement("canvas"),t.data.bufferContexts[l]=t.data.bufferCanvases[l].getContext("2d"),t.data.bufferCanvases[l].style.position="absolute",t.data.bufferCanvases[l].setAttribute("data-id","buffer"+l),t.data.bufferCanvases[l].style.zIndex=String(-l-1),t.data.bufferCanvases[l].style.visibility="hidden";t.pathsEnabled=!0;var d=tb(),h=function(e){return{x:-e.w/2,y:-e.h/2}},f=function(e){return e[0]._private.nodeKey},p=function(e){return e[0]._private.labelStyleKey},v=function(e){return e[0]._private.sourceLabelStyleKey},g=function(e){return e[0]._private.targetLabelStyleKey},y=function(e,r,n,i,a){return t.drawElement(e,r,n,!1,!1,a)},b=function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"main",a)},x=function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"source",a)},w=function(e,r,n,i,a){return t.drawElementText(e,r,n,i,"target",a)},k=function(e){return e.boundingBox(),e[0]._private.bodyBounds},_=function(e){return e.boundingBox(),e[0]._private.labelBounds.main||d},C=function(e){return e.boundingBox(),e[0]._private.labelBounds.source||d},T=function(e){return e.boundingBox(),e[0]._private.labelBounds.target||d},P=function(e,t){return t},S=function(e){var t;return{x:((t=k(e)).x1+t.x2)/2,y:(t.y1+t.y2)/2}},B=function(e,t,r){var n=e?e+"-":"";return{x:t.x+r.pstyle(n+"text-margin-x").pfValue,y:t.y+r.pstyle(n+"text-margin-y").pfValue}},D=function(e,t,r){var n=e[0]._private.rscratch;return{x:n[t],y:n[r]}},A=function(e){return B("",D(e,"labelX","labelY"),e)},M=function(e){return B("source",D(e,"sourceLabelX","sourceLabelY"),e)},R=function(e){return B("target",D(e,"targetLabelX","targetLabelY"),e)},N=function(e){return h(k(e))},I=function(e){return h(C(e))},L=function(e){return h(T(e))},O=function(e){var t=_(e),r=h(_(e));if(e.isNode()){switch(e.pstyle("text-halign").value){case"left":r.x=-t.w-(t.leftPad||0);break;case"right":r.x=-(t.rightPad||0)}switch(e.pstyle("text-valign").value){case"top":r.y=-t.h-(t.topPad||0);break;case"bottom":r.y=-(t.botPad||0)}}return r},z=t.data.eleTxrCache=new l9(t,{getKey:f,doesEleInvalidateKey:function(e){var t=e[0]._private;return t.oldBackgroundTimestamp!==t.backgroundTimestamp},drawElement:y,getBoundingBox:k,getRotationPoint:S,getRotationOffset:N,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),j=t.data.lblTxrCache=new l9(t,{getKey:p,drawElement:b,getBoundingBox:_,getRotationPoint:A,getRotationOffset:O,isVisible:P}),V=t.data.slbTxrCache=new l9(t,{getKey:v,drawElement:x,getBoundingBox:C,getRotationPoint:M,getRotationOffset:I,isVisible:P}),F=t.data.tlbTxrCache=new l9(t,{getKey:g,drawElement:w,getBoundingBox:T,getRotationPoint:R,getRotationOffset:L,isVisible:P}),X=t.data.lyrTxrCache=new l7(t);t.onUpdateEleCalcs(function(e,t){z.invalidateElements(t),j.invalidateElements(t),V.invalidateElements(t),F.invalidateElements(t),X.invalidateElements(t);for(var r=0;r<t.length;r++){var n=t[r]._private;n.oldBackgroundTimestamp=n.backgroundTimestamp}});var q=function(e){for(var t=0;t<e.length;t++)X.enqueueElementRefinement(e[t].ele)};z.onDequeue(q),j.onDequeue(q),V.onDequeue(q),F.onDequeue(q),e.webgl&&t.initWebgl(e,{getStyleKey:f,getLabelKey:p,getSourceLabelKey:v,getTargetLabelKey:g,drawElement:y,drawLabel:b,drawSourceLabel:x,drawTargetLabel:w,getElementBox:k,getLabelBox:_,getSourceLabelBox:C,getTargetLabelBox:T,getElementRotationPoint:S,getElementRotationOffset:N,getLabelRotationPoint:A,getSourceLabelRotationPoint:M,getTargetLabelRotationPoint:R,getLabelRotationOffset:O,getSourceLabelRotationOffset:I,getTargetLabelRotationOffset:L})}u9.CANVAS_LAYERS=3,u9.SELECT_BOX=0,u9.DRAG=1,u9.NODE=2,u9.WEBGL=3,u9.CANVAS_TYPES=["2d","2d","2d","webgl2"],u9.BUFFER_COUNT=3,u9.TEXTURE_BUFFER=0,u9.MOTIONBLUR_BUFFER_NODE=1,u9.MOTIONBLUR_BUFFER_DRAG=2,u9.redrawHint=function(e,t){switch(e){case"eles":this.data.canvasNeedsRedraw[u9.NODE]=t;break;case"drag":this.data.canvasNeedsRedraw[u9.DRAG]=t;break;case"select":this.data.canvasNeedsRedraw[u9.SELECT_BOX]=t;break;case"gc":this.data.gc=!0}};var u7="undefined"!=typeof Path2D;u9.path2dEnabled=function(e){if(void 0===e)return this.pathsEnabled;this.pathsEnabled=!!e},u9.usePaths=function(){return u7&&this.pathsEnabled},u9.setImgSmoothing=function(e,t){null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled=t:(e.webkitImageSmoothingEnabled=t,e.mozImageSmoothingEnabled=t,e.msImageSmoothingEnabled=t)},u9.getImgSmoothing=function(e){return null!=e.imageSmoothingEnabled?e.imageSmoothingEnabled:e.webkitImageSmoothingEnabled||e.mozImageSmoothingEnabled||e.msImageSmoothingEnabled},u9.makeOffscreenCanvas=function(e,t){var r;return("undefined"==typeof OffscreenCanvas?"undefined":b(OffscreenCanvas))!=="undefined"?r=new OffscreenCanvas(e,t):((r=this.cy.window().document.createElement("canvas")).width=e,r.height=t),r},[ut,us,up,ug,uy,ub,uw,uY,u$,u2,u4].forEach(function(e){J(u9,e)});var u8=[{name:"null",impl:a0},{name:"base",impl:lJ},{name:"canvas",impl:u6}],ce={},ct={};function cr(e,t,r){var n=r,i=function(r){ez("Can not register `"+t+"` for `"+e+"` since `"+r+"` already exists in the prototype and can not be overridden")};if("core"===e)if(af.prototype[t])return i(t);else af.prototype[t]=r;else if("collection"===e)if(iU.prototype[t])return i(t);else iU.prototype[t]=r;else if("layout"===e){for(var a=function(e){this.options=e,r.call(this,e),A(this._private)||(this._private={}),this._private.cy=e.cy,this._private.listeners=[],this.createEmitter()},o=a.prototype=Object.create(r.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var c=r.prototype.stop;o.stop=function(){var e=this.options;if(e&&e.animate){var t=this.animations;if(t)for(var r=0;r<t.length;r++)t[r].stop()}return c?c.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var d=function(e){return e._private.cy},h={addEventFields:function(e,t){t.layout=e,t.cy=d(e),t.target=e},bubble:function(){return!0},parent:function(e){return d(e)}};J(o,{createEmitter:function(){return this._private.emitter=new ig(h,this),this},emitter:function(){return this._private.emitter},on:function(e,t){return this.emitter().on(e,t),this},one:function(e,t){return this.emitter().one(e,t),this},once:function(e,t){return this.emitter().one(e,t),this},removeListener:function(e,t){return this.emitter().removeListener(e,t),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(e,t){return this.emitter().emit(e,t),this}}),ny.eventAliasesOn(o),n=a}else if("renderer"===e&&"null"!==t&&"base"!==t){var f=cn("renderer","base"),p=f.prototype,v=r.prototype,g=function(){f.apply(this,arguments),r.apply(this,arguments)},y=g.prototype;for(var b in p){var x=p[b];if(null!=v[b])return i(b);y[b]=x}for(var w in v)y[w]=v[w];p.clientFunctions.forEach(function(e){y[e]=y[e]||function(){eL("Renderer does not implement `renderer."+e+"()` on its prototype")}}),n=g}else if("__proto__"===e||"constructor"===e||"prototype"===e)return eL(e+" is an illegal type to be registered, possibly lead to prototype pollutions");return ea({map:ce,keys:[e,t],value:n})}function cn(e,t){return eo({map:ce,keys:[e,t]})}function ci(e,t,r,n,i){return ea({map:ct,keys:[e,t,r,n],value:i})}function ca(e,t,r,n){return eo({map:ct,keys:[e,t,r,n]})}var co=function(){return 2==arguments.length?cn.apply(null,arguments):3==arguments.length?cr.apply(null,arguments):4==arguments.length?ca.apply(null,arguments):5==arguments.length?ci.apply(null,arguments):void eL("Invalid extension access syntax")};af.prototype.extension=co,[{type:"layout",extensions:aJ},{type:"renderer",extensions:u8}].forEach(function(e){e.extensions.forEach(function(t){cr(e.type,t.name,t.impl)})});var cs=function(){if(!(this instanceof cs))return new cs;this.length=0},cl=cs.prototype;cl.instanceString=function(){return"stylesheet"},cl.selector=function(e){return this[this.length++]={selector:e,properties:[]},this},cl.css=function(e,t){var r=this.length-1;if(S(e))this[r].properties.push({name:e,value:t});else if(A(e))for(var n=Object.keys(e),i=0;i<n.length;i++){var a=n[i],o=e[a];if(null!=o){var s=au.properties[a]||au.properties[q(a)];if(null!=s){var l=s.name;this[r].properties.push({name:l,value:o})}}}return this},cl.style=cl.css,cl.generateStyle=function(e){var t=new au(e);return this.appendToStyle(t)},cl.appendToStyle=function(e){for(var t=0;t<this.length;t++){var r=this[t],n=r.selector,i=r.properties;e.selector(n);for(var a=0;a<i.length;a++){var o=i[a];e.css(o.name,o.value)}}return e};var cu=function(e){return(void 0===e&&(e={}),A(e))?new af(e):S(e)?co.apply(co,arguments):void 0};cu.use=function(e){var t=Array.prototype.slice.call(arguments,1);return t.unshift(cu),e.apply(null,t),this},cu.warnings=function(e){return eO(e)},cu.version="3.33.1",cu.stylesheet=cu.Stylesheet=cs;var cc=e.i(65777),cd=e.i(99587);function ch({data:e,searchQuery:t,highlightMode:r,onNodeSelect:n,selectedNodeId:i,isLoading:a,centerNodeId:o,viewMode:s="graph"}){let c=(0,u.useRef)(null),d=(0,u.useRef)(null),[h,f]=(0,u.useState)({nodes:0,edges:0}),[p,v]=(0,u.useState)(null),[g,y]=(0,u.useState)(null),[b,x]=(0,u.useState)([]),[w,E]=(0,u.useState)({zoom:1,panX:0,panY:0}),k=(0,u.useRef)(null),_=(0,u.useCallback)(()=>{if(!c.current||!e)return;d.current&&(d.current.destroy(),d.current=null),v("Converting elements...");let t=(0,cd.convertToElements)(e);f({nodes:e.elements.nodes.length,edges:e.elements.edges.length}),v("Initializing graph...");let r=cu({container:c.current,elements:t,style:[{selector:"node",style:{label:e=>`${e.data("label")}
${e.data("sublabel")||""}`,"text-valign":"center","text-halign":"center","font-size":"10px",width:100,height:50,shape:"round-rectangle","background-color":"#1e293b","border-width":3,"border-color":e=>(0,cd.getDeviceClassColor)(e.data("device_class")),color:"#f1f5f9","text-wrap":"wrap","text-max-width":"90px","font-weight":"normal"}},{selector:"node.center-node",style:{label:e=>`${e.data("label")}
${e.data("sublabel")||""}`,"text-valign":"center","text-halign":"center","font-size":"12px","border-width":4,"border-color":"#3b82f6","background-color":"#1e3a5f",width:120,height:60,color:"#fff","font-weight":"bold","z-index":999}},{selector:"node:selected",style:{label:e=>`${e.data("label")}
${e.data("sublabel")||""}`,"text-valign":"center","text-halign":"center","font-size":"11px","border-width":3,"border-color":"#10b981","background-color":"#134e4a",width:110,height:55,color:"#fff"}},{selector:"node.highlighted",style:{"border-width":3,"border-color":"#8b5cf6","background-color":"#2e1065",width:105,height:52,color:"#e9d5ff"}},{selector:"node.search-match",style:{label:e=>`${e.data("label")}
${e.data("sublabel")||""}`,"text-valign":"center","text-halign":"center","font-size":"11px","border-width":3,"border-color":"#10b981","background-color":"#134e4a",width:110,height:55,color:"#fff"}},{selector:"node.dimmed",style:{opacity:.2}},{selector:"edge",style:{width:1.5,"line-color":"#4b5563","target-arrow-color":"#4b5563","target-arrow-shape":"triangle","arrow-scale":.7,"curve-style":"bezier",opacity:.6}},{selector:"edge.highlighted",style:{width:2.5,"line-color":"#8b5cf6","target-arrow-color":"#8b5cf6",opacity:1}},{selector:"edge.dimmed",style:{opacity:.1}}],layout:{name:"preset"},minZoom:.1,maxZoom:5,wheelSensitivity:.3,pixelRatio:1});if(v("Calculating layout..."),"timeline"===s){let e=(0,cd.calculateNodeDepths)(r),t=1/0,n=-1/0,i=new Map;r.nodes().forEach(e=>{let r=e.data("decision_date"),a=(0,cd.parseDateToTimestamp)(r);null!==a&&(i.set(e.id(),a),t=Math.min(t,a),n=Math.max(n,a))}),t===1/0&&(t=0,n=1);let a=.05*(n-t||1);t-=a,n+=a;let o=c.current?.clientWidth||1e3;c.current?.clientHeight;let s=Math.max(...Array.from(e.values()),0);r.nodes().forEach(r=>{let a,l=i.get(r.id()),u=e.get(r.id())??0;a=void 0!==l?80+(l-t)/(n-t)*(o-160):80+u/(s+1)*(o-160),r.position({x:a,y:80+100*u})}),r.fit(void 0,50),k.current={minTime:t,maxTime:n,graphPadding:80};let l=new Date(t).getFullYear(),u=new Date(n).getFullYear(),d=u-l,h=d>20?5:d>10?2:1,f=[],p=Math.ceil(l/h)*h;for(let e=p;e<=u;e+=h)f.push(e);let v=f[f.length-1];v<u&&f.push(v+h),x(f),y({min:new Date(t),max:new Date(n)})}else y(null),x([]),r.layout({name:"dagre",rankDir:"TB",nodeSep:120,rankSep:80,edgeSep:50,padding:50,animate:!1,fit:!0}).run();if(o){let e=r.getElementById(o);e.nonempty()&&e.addClass("center-node")}r.fit(void 0,50),v(null),r.on("tap","node",e=>{n(e.target.id())}),r.on("tap",e=>{e.target===r&&n(null)});let i=()=>{let e=r.zoom(),t=r.pan();E({zoom:e,panX:t.x,panY:t.y});let n=Math.max(.6,Math.min(1.8,1/e)),i=e>.5,a=i?e=>`${e.data("label")}
${e.data("sublabel")||""}`:e=>e.data("label");r.style().selector("node").style({"font-size":`${10*n}px`,label:a,width:i?100:65,height:i?50:28}).selector("node.center-node").style({"font-size":`${12*n}px`,label:a,width:i?120:75,height:i?60:32}).selector("node:selected").style({"font-size":`${11*n}px`,label:a,width:i?110:70,height:i?55:30}).selector("node.search-match").style({"font-size":`${11*n}px`,label:a,width:i?110:70,height:i?55:30}).update()};r.on("zoom pan",i),i(),d.current=r},[e,o,n,s]);return((0,u.useEffect)(()=>(_(),()=>{d.current?.destroy()}),[_]),(0,u.useEffect)(()=>{let e=d.current;if(e&&(e.nodes().removeClass("search-match"),t.trim().length>=2)){let r=t.toLowerCase(),n=0;e.nodes().forEach(e=>{if(n>=100)return;let t=e.data("device_name")?.toLowerCase()||"",i=e.data("id")?.toLowerCase()||"",a=e.data("applicant")?.toLowerCase()||"";(t.includes(r)||i.includes(r)||a.includes(r))&&(e.addClass("search-match"),n++)});let i=e.nodes(".search-match");i.length>0&&e.animate({center:{eles:i.first()},zoom:2,duration:500})}},[t]),(0,u.useEffect)(()=>{let e=d.current;if(e){if(e.elements().removeClass("highlighted dimmed"),o){let t=e.getElementById(o);t.nonempty()&&t.addClass("center-node")}if(i&&"none"!==r){let t,n=e.getElementById(i);(t="ancestors"===r?(0,cd.findPathToRoot)(e,i):(t=(0,cd.findDescendants)(e,i).union(n)).union(t.connectedEdges())).addClass("highlighted"),e.elements().difference(t).addClass("dimmed")}if(i){let t=e.getElementById(i);t.select(),e.animate({center:{eles:t},zoom:Math.max(e.zoom(),1.5),duration:300})}else e.nodes().unselect()}},[i,r,o]),a)?(0,l.jsx)("div",{className:"w-full h-full bg-gray-900 rounded-lg flex items-center justify-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center gap-4 text-gray-500",children:[(0,l.jsx)("img",{src:"/devtree/loading.gif",alt:"Loading",className:"w-48 h-48 md:w-64 md:h-64"}),(0,l.jsx)("span",{className:"text-base md:text-lg",children:"Loading device database..."})]})}):(0,l.jsxs)("div",{className:"relative w-full h-full",children:[(0,l.jsx)("div",{ref:c,className:"w-full h-full bg-gray-900 rounded-lg",style:{minHeight:"500px"}}),p&&(0,l.jsx)("div",{className:"absolute inset-0 bg-gray-900/80 flex items-center justify-center rounded-lg",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),(0,l.jsx)("p",{className:"text-gray-400",children:p})]})}),"timeline"===s&&g&&k.current&&(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("div",{className:"absolute inset-0 pointer-events-none overflow-hidden",children:b.map(e=>{let t=k.current,r=c.current?.clientWidth||1e3,n=new Date(e,0,1).getTime(),i=(t.graphPadding+(n-t.minTime)/(t.maxTime-t.minTime)*(r-2*t.graphPadding))*w.zoom+w.panX;return i<-50||i>r+50?null:(0,l.jsxs)("div",{className:"absolute top-0 bottom-0 flex flex-col items-center",style:{left:`${i}px`},children:[(0,l.jsx)("div",{className:"flex-1 border-l border-dashed border-gray-600/40",style:{marginTop:"40px"}}),(0,l.jsx)("div",{className:"absolute top-2 -translate-x-1/2 bg-gray-800/95 px-2 py-1 rounded text-xs text-gray-400 whitespace-nowrap",children:e})]},e)})})}),(0,l.jsxs)("div",{className:"absolute bottom-4 left-4 bg-gray-800/90 px-3 py-2 rounded text-xs text-gray-400",children:[h.nodes.toLocaleString()," nodes  ",h.edges.toLocaleString()," edges","timeline"===s&&"  Timeline view"]}),(0,l.jsx)("div",{className:"absolute bottom-4 right-4 bg-gray-800/90 px-3 py-2 rounded text-xs text-gray-400",children:"Scroll to zoom  Drag to pan  Click node for details"})]})}cu.use(cc.default),e.s(["default",()=>ch],81164)},39098,e=>{e.n(e.i(81164))}]);